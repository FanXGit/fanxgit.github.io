(window.webpackJsonp=window.webpackJsonp||[]).push([[487],{3393:function(n,s,e){n.exports=e.p+"assets/img/tomcat-x-container-engine-1.05f6a880.jpg"},4206:function(n,s,e){"use strict";e.r(s);var a=e(7),t=Object(a.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"tomcat-container容器之engine-standardengine"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#tomcat-container容器之engine-standardengine"}},[n._v("#")]),n._v(" Tomcat - Container容器之Engine：StandardEngine")]),n._v(" "),s("p",[n._v("=========================================================================================")]),n._v(" "),s("blockquote",[s("p",[n._v("上文已经知道Container的整体结构和设计，其中Engine其实就是Servlet Engine，负责处理request的顶层容器。@pdai")])]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#tomcat---container%E5%AE%B9%E5%99%A8%E4%B9%8Benginestandardengine"}},[n._v("Tomcat - Container容器之Engine：StandardEngine")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E7%90%86%E8%A7%A3%E6%80%9D%E8%B7%AF"}},[n._v("理解思路")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#engine%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1"}},[n._v("Engine接口设计")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#engine%E6%8E%A5%E5%8F%A3%E5%AE%9E%E7%8E%B0standardengine"}},[n._v("Engine接口实现：StandardEngine")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E6%8E%A5%E5%8F%A3%E4%B8%AD%E7%AE%80%E5%8D%95%E6%96%B9%E6%B3%95%E5%AE%9E%E7%8E%B0"}},[n._v("接口中简单方法实现")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#child-parent"}},[n._v("child, parent")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#lifecycle%E7%9A%84%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95"}},[n._v("Lifecycle的模板方法")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#logaccess"}},[n._v("LogAccess")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#jmx%E7%9B%B8%E5%85%B3"}},[n._v("JMX相关")])])])])])])]),n._v(" "),s("h1",{attrs:{id:"理解思路"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#理解思路"}},[n._v("#")]),n._v(" 理解思路")]),n._v(" "),s("hr"),n._v(" "),s("ul",[s("li",[s("strong",[n._v("第一：抓住StandardEngine整体类依赖结构来理解")])])]),n._v(" "),s("p",[s("img",{attrs:{src:e(3393),alt:""}})]),n._v(" "),s("ul",[s("li",[s("strong",[n._v("第二：结合server.xml中Engine配置来理解")])])]),n._v(" "),s("p",[n._v("见下文具体阐述。")]),n._v(" "),s("ul",[s("li",[s("strong",[n._v("第三：结合Engine Config官方配置文档")])])]),n._v(" "),s("p",[n._v("http://tomcat.apache.org/tomcat-9.0-doc/config/engine.html")]),n._v(" "),s("h1",{attrs:{id:"engine接口设计"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#engine接口设计"}},[n._v("#")]),n._v(" Engine接口设计")]),n._v(" "),s("hr"),n._v(" "),s("blockquote",[s("p",[n._v("这看Engine.java接口前，先要看下相关属性")])]),n._v(" "),s("ul",[s("li",[n._v("支持设置的属性列表")])]),n._v(" "),s("table",[s("thead",[s("tr",[s("th",[n._v("属性")]),n._v(" "),s("th",[n._v("描述")])])]),n._v(" "),s("tbody",[s("tr",[s("td",[n._v("backgroundProcessorDelay")]),n._v(" "),s("td",[n._v("此值表示在此引擎及其子容器（包括所有Host和Context）上调用backgroundProcess方法之间的延迟（以秒为单位）。如果子容器的延迟值不为负（则表示它们正在使用自己的处理线程），则不会调用它们。将此值设置为正值将导致产生线程。等待指定的时间后，线程将在此引擎及其所有子容器上调用backgroundProcess方法。如果未指定，则此属性的默认值为10，表示10秒的延迟。")])]),n._v(" "),s("tr",[s("td",[n._v("className")]),n._v(" "),s("td",[n._v("使用的Java类名称。此类必须实现org.apache.catalina.Engine接口。如果未指定，将使用标准值（定义如下）。")])]),n._v(" "),s("tr",[s("td",[s("strong",[n._v("defaultHost")])]),n._v(" "),s("td",[n._v("默认的主机名，它标识Host将处理针对主机名此服务器上的请求，但在此配置文件中没有配置。此名称必须与嵌套在name 其中的Host元素之一的属性匹配。")])]),n._v(" "),s("tr",[s("td",[s("strong",[n._v("jvmRoute")])]),n._v(" "),s("td",[n._v("必须在负载平衡方案中使用的标识符才能启用会话亲缘关系。标识符（在参与集群的所有Tomcat服务器之间必须是唯一的）将附加到生成的会话标识符上，因此允许前端代理始终将特定会话转发到同一Tomcat实例。注意，jvmRoute也可以使用jvmRoutesystem属性设置 。属性中的"),s("code",[n._v("jvmRoute set<Engine>")]),n._v("将覆盖任何jvmRoute系统属性。")])]),n._v(" "),s("tr",[s("td",[n._v("name")]),n._v(" "),s("td",[n._v("此引擎的逻辑名称，用于日志和错误消息。在同一台Server中使用多个Service元素时 ，必须为每个引擎分配一个唯一的名称。")])]),n._v(" "),s("tr",[s("td",[n._v("startStopThreads")]),n._v(" "),s("td",[n._v("该引擎将用来并行启动子Host元素的线程数。特殊值0将导致使用该值 Runtime.getRuntime().availableProcessors()。Runtime.getRuntime().availableProcessors() + value除非小于1，否则将使用负值， 在这种情况下将使用1个线程。如果未指定，将使用默认值1。如果使用了1个线程，那么ExecutorService将使用当前线程，而不是使用。")])])])]),n._v(" "),s("ul",[s("li",[n._v("Engine的接口设计")])]),n._v(" "),s("p",[n._v("这里你会发现，如下接口中包含上述defaultHost和jvmRoute属性设置；同时还有Service，因为Engine的上层是service。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/**\n * An <b>Engine</b> is a Container that represents the entire Catalina servlet\n * engine.  It is useful in the following types of scenarios:\n * <ul>\n * <li>You wish to use Interceptors that see every single request processed\n *     by the entire engine.\n * <li>You wish to run Catalina in with a standalone HTTP connector, but still\n *     want support for multiple virtual hosts.\n * </ul>\n * In general, you would not use an Engine when deploying Catalina connected\n * to a web server (such as Apache), because the Connector will have\n * utilized the web server's facilities to determine which Context (or\n * perhaps even which Wrapper) should be utilized to process this request.\n * <p>\n * The child containers attached to an Engine are generally implementations\n * of Host (representing a virtual host) or Context (representing individual\n * an individual servlet context), depending upon the Engine implementation.\n * <p>\n * If used, an Engine is always the top level Container in a Catalina\n * hierarchy. Therefore, the implementation's <code>setParent()</code> method\n * should throw <code>IllegalArgumentException</code>.\n *\n * @author Craig R. McClanahan\n */\npublic interface Engine extends Container {\n\n    /**\n     * @return the default host name for this Engine.\n     */\n    public String getDefaultHost();\n\n\n    /**\n     * Set the default hostname for this Engine.\n     *\n     * @param defaultHost The new default host\n     */\n    public void setDefaultHost(String defaultHost);\n\n\n    /**\n     * @return the JvmRouteId for this engine.\n     */\n    public String getJvmRoute();\n\n\n    /**\n     * Set the JvmRouteId for this engine.\n     *\n     * @param jvmRouteId the (new) JVM Route ID. Each Engine within a cluster\n     *        must have a unique JVM Route ID.\n     */\n    public void setJvmRoute(String jvmRouteId);\n\n\n    /**\n     * @return the <code>Service</code> with which we are associated (if any).\n     */\n    public Service getService();\n\n\n    /**\n     * Set the <code>Service</code> with which we are associated (if any).\n     *\n     * @param service The service that owns this Engine\n     */\n    public void setService(Service service);\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br")])]),s("ul",[s("li",[n._v("其它属性支持都包含在我们上文分析的ContainerBase中")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/**\n  * The processor delay for this component.\n  */\nprotected int backgroundProcessorDelay = -1;\n/**\n  * The number of threads available to process start and stop events for any\n  * children associated with this container.\n  */\nprivate int startStopThreads = 1;\n\n...\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])]),s("h1",{attrs:{id:"engine接口实现-standardengine"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#engine接口实现-standardengine"}},[n._v("#")]),n._v(" Engine接口实现：StandardEngine")]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"接口中简单方法实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#接口中简单方法实现"}},[n._v("#")]),n._v(" 接口中简单方法实现")]),n._v(" "),s("p",[n._v("上述接口里面的defaultHost, JvmRoute, service 很简单")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * Return the default host.\n  */\n@Override\npublic String getDefaultHost() {\n    return defaultHost;\n}\n\n\n/**\n  * Set the default host.\n  *\n  * @param host The new default host\n  */\n@Override\npublic void setDefaultHost(String host) {\n\n    String oldDefaultHost = this.defaultHost;\n    if (host == null) {\n        this.defaultHost = null;\n    } else {\n        this.defaultHost = host.toLowerCase(Locale.ENGLISH);\n    }\n    if (getState().isAvailable()) {\n        service.getMapper().setDefaultHostName(host);\n    }\n    support.firePropertyChange("defaultHost", oldDefaultHost,\n                                this.defaultHost);\n\n}\n\n\n/**\n  * Set the cluster-wide unique identifier for this Engine.\n  * This value is only useful in a load-balancing scenario.\n  * <p>\n  * This property should not be changed once it is set.\n  */\n@Override\npublic void setJvmRoute(String routeId) {\n    jvmRouteId = routeId;\n}\n\n\n/**\n  * Retrieve the cluster-wide unique identifier for this Engine.\n  * This value is only useful in a load-balancing scenario.\n  */\n@Override\npublic String getJvmRoute() {\n    return jvmRouteId;\n}\n\n/**\n  * Return the <code>Service</code> with which we are associated (if any).\n  */\n@Override\npublic Service getService() {\n    return this.service;\n}\n\n\n/**\n  * Set the <code>Service</code> with which we are associated (if any).\n  *\n  * @param service The service that owns this Engine\n  */\n@Override\npublic void setService(Service service) {\n    this.service = service;\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br")])]),s("h3",{attrs:{id:"child-parent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#child-parent"}},[n._v("#")]),n._v(" child, parent")]),n._v(" "),s("p",[s("code",[n._v("addChild")]),n._v("重载方法，限制只能添加Host作为子容器；")]),n._v(" "),s("p",[s("code",[n._v("setParent")]),n._v("直接抛出异常，因为Engine接口中已经包含了setService方法作为它的上层，而Engine的上层没有容器的概念。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * Add a child Container, only if the proposed child is an implementation\n  * of Host.\n  *\n  * @param child Child container to be added\n  */\n@Override\npublic void addChild(Container child) {\n\n    if (!(child instanceof Host))\n        throw new IllegalArgumentException\n            (sm.getString("standardEngine.notHost"));\n    super.addChild(child);\n\n}\n\n\n/**\n  * Disallow any attempt to set a parent for this Container, since an\n  * Engine is supposed to be at the top of the Container hierarchy.\n  *\n  * @param container Proposed parent Container\n  */\n@Override\npublic void setParent(Container container) {\n\n    throw new IllegalArgumentException\n        (sm.getString("standardEngine.notParent"));\n\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br")])]),s("h3",{attrs:{id:"lifecycle的模板方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#lifecycle的模板方法"}},[n._v("#")]),n._v(" Lifecycle的模板方法")]),n._v(" "),s("p",[n._v("无非就是调用上文中我们介绍ContainerBase中的方法")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@Override\nprotected void initInternal() throws LifecycleException {\n    // Ensure that a Realm is present before any attempt is made to start\n    // one. This will create the default NullRealm if necessary.\n    getRealm();\n    super.initInternal();\n}\n\n\n/**\n  * Start this component and implement the requirements\n  * of {@link org.apache.catalina.util.LifecycleBase#startInternal()}.\n  *\n  * @exception LifecycleException if this component detects a fatal error\n  *  that prevents this component from being used\n  */\n@Override\nprotected synchronized void startInternal() throws LifecycleException {\n\n    // Log our server identification information\n    if (log.isInfoEnabled()) {\n        log.info(sm.getString("standardEngine.start", ServerInfo.getServerInfo()));\n    }\n\n    // Standard container startup\n    super.startInternal();\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br")])]),s("h3",{attrs:{id:"logaccess"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#logaccess"}},[n._v("#")]),n._v(" LogAccess")]),n._v(" "),s("blockquote",[s("p",[n._v("这里需要补充下之前没有介绍的"),s("strong",[n._v("日志访问")]),n._v("，这里介绍下。")])]),n._v(" "),s("p",[n._v("运行Web服务器时，"),s("strong",[n._v("正常生成的输出文件之一是访问日志")]),n._v("，该访问日志以标准格式为服务器处理的每个请求生成一行信息。Catalina包括一个可选的Valve实现，该实现可以创建与Web服务器创建的标准格式相同的访问日志，也可以创建任意数量的自定义格式。")]),n._v(" "),s("p",[n._v("需要先看下xml配置; 您可以通过嵌套如下所示的Valve元素，要求Catalina为Engine， Host或Context处理的所有请求创建访问日志：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('<Engine name="Standalone" ...>\n  ...\n  <Valve className="org.apache.catalina.valves.AccessLogValve"\n         prefix="catalina_access_log" suffix=".txt"\n         pattern="common"/>\n  ...\n</Engine>\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("好了看下具体的实现，使用适配器模式获取AccessLog类型的Valve：")]),n._v(" "),s("p",[n._v("适配器模式看这里："),s("a",{attrs:{href:"https://pdai.tech/md/dev-spec/pattern/9_adapter.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("结构型 - 适配器(Adapter)"),s("OutboundLink")],1)]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("@Override\npublic AccessLog getAccessLog() {\n\n    if (accessLogScanComplete) {\n        return accessLog;\n    }\n\n    AccessLogAdapter adapter = null;\n    Valve valves[] = getPipeline().getValves();\n    for (Valve valve : valves) {\n        if (valve instanceof AccessLog) { // 看这里\n            if (adapter == null) {\n                adapter = new AccessLogAdapter((AccessLog) valve);\n            } else {\n                adapter.add((AccessLog) valve);\n            }\n        }\n    }\n    if (adapter != null) {\n        accessLog = adapter;\n    }\n    accessLogScanComplete = true;\n    return accessLog;\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br")])]),s("p",[n._v("AccessLog(日志记录器)主要的作用就是记录日志，这个记录的方法就是"),s("code",[n._v("logAccess()")]),n._v("方法")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/**\n  * Override the default implementation. If no access log is defined for the\n  * Engine, look for one in the Engine's default host and then the default\n  * host's ROOT context. If still none is found, return the default NoOp\n  * access log.\n  */\n@Override\npublic void logAccess(Request request, Response response, long time,\n        boolean useDefault) {\n\n    boolean logged = false;\n\n     // 如果有accessLog，则记录日志\n    if (getAccessLog() != null) {\n        accessLog.log(request, response, time);\n        logged = true;\n    }\n\n    // 没找到且使用useDefault，表示从下层容器中获取accessLog\n    if (!logged && useDefault) {\n        AccessLog newDefaultAccessLog = defaultAccessLog.get();\n        if (newDefaultAccessLog == null) {\n            // If we reached this point, this Engine can't have an AccessLog\n            // Look in the defaultHost\n            Host host = (Host) findChild(getDefaultHost()); // 如果没有默认的accessLog，则获取默认Host的accessLog\n            Context context = null;\n            if (host != null && host.getState().isAvailable()) {\n                newDefaultAccessLog = host.getAccessLog();\n\n                if (newDefaultAccessLog != null) {\n                    if (defaultAccessLog.compareAndSet(null,\n                            newDefaultAccessLog)) {\n                        AccessLogListener l = new AccessLogListener(this,\n                                host, null);\n                        l.install(); // 注册AccessLog监听器至当前Engine\n                    }\n                } else {\n                    // Try the ROOT context of default host\n                    context = (Context) host.findChild(\"\"); // 如果仍然没有找到，则获取默认host的ROOT Context的accessLog\n                    if (context != null &&\n                            context.getState().isAvailable()) {\n                        newDefaultAccessLog = context.getAccessLog();\n                        if (newDefaultAccessLog != null) {\n                            if (defaultAccessLog.compareAndSet(null,\n                                    newDefaultAccessLog)) {\n                                AccessLogListener l = new AccessLogListener(\n                                        this, null, context);\n                                l.install();\n                            }\n                        }\n                    }\n                }\n            }\n\n            if (newDefaultAccessLog == null) { \n                newDefaultAccessLog = new NoopAccessLog(); // 这个其实是一个空模式，以便采用统一方式调用（不用判空了）\n                if (defaultAccessLog.compareAndSet(null,\n                        newDefaultAccessLog)) {\n                    AccessLogListener l = new AccessLogListener(this, host,\n                            context);\n                    l.install();\n                }\n            }\n        }\n\n        // 最后记录日志，（上面最后有空模式实现，所以可以直接调用，不用判空）\n        newDefaultAccessLog.log(request, response, time);\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br")])]),s("p",[n._v("其中涉及的相关内部类如下：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("protected static final class NoopAccessLog implements AccessLog {\n\n    @Override\n    public void log(Request request, Response response, long time) {\n        // NOOP\n    }\n\n    @Override\n    public void setRequestAttributesEnabled(\n            boolean requestAttributesEnabled) {\n        // NOOP\n\n    }\n\n    @Override\n    public boolean getRequestAttributesEnabled() {\n        // NOOP\n        return false;\n    }\n}\n\nprotected static final class AccessLogListener\n        implements PropertyChangeListener, LifecycleListener,\n        ContainerListener {\n\n    private final StandardEngine engine;\n    private final Host host;\n    private final Context context;\n    private volatile boolean disabled = false;\n\n    public AccessLogListener(StandardEngine engine, Host host,\n            Context context) {\n        this.engine = engine;\n        this.host = host;\n        this.context = context;\n    }\n\n    public void install() {\n        engine.addPropertyChangeListener(this);\n        if (host != null) { // 同时注册至host和context\n            host.addContainerListener(this);\n            host.addLifecycleListener(this);\n        }\n        if (context != null) {\n            context.addLifecycleListener(this);\n        }\n    }\n\n    private void uninstall() {\n        disabled = true;\n        if (context != null) {\n            context.removeLifecycleListener(this);\n        }\n        if (host != null) {\n            host.removeLifecycleListener(this);\n            host.removeContainerListener(this);\n        }\n        engine.removePropertyChangeListener(this);\n    }\n\n    @Override\n    public void lifecycleEvent(LifecycleEvent event) {\n        if (disabled) return;\n\n        String type = event.getType();\n        if (Lifecycle.AFTER_START_EVENT.equals(type) ||\n                Lifecycle.BEFORE_STOP_EVENT.equals(type) ||\n                Lifecycle.BEFORE_DESTROY_EVENT.equals(type)) {\n            // Container is being started/stopped/removed\n            // Force re-calculation and disable listener since it won't\n            // be re-used\n            engine.defaultAccessLog.set(null);\n            uninstall();\n        }\n    }\n\n    @Override\n    public void propertyChange(PropertyChangeEvent evt) {\n        if (disabled) return;\n        if (\"defaultHost\".equals(evt.getPropertyName())) {\n            // Force re-calculation and disable listener since it won't\n            // be re-used\n            engine.defaultAccessLog.set(null);\n            uninstall();\n        }\n    }\n\n    @Override\n    public void containerEvent(ContainerEvent event) {\n        // Only useful for hosts\n        if (disabled) return;\n        if (Container.ADD_CHILD_EVENT.equals(event.getType())) {\n            Context context = (Context) event.getData();\n            if (context.getPath().isEmpty()) {\n                // Force re-calculation and disable listener since it won't\n                // be re-used\n                engine.defaultAccessLog.set(null);\n                uninstall();\n            }\n        }\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br")])]),s("h3",{attrs:{id:"jmx相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jmx相关"}},[n._v("#")]),n._v(" JMX相关")]),n._v(" "),s("p",[n._v("之前已经有过相关介绍，这里不再介绍相关方法，只列出相关方法：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('@Override\nprotected String getObjectNameKeyProperties() {\n    return "type=Engine";\n}\n\n\n@Override\nprotected String getDomainInternal() {\n    return getName();\n}\n\n```)')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);