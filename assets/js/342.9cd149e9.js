(window.webpackJsonp=window.webpackJsonp||[]).push([[342],{1027:function(s,a){s.exports="data:image/png;base64,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"},1028:function(s,a,n){s.exports=n.p+"assets/img/springboot-interface-param-2.bc69feeb.png"},3663:function(s,a,n){"use strict";n.r(a);var e=n(7),i=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"springboot接口-如何对参数进行校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot接口-如何对参数进行校验"}},[s._v("#")]),s._v(" SpringBoot接口 - 如何对参数进行校验")]),s._v(" "),a("blockquote",[a("p",[s._v("在以SpringBoot开发Restful接口时, 对于接口的查询参数后台也是要进行校验的，同时还需要给出校验的返回信息放到上文我们统一封装的结构中。那么如何优雅的进行参数的统一校验呢？ @pdai")])]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#springboot%E6%8E%A5%E5%8F%A3---%E5%A6%82%E4%BD%95%E5%AF%B9%E5%8F%82%E6%95%B0%E8%BF%9B%E8%A1%8C%E6%A0%A1%E9%AA%8C"}},[s._v("SpringBoot接口 - 如何对参数进行校验")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E4%B8%8D%E4%BC%98%E9%9B%85%E7%9A%84%E5%8F%82%E6%95%B0%E6%A0%A1%E9%AA%8C"}},[s._v("什么是不优雅的参数校验")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E5%AE%9E%E7%8E%B0%E6%A1%88%E4%BE%8B"}},[s._v("实现案例")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#pom"}},[s._v("POM")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E8%AF%B7%E6%B1%82%E5%8F%82%E6%95%B0%E5%B0%81%E8%A3%85"}},[s._v("请求参数封装")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#controller%E4%B8%AD%E8%8E%B7%E5%8F%96%E5%8F%82%E6%95%B0%E7%BB%91%E5%AE%9A%E7%BB%93%E6%9E%9C"}},[s._v("Controller中获取参数绑定结果")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E6%A0%A1%E9%AA%8C%E7%BB%93%E6%9E%9C"}},[s._v("校验结果")])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3"}},[s._v("进一步理解")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#validation%E5%88%86%E7%BB%84%E6%A0%A1%E9%AA%8C"}},[s._v("Validation分组校验？")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#validated%E5%92%8Cvalid%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"}},[s._v("@Validated和@Valid什么区别？")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9C%89%E5%93%AA%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%9A%84%E6%A0%A1%E9%AA%8C"}},[s._v("有哪些常用的校验？")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E8%87%AA%E5%AE%9A%E4%B9%89validation"}},[s._v("自定义validation？")])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E7%A4%BA%E4%BE%8B%E6%BA%90%E7%A0%81"}},[s._v("示例源码")])])])])]),s._v(" "),a("h1",{attrs:{id:"什么是不优雅的参数校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么是不优雅的参数校验"}},[s._v("#")]),s._v(" 什么是不优雅的参数校验")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("后端对前端传过来的参数也是需要进行校验的，如果在controller中直接校验需要用大量的if else做判断")]),s._v(" "),a("p",[s._v("以添加用户的接口为例，需要对前端传过来的参数进行校验， 如下的校验就是不优雅的：")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    @PostMapping("add")\n    public ResponseEntity<String> add(User user) {\n        if(user.getName()==null) {\n            return ResponseResult.fail("user name should not be empty");\n        } else if(user.getName().length()<5 || user.getName().length()>50){\n            return ResponseResult.fail("user name length should between 5-50");\n        }\n        if(user.getAge()< 1 || user.getAge()> 150) {\n            return ResponseResult.fail("invalid age");\n        }\n        // ...\n        return ResponseEntity.ok("success");\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br")])]),a("p",[s._v("针对这个普遍的问题，Java开发者在Java API规范 (JSR303) 定义了Bean校验的标准"),a("strong",[s._v("validation-api")]),s._v("，但没有提供实现。")]),s._v(" "),a("p",[a("strong",[s._v("hibernate validation是对这个规范的实现")]),s._v("，并增加了校验注解如@Email、@Length等。")]),s._v(" "),a("p",[a("strong",[s._v("Spring Validation是对hibernate validation的二次封装")]),s._v("，用于支持spring mvc参数自动校验。")]),s._v(" "),a("p",[s._v("接下来，我们以springboot项目为例，介绍Spring Validation的使用。")]),s._v(" "),a("h1",{attrs:{id:"实现案例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现案例"}},[s._v("#")]),s._v(" 实现案例")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[s._v("本例子采用 spring validation 对参数绑定进行校验，主要给你提供参数校验的思路。针对接口统一的错误信息（比如绑定参数检查的错误）封装请看"),a("a",{attrs:{href:"https://pdai.tech/md/spring/springboot/springboot-x-interface-exception.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SpringBoot接口 - 如何统一异常处理"),a("OutboundLink")],1),s._v("。")])]),s._v(" "),a("h3",{attrs:{id:"pom"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#pom"}},[s._v("#")]),s._v(" POM")]),s._v(" "),a("p",[s._v("添加pom依赖")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\x3c!-- https://mvnrepository.com/artifact/org.springframework.boot/spring-boot-starter-validation --\x3e\n<dependency>\n    <groupId>org.springframework.boot</groupId>\n    <artifactId>spring-boot-starter-validation</artifactId>\n</dependency>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h3",{attrs:{id:"请求参数封装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求参数封装"}},[s._v("#")]),s._v(" 请求参数封装")]),s._v(" "),a("p",[s._v("单一职责，所以将查询用户的参数封装到UserParam中， 而不是User（数据库实体）本身。")]),s._v(" "),a("p",[s._v("对每个参数字段添加validation注解约束和message。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('/**\n * user.\n *\n * @author pdai\n */\n@Data\n@Builder\n@ApiModel(value = "User", subTypes = {AddressParam.class})\npublic class UserParam implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @NotEmpty(message = "could not be empty")\n    private String userId;\n\n    @NotEmpty(message = "could not be empty")\n    @Email(message = "invalid email")\n    private String email;\n\n    @NotEmpty(message = "could not be empty")\n    @Pattern(regexp = "^(\\\\d{6})(\\\\d{4})(\\\\d{2})(\\\\d{2})(\\\\d{3})([0-9]|X)$", message = "invalid ID")\n    private String cardNo;\n\n    @NotEmpty(message = "could not be empty")\n    @Length(min = 1, max = 10, message = "nick name should be 1-10")\n    private String nickName;\n\n    @NotEmpty(message = "could not be empty")\n    @Range(min = 0, max = 1, message = "sex should be 0-1")\n    private int sex;\n\n    @Max(value = 100, message = "Please input valid age")\n    private int age;\n\n    @Valid\n    private AddressParam address;\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br")])]),a("h3",{attrs:{id:"controller中获取参数绑定结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#controller中获取参数绑定结果"}},[s._v("#")]),s._v(" Controller中获取参数绑定结果")]),s._v(" "),a("p",[s._v("使用@Valid或者@Validated注解，参数校验的值放在BindingResult中")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('/**\n * @author pdai\n */\n@Slf4j\n@Api(value = "User Interfaces", tags = "User Interfaces")\n@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    /**\n     * http://localhost:8080/user/add .\n     *\n     * @param userParam user param\n     * @return user\n     */\n    @ApiOperation("Add User")\n    @ApiImplicitParam(name = "userParam", type = "body", dataTypeClass = UserParam.class, required = true)\n    @PostMapping("add")\n    public ResponseEntity<String> add(@Valid @RequestBody UserParam userParam, BindingResult bindingResult) {\n        if (bindingResult.hasErrors()) {\n            List<ObjectError> errors = bindingResult.getAllErrors();\n            errors.forEach(p -> {\n                FieldError fieldError = (FieldError) p;\n                log.error("Invalid Parameter : object - {},field - {},errorMessage - {}", fieldError.getObjectName(), fieldError.getField(), fieldError.getDefaultMessage());\n            });\n            return ResponseEntity.badRequest().body("invalid parameter");\n        }\n        return ResponseEntity.ok("success");\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("h3",{attrs:{id:"校验结果"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#校验结果"}},[s._v("#")]),s._v(" 校验结果")]),s._v(" "),a("p",[s._v("POST访问添加User的请求")]),s._v(" "),a("p",[a("img",{attrs:{src:n(1027),alt:""}})]),s._v(" "),a("p",[s._v("后台输出参数绑定错误信息：（包含哪个对象，哪个字段，什么样的错误描述）")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("2021-09-16 10:37:05.173 ERROR 21216 --- [nio-8080-exec-8] t.p.s.v.controller.UserController        : Invalid Parameter : object - userParam,field - nickName,errorMessage - could not be empty\n2021-09-16 10:37:05.176 ERROR 21216 --- [nio-8080-exec-8] t.p.s.v.controller.UserController        : Invalid Parameter : object - userParam,field - email,errorMessage - could not be empty\n2021-09-16 10:37:05.176 ERROR 21216 --- [nio-8080-exec-8] t.p.s.v.controller.UserController        : Invalid Parameter : object - userParam,field - cardNo,errorMessage - could not be empty\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("p",[s._v("（本例只是springboot-validation的简单用例，针对接口统一的错误信息封装请看"),a("a",{attrs:{href:"https://pdai.tech/md/spring/springboot/springboot-x-interface-exception.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("SpringBoot接口 - 如何统一异常处理"),a("OutboundLink")],1)]),s._v(" "),a("h1",{attrs:{id:"进一步理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进一步理解"}},[s._v("#")]),s._v(" 进一步理解")]),s._v(" "),a("hr"),s._v(" "),a("blockquote",[a("p",[s._v("我们再通过一些问题来帮助你更深入理解validation校验。@pdai")])]),s._v(" "),a("h3",{attrs:{id:"validation分组校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#validation分组校验"}},[s._v("#")]),s._v(" Validation分组校验？")]),s._v(" "),a("blockquote",[a("p",[s._v("上面的例子中，其实存在一个问题，UserParam既可以作为addUser的参数（id为空），又可以作为updateUser的参数（id不能为空），这时候怎么办呢？分组校验登场。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@Data\n@Builder\n@ApiModel(value = "User", subTypes = {AddressParam.class})\npublic class UserParam implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @NotEmpty(message = "could not be empty") // 这里定为空，对于addUser时是不合适的\n    private String userId;\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("p",[s._v("这时候可以使用Validation分组")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("先定义分组")]),s._v("（无需实现接口）")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("public interface AddValidationGroup {\n}\npublic interface EditValidationGroup {\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("在UserParam的userId字段添加分组")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@Data\n@Builder\n@ApiModel(value = "User", subTypes = {AddressParam.class})\npublic class UserParam implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @NotEmpty(message = "{user.msg.userId.notEmpty}", groups = {EditValidationGroup.class}) // 这里\n    private String userId;\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("controller中的接口使用校验时使用分组")])])]),s._v(" "),a("p",[s._v("PS: 需要使用@Validated注解")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@Slf4j\n@Api(value = "User Interfaces", tags = "User Interfaces")\n@RestController\n@RequestMapping("/user")\npublic class UserController {\n\n    /**\n     * http://localhost:8080/user/add .\n     *\n     * @param userParam user param\n     * @return user\n     */\n    @ApiOperation("Add User")\n    @ApiImplicitParam(name = "userParam", type = "body", dataTypeClass = UserParam.class, required = true)\n    @PostMapping("add")\n    public ResponseEntity<UserParam> add(@Validated(AddValidationGroup.class) @RequestBody UserParam userParam) {\n        return ResponseEntity.ok(userParam);\n    }\n\n    /**\n     * http://localhost:8080/user/add .\n     *\n     * @param userParam user param\n     * @return user\n     */\n    @ApiOperation("Edit User")\n    @ApiImplicitParam(name = "userParam", type = "body", dataTypeClass = UserParam.class, required = true)\n    @PostMapping("edit")\n    public ResponseEntity<UserParam> edit(@Validated(EditValidationGroup.class) @RequestBody UserParam userParam) {\n        return ResponseEntity.ok(userParam);\n    }\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("测试")])])]),s._v(" "),a("p",[a("img",{attrs:{src:n(1028),alt:""}})]),s._v(" "),a("h3",{attrs:{id:"validated和-valid什么区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#validated和-valid什么区别"}},[s._v("#")]),s._v(" @Validated和@Valid什么区别？")]),s._v(" "),a("blockquote",[a("p",[s._v("细心的你会发现，上个例子中用的是@Validated, 而不是@Valid，那它们之间的区别是什么呢？")])]),s._v(" "),a("p",[s._v("在检验Controller的入参是否符合规范时，使用@Validated或者@Valid在基本验证功能上没有太多区别。但是在分组、注解地方、嵌套验证等功能上两个有所不同：")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("分组")])])]),s._v(" "),a("p",[s._v("@Validated：提供了一个分组功能，可以在入参验证时，根据不同的分组采用不同的验证机制，这个网上也有资料，不详述。@Valid：作为标准JSR-303规范，还没有吸收分组的功能。")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("注解地方")])])]),s._v(" "),a("p",[s._v("@Validated：可以用在类型、方法和方法参数上。但是不能用在成员属性（字段）上")]),s._v(" "),a("p",[s._v("@Valid：可以用在方法、构造函数、方法参数和成员属性（字段）上")]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("嵌套类型")])])]),s._v(" "),a("p",[s._v("比如本文例子中的address是user的一个嵌套属性, 只能用@Valid")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@Data\n@Builder\n@ApiModel(value = "User", subTypes = {AddressParam.class})\npublic class UserParam implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @Valid // 这里只能用@Valid\n    private AddressParam address;\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h3",{attrs:{id:"有哪些常用的校验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#有哪些常用的校验"}},[s._v("#")]),s._v(" 有哪些常用的校验？")]),s._v(" "),a("blockquote",[a("p",[s._v("从以下三类理解。")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("JSR303/JSR-349")]),s._v(": JSR303是一项标准,只提供规范不提供实现，规定一些校验规范即校验注解，如@Null，@NotNull，@Pattern，位于javax.validation.constraints包下。"),a("strong",[s._v("JSR-349是其的升级版本，添加了一些新特性")]),s._v("。")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@AssertFalse            被注释的元素只能为false\n@AssertTrue             被注释的元素只能为true\n@DecimalMax             被注释的元素必须小于或等于{value}\n@DecimalMin             被注释的元素必须大于或等于{value}\n@Digits                 被注释的元素数字的值超出了允许范围(只允许在{integer}位整数和{fraction}位小数范围内)\n@Email                  被注释的元素不是一个合法的电子邮件地址\n@Future                 被注释的元素需要是一个将来的时间\n@FutureOrPresent        被注释的元素需要是一个将来或现在的时间\n@Max                    被注释的元素最大不能超过{value}\n@Min                    被注释的元素最小不能小于{value}\n@Negative               被注释的元素必须是负数\n@NegativeOrZero         被注释的元素必须是负数或零\n@NotBlank               被注释的元素不能为空\n@NotEmpty               被注释的元素不能为空\n@NotNull                被注释的元素不能为null\n@Null                   被注释的元素必须为null\n@Past                   被注释的元素需要是一个过去的时间\n@PastOrPresent          被注释的元素需要是一个过去或现在的时间\n@Pattern                被注释的元素需要匹配正则表达式"{regexp}"\n@Positive               被注释的元素必须是正数\n@PositiveOrZero         被注释的元素必须是正数或零\n@Size                   被注释的元素个数必须在{min}和{max}之间\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("hibernate validation")]),s._v("：hibernate validation是对这个规范的实现，并增加了一些其他校验注解，如@Email，@Length，@Range等等")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("@CreditCardNumber       被注释的元素不合法的信用卡号码\n@Currency               被注释的元素不合法的货币 (必须是{value}其中之一)\n@EAN                    被注释的元素不合法的{type}条形码\n@Email                  被注释的元素不是一个合法的电子邮件地址  (已过期)\n@Length                 被注释的元素长度需要在{min}和{max}之间\n@CodePointLength        被注释的元素长度需要在{min}和{max}之间\n@LuhnCheck              被注释的元素${validatedValue}的校验码不合法, Luhn模10校验和不匹配\n@Mod10Check             被注释的元素${validatedValue}的校验码不合法, 模10校验和不匹配\n@Mod11Check             被注释的元素${validatedValue}的校验码不合法, 模11校验和不匹配\n@ModCheck               被注释的元素${validatedValue}的校验码不合法, ${modType}校验和不匹配  (已过期)\n@NotBlank               被注释的元素不能为空  (已过期)\n@NotEmpty               被注释的元素不能为空  (已过期)\n@ParametersScriptAssert 被注释的元素执行脚本表达式\"{script}\"没有返回期望结果\n@Range                  被注释的元素需要在{min}和{max}之间\n@SafeHtml               被注释的元素可能有不安全的HTML内容\n@ScriptAssert           被注释的元素执行脚本表达式\"{script}\"没有返回期望结果\n@URL                    被注释的元素需要是一个合法的URL\n@DurationMax            被注释的元素必须小于${inclusive == true ? '或等于' : ''}${days == 0 ? '' : days += '天'}${hours == 0 ? '' : hours += '小时'}${minutes == 0 ? '' : minutes += '分钟'}${seconds == 0 ? '' : seconds += '秒'}${millis == 0 ? '' : millis += '毫秒'}${nanos == 0 ? '' : nanos += '纳秒'}\n@DurationMin            被注释的元素必须大于${inclusive == true ? '或等于' : ''}${days == 0 ? '' : days += '天'}${hours == 0 ? '' : hours += '小时'}${minutes == 0 ? '' : minutes += '分钟'}${seconds == 0 ? '' : seconds += '秒'}${millis == 0 ? '' : millis += '毫秒'}${nanos == 0 ? '' : nanos += '纳秒'}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("spring validation")]),s._v("：spring validation对hibernate validation进行了二次封装，在springmvc模块中添加了自动校验，并将校验信息封装进了特定的类中")])]),s._v(" "),a("h3",{attrs:{id:"自定义validation"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义validation"}},[s._v("#")]),s._v(" 自定义validation？")]),s._v(" "),a("blockquote",[a("p",[s._v("如果上面的注解不能满足我们检验参数的要求，我们能不能自定义校验规则呢？ 可以。")])]),s._v(" "),a("ul",[a("li",[a("strong",[s._v("定义注解")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('package tech.pdai.springboot.validation.group.validation.custom;\n\nimport javax.validation.Constraint;\nimport javax.validation.Payload;\nimport java.lang.annotation.Documented;\nimport java.lang.annotation.Retention;\nimport java.lang.annotation.Target;\n\nimport static java.lang.annotation.ElementType.*;\nimport static java.lang.annotation.RetentionPolicy.RUNTIME;\n\n@Target({ METHOD, FIELD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER, TYPE_USE })\n@Retention(RUNTIME)\n@Documented\n@Constraint(validatedBy = {TelephoneNumberValidator.class}) // 指定校验器\npublic @interface TelephoneNumber {\n    String message() default "Invalid telephone number";\n    Class<?>[] groups() default { };\n    Class<? extends Payload>[] payload() default { };\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("定义校验器")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('public class TelephoneNumberValidator implements ConstraintValidator<TelephoneNumber, String> {\n    private static final String REGEX_TEL = "0\\\\d{2,3}[-]?\\\\d{7,8}|0\\\\d{2,3}\\\\s?\\\\d{7,8}|13[0-9]\\\\d{8}|15[1089]\\\\d{8}";\n\n    @Override\n    public boolean isValid(String s, ConstraintValidatorContext constraintValidatorContext) {\n        try {\n            return Pattern.matches(REGEX_TEL, s);\n        } catch (Exception e) {\n            return false;\n        }\n    }\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("ul",[a("li",[a("strong",[s._v("使用")])])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('@Data\n@Builder\n@ApiModel(value = "User", subTypes = {AddressParam.class})\npublic class UserParam implements Serializable {\n\n    private static final long serialVersionUID = 1L;\n\n    @NotEmpty(message = "{user.msg.userId.notEmpty}", groups = {EditValidationGroup.class})\n    private String userId;\n\n    @TelephoneNumber(message = "invalid telephone number") // 这里\n    private String telephone;\n\n}\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h1",{attrs:{id:"示例源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例源码"}},[s._v("#")]),s._v(" 示例源码")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("https://github.com/realpdai/tech-pdai-spring-demos")])])}),[],!1,null,null,null);a.default=i.exports}}]);