(window.webpackJsonp=window.webpackJsonp||[]).push([[344],{1063:function(n,s,a){n.exports=a.p+"assets/img/springboot-engine-1.8757cf58.png"},1064:function(n,s,a){n.exports=a.p+"assets/img/springboot-mybatisplus-gen-1.5042313e.png"},3681:function(n,s,a){"use strict";a.r(s);var e=a(7),t=Object(e.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"springboot集成mysql-mybatis-plus代码自动生成"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot集成mysql-mybatis-plus代码自动生成"}},[n._v("#")]),n._v(" SpringBoot集成MySQL - MyBatis-Plus代码自动生成")]),n._v(" "),s("p",[n._v("=================================================================================")]),n._v(" "),s("blockquote",[s("p",[n._v("本文主要介绍 MyBatis-Plus代码自动生成，以及产生此类代码生成工具的背景和此类工具的基本实现原理。@pdai")])]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#springboot%E9%9B%86%E6%88%90mysql---mybatis-plus%E4%BB%A3%E7%A0%81%E8%87%AA%E5%8A%A8%E7%94%9F%E6%88%90"}},[n._v("SpringBoot集成MySQL - MyBatis-Plus代码自动生成")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87"}},[n._v("知识准备")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#mybatis-plus%E7%9B%B8%E5%85%B3"}},[n._v("MyBatis-Plus相关")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BC%9A%E4%BA%A7%E7%94%9F%E6%AD%A4%E7%B1%BB%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E5%B7%A5%E5%85%B7"}},[n._v("为什么会产生此类代码生成工具？")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E6%A8%A1%E6%9D%BF%E5%BC%95%E6%93%8E"}},[n._v("什么是模板引擎？")])])])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"}},[n._v("简单示例")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%87%86%E5%A4%87db"}},[n._v("准备DB")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E6%B7%BB%E5%8A%A0pom%E4%BE%9D%E8%B5%96"}},[n._v("添加POM依赖")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E9%85%8D%E7%BD%AE"}},[n._v("代码生成配置")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81"}},[n._v("生成代码")])])])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3"}},[n._v("进一步理解")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E7%9A%84%E5%9F%BA%E6%9C%AC%E5%8E%9F%E7%90%86"}},[n._v("代码生成的基本原理")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E5%A6%82%E4%BD%95%E7%9C%8Bmybatis-plus%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E7%9A%84%E5%8A%9F%E8%83%BD"}},[n._v("如何看MyBatis-Plus生成代码的功能？")])])])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E7%A4%BA%E4%BE%8B%E6%BA%90%E7%A0%81"}},[n._v("示例源码")])])])])]),n._v(" "),s("h1",{attrs:{id:"知识准备"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#知识准备"}},[n._v("#")]),n._v(" 知识准备")]),n._v(" "),s("hr"),n._v(" "),s("blockquote",[s("p",[n._v("需要了解MyBatis和MyBatis-Plus基础，并了解产生此类代码生成工具的背景和基本原理。")])]),n._v(" "),s("h3",{attrs:{id:"mybatis-plus相关"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mybatis-plus相关"}},[n._v("#")]),n._v(" MyBatis-Plus相关")]),n._v(" "),s("p",[s("a",{attrs:{href:"https://pdai.tech/md/spring/springboot/springboot-x-mysql-mybatis-plus.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("SpringBoot集成MySQL - MyBatis-Plus方式"),s("OutboundLink")],1)]),n._v(" "),s("h3",{attrs:{id:"为什么会产生此类代码生成工具"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么会产生此类代码生成工具"}},[n._v("#")]),n._v(" 为什么会产生此类代码生成工具？")]),n._v(" "),s("p",[n._v("由于CRUD的工作占了普通开发很多工作，而这些工作是重复的，所以出现了此类的代码生成工具。这些工具通过模板引擎来生成代码，常见于三方集成工具，IDE插件等等。")]),n._v(" "),s("h3",{attrs:{id:"什么是模板引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是模板引擎"}},[n._v("#")]),n._v(" 什么是模板引擎？")]),n._v(" "),s("p",[n._v("模板引擎可以在代码生成过程中减少大量机械重复工作，大大提高开发效率，良好的设计使得代码重用，后期维护都降低成本。一个好的模板引擎的使用要考虑的方面无外乎：功能是否强大，使用是否简单，整合性、扩展性与灵活性，性能。")]),n._v(" "),s("p",[n._v("比如：")]),n._v(" "),s("ul",[s("li",[n._v("Velocity")]),n._v(" "),s("li",[n._v("FreeMarker")]),n._v(" "),s("li",[n._v("Thymeleaf")]),n._v(" "),s("li",[n._v("...")])]),n._v(" "),s("p",[s("img",{attrs:{src:a(1063),alt:""}})]),n._v(" "),s("h1",{attrs:{id:"简单示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#简单示例"}},[n._v("#")]),n._v(" 简单示例")]),n._v(" "),s("hr"),n._v(" "),s("blockquote",[s("p",[n._v("这里展示通过MyBatis-Plus生成代码实现的")])]),n._v(" "),s("h3",{attrs:{id:"准备db"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备db"}},[n._v("#")]),n._v(" 准备DB")]),n._v(" "),s("p",[n._v("创建MySQL的schema test_db, 导入SQL 文件如下")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("-- MySQL dump 10.13  Distrib 5.7.12, for Win64 (x86_64)\n--\n-- Host: localhost    Database: test_db\n-- ------------------------------------------------------\n-- Server version\t5.7.17-log\n\n/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;\n/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;\n/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;\n/*!40101 SET NAMES utf8 */;\n/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;\n/*!40103 SET TIME_ZONE='+00:00' */;\n/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;\n/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0 */;\n/*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;\n/*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */;\n\n--\n-- Table structure for table `tb_role`\n--\n\nDROP TABLE IF EXISTS `tb_role`;\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\n/*!40101 SET character_set_client = utf8 */;\nCREATE TABLE `tb_role` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `name` varchar(255) NOT NULL,\n  `role_key` varchar(255) NOT NULL,\n  `description` varchar(255) DEFAULT NULL,\n  `create_time` datetime DEFAULT NULL,\n  `update_time` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n/*!40101 SET character_set_client = @saved_cs_client */;\n\n--\n-- Dumping data for table `tb_role`\n--\n\nLOCK TABLES `tb_role` WRITE;\n/*!40000 ALTER TABLE `tb_role` DISABLE KEYS */;\nINSERT INTO `tb_role` VALUES (1,'admin','admin','admin','2021-09-08 17:09:15','2021-09-08 17:09:15');\n/*!40000 ALTER TABLE `tb_role` ENABLE KEYS */;\nUNLOCK TABLES;\n\n--\n-- Table structure for table `tb_user`\n--\n\nDROP TABLE IF EXISTS `tb_user`;\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\n/*!40101 SET character_set_client = utf8 */;\nCREATE TABLE `tb_user` (\n  `id` int(11) NOT NULL AUTO_INCREMENT,\n  `user_name` varchar(45) NOT NULL,\n  `password` varchar(45) NOT NULL,\n  `email` varchar(45) DEFAULT NULL,\n  `phone_number` int(11) DEFAULT NULL,\n  `description` varchar(255) DEFAULT NULL,\n  `create_time` datetime DEFAULT NULL,\n  `update_time` datetime DEFAULT NULL,\n  PRIMARY KEY (`id`)\n) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8;\n/*!40101 SET character_set_client = @saved_cs_client */;\n\n--\n-- Dumping data for table `tb_user`\n--\n\nLOCK TABLES `tb_user` WRITE;\n/*!40000 ALTER TABLE `tb_user` DISABLE KEYS */;\nINSERT INTO `tb_user` VALUES (1,'pdai','dfasdf','suzhou.daipeng@gmail.com',1212121213,'afsdfsaf','2021-09-08 17:09:15','2021-09-08 17:09:15');\n/*!40000 ALTER TABLE `tb_user` ENABLE KEYS */;\nUNLOCK TABLES;\n\n--\n-- Table structure for table `tb_user_role`\n--\n\nDROP TABLE IF EXISTS `tb_user_role`;\n/*!40101 SET @saved_cs_client     = @@character_set_client */;\n/*!40101 SET character_set_client = utf8 */;\nCREATE TABLE `tb_user_role` (\n  `user_id` int(11) NOT NULL,\n  `role_id` int(11) NOT NULL\n) ENGINE=InnoDB DEFAULT CHARSET=utf8;\n/*!40101 SET character_set_client = @saved_cs_client */;\n\n--\n-- Dumping data for table `tb_user_role`\n--\n\nLOCK TABLES `tb_user_role` WRITE;\n/*!40000 ALTER TABLE `tb_user_role` DISABLE KEYS */;\nINSERT INTO `tb_user_role` VALUES (1,1);\n/*!40000 ALTER TABLE `tb_user_role` ENABLE KEYS */;\nUNLOCK TABLES;\n/*!40103 SET TIME_ZONE=@OLD_TIME_ZONE */;\n\n/*!40101 SET SQL_MODE=@OLD_SQL_MODE */;\n/*!40014 SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS */;\n/*!40014 SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS */;\n/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;\n/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;\n/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;\n/*!40111 SET SQL_NOTES=@OLD_SQL_NOTES */;\n\n-- Dump completed on 2021-09-08 17:12:11\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br"),s("span",{staticClass:"line-number"},[n._v("103")]),s("br"),s("span",{staticClass:"line-number"},[n._v("104")]),s("br"),s("span",{staticClass:"line-number"},[n._v("105")]),s("br"),s("span",{staticClass:"line-number"},[n._v("106")]),s("br"),s("span",{staticClass:"line-number"},[n._v("107")]),s("br"),s("span",{staticClass:"line-number"},[n._v("108")]),s("br")])]),s("h3",{attrs:{id:"添加pom依赖"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加pom依赖"}},[n._v("#")]),n._v(" 添加POM依赖")]),n._v(" "),s("p",[n._v("包括mybatis-plus-generator和默认的模板引擎velocity依赖的velocity-engine-core。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-boot-starter</artifactId>\n    <version>3.5.1</version>\n</dependency>\n<dependency>\n    <groupId>com.baomidou</groupId>\n    <artifactId>mybatis-plus-generator</artifactId>\n    <version>3.5.2</version>\n</dependency>\n<dependency>\n    <groupId>org.apache.velocity</groupId>\n    <artifactId>velocity-engine-core</artifactId>\n    <version>2.0</version>\n</dependency>\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br")])]),s("h3",{attrs:{id:"代码生成配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码生成配置"}},[n._v("#")]),n._v(" 代码生成配置")]),n._v(" "),s("blockquote",[s("p",[n._v("mybatis-plus-generator 3.5.1 及其以上版本，对历史版本不兼容！3.5.1 以下的请参考"),s("a",{attrs:{href:"https://baomidou.com/pages/d357af/",target:"_blank",rel:"noopener noreferrer"}},[n._v("这里 在新窗口打开"),s("OutboundLink")],1)])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('import com.baomidou.mybatisplus.generator.FastAutoGenerator;\n\n/**\n * This class is for xxxx.\n *\n * @author pdai\n */\npublic class TestGenCode {\n\n    public static void main(String[] args) {\n        FastAutoGenerator.create("jdbc:mysql://localhost:3306/test_db?useSSL=false&autoReconnect=true&characterEncoding=utf8", "test", "bfXa4Pt2lUUScy8jakXf")\n                .globalConfig(builder ->\n                        builder.author("pdai") // 设置作者\n                                .enableSwagger() // 开启 swagger 模式\n                )\n                .packageConfig(builder ->\n                        builder.parent("tech.pdai.springboot.mysql8.mybatisplus.anno") // 设置父包名\n                                .moduleName("gencode") // 设置父包模块名\n                )\n                .strategyConfig(builder ->\n                        builder.addInclude("tb_user", "tb_role", "tb_user_role")\n                )\n                .execute();\n    }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br")])]),s("h3",{attrs:{id:"生成代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生成代码"}},[n._v("#")]),n._v(" 生成代码")]),n._v(" "),s("p",[s("img",{attrs:{src:a(1064),alt:""}})]),n._v(" "),s("h1",{attrs:{id:"进一步理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进一步理解"}},[n._v("#")]),n._v(" 进一步理解")]),n._v(" "),s("hr"),n._v(" "),s("blockquote",[s("p",[n._v("主要了解MyBatis-Plus生成代码的原理。")])]),n._v(" "),s("h3",{attrs:{id:"代码生成的基本原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#代码生成的基本原理"}},[n._v("#")]),n._v(" 代码生成的基本原理")]),n._v(" "),s("blockquote",[s("p",[n._v("其实代码生成是非常简单的，有了模板引擎的介绍，我们再看下MyBatis-Plus的代码生成工具是如何生成代码的。")])]),n._v(" "),s("p",[n._v("配置的装载, FastAutoGenerator本质上就是通过builder注入各种配置，并将它交给代码生成主类：AutoGenerator")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public void execute() {\n    new AutoGenerator(this.dataSourceConfigBuilder.build())\n        // 全局配置\n        .global(this.globalConfigBuilder.build())\n        // 包配置\n        .packageInfo(this.packageConfigBuilder.build())\n        // 策略配置\n        .strategy(this.strategyConfigBuilder.build())\n        // 注入配置\n        .injection(this.injectionConfigBuilder.build())\n        // 模板配置\n        .template(this.templateConfigBuilder.build())\n        // 执行\n        .execute(this.templateEngine);\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br")])]),s("p",[n._v("AutoGenerator中execute方法，包括初始化配置和模板引擎（默认是Velocity），然后将配置交给模板引擎初始化执行文件输出")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * 生成代码\n  *\n  * @param templateEngine 模板引擎\n  */\npublic void execute(AbstractTemplateEngine templateEngine) {\n    logger.debug("==========================准备生成文件...==========================");\n    // 初始化配置\n    if (null == config) {\n        config = new ConfigBuilder(packageInfo, dataSource, strategy, template, globalConfig, injection);\n    }\n    if (null == templateEngine) {\n        // 为了兼容之前逻辑，采用 Velocity 引擎 【 默认 】\n        templateEngine = new VelocityTemplateEngine();\n    }\n    templateEngine.setConfigBuilder(config);\n    // 模板引擎初始化执行文件输出\n    templateEngine.init(config).batchOutput().open();\n    logger.debug("==========================文件生成完成！！！==========================");\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br")])]),s("p",[n._v("模板引擎中batchOuput方法中，包含获取表的信息并根据模板来生成类文件。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * 批量输出 java xml 文件\n  */\n@NotNull\npublic AbstractTemplateEngine batchOutput() {\n    try {\n        ConfigBuilder config = this.getConfigBuilder();\n        List<TableInfo> tableInfoList = config.getTableInfoList();\n        tableInfoList.forEach(tableInfo -> {\n            Map<String, Object> objectMap = this.getObjectMap(config, tableInfo);\n            Optional.ofNullable(config.getInjectionConfig()).ifPresent(t -> {\n                t.beforeOutputFile(tableInfo, objectMap);\n                // 输出自定义文件\n                outputCustomFile(t.getCustomFile(), tableInfo, objectMap);\n            });\n            // entity\n            outputEntity(tableInfo, objectMap);\n            // mapper and xml\n            outputMapper(tableInfo, objectMap);\n            // service\n            outputService(tableInfo, objectMap);\n            // controller\n            outputController(tableInfo, objectMap);\n        });\n    } catch (Exception e) {\n        throw new RuntimeException("无法创建文件，请检查配置信息！", e);\n    }\n    return this;\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br")])]),s("p",[n._v("获取表的列表，由ConfigBuilder完成")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public List<TableInfo> getTableInfoList() {\n    if (tableInfoList.isEmpty()) {\n        // TODO 暂时不开放自定义\n        List<TableInfo> tableInfos = new IDatabaseQuery.DefaultDatabaseQuery(this).queryTables();\n        if (!tableInfos.isEmpty()) {\n            this.tableInfoList.addAll(tableInfos);\n        }\n    }\n    return tableInfoList;\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br")])]),s("p",[n._v("然后获取上述单个表（tableInfo)的具体信息（objectMap)")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * 渲染对象 MAP 信息\n  *\n  * @param config    配置信息\n  * @param tableInfo 表信息对象\n  * @return ignore\n  */\n@NotNull\npublic Map<String, Object> getObjectMap(@NotNull ConfigBuilder config, @NotNull TableInfo tableInfo) {\n    StrategyConfig strategyConfig = config.getStrategyConfig();\n    Map<String, Object> controllerData = strategyConfig.controller().renderData(tableInfo);\n    Map<String, Object> objectMap = new HashMap<>(controllerData);\n    Map<String, Object> mapperData = strategyConfig.mapper().renderData(tableInfo);\n    objectMap.putAll(mapperData);\n    Map<String, Object> serviceData = strategyConfig.service().renderData(tableInfo);\n    objectMap.putAll(serviceData);\n    Map<String, Object> entityData = strategyConfig.entity().renderData(tableInfo);\n    objectMap.putAll(entityData);\n    objectMap.put("config", config);\n    objectMap.put("package", config.getPackageConfig().getPackageInfo());\n    GlobalConfig globalConfig = config.getGlobalConfig();\n    objectMap.put("author", globalConfig.getAuthor());\n    objectMap.put("kotlin", globalConfig.isKotlin());\n    objectMap.put("swagger", globalConfig.isSwagger());\n    objectMap.put("date", globalConfig.getCommentDate());\n    // 启用 schema 处理逻辑\n    String schemaName = "";\n    if (strategyConfig.isEnableSchema()) {\n        // 存在 schemaName 设置拼接 . 组合表名\n        schemaName = config.getDataSourceConfig().getSchemaName();\n        if (StringUtils.isNotBlank(schemaName)) {\n            schemaName += ".";\n            tableInfo.setConvert(true);\n        }\n    }\n    objectMap.put("schemaName", schemaName);\n    objectMap.put("table", tableInfo);\n    objectMap.put("entity", tableInfo.getEntityName());\n    return objectMap;\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br")])]),s("p",[n._v("根据TableInfo和objectMap输出类文件，以输出Entity实体类为例")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * 输出实体文件\n  *\n  * @param tableInfo 表信息\n  * @param objectMap 渲染数据\n  * @since 3.5.0\n  */\nprotected void outputEntity(@NotNull TableInfo tableInfo, @NotNull Map<String, Object> objectMap) {\n    String entityName = tableInfo.getEntityName();\n    String entityPath = getPathInfo(OutputFile.entity);\n    if (StringUtils.isNotBlank(entityName) && StringUtils.isNotBlank(entityPath)) {\n        getTemplateFilePath(template -> template.getEntity(getConfigBuilder().getGlobalConfig().isKotlin())).ifPresent((entity) -> {\n            String entityFile = String.format((entityPath + File.separator + "%s" + suffixJavaOrKt()), entityName);\n            outputFile(new File(entityFile), objectMap, entity, getConfigBuilder().getStrategyConfig().entity().isFileOverride());\n        });\n    }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br")])]),s("p",[n._v("在outputFile中来确定生成文件的名字和路径")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("/**\n  * 输出文件\n  *\n  * @param file         文件\n  * @param objectMap    渲染信息\n  * @param templatePath 模板路径\n  * @param fileOverride 是否覆盖已有文件\n  * @since 3.5.2\n  */\nprotected void outputFile(@NotNull File file, @NotNull Map<String, Object> objectMap, @NotNull String templatePath, boolean fileOverride) {\n    if (isCreate(file, fileOverride)) {\n        try {\n            // 全局判断【默认】\n            boolean exist = file.exists();\n            if (!exist) {\n                File parentFile = file.getParentFile();\n                FileUtils.forceMkdir(parentFile);\n            }\n            writer(objectMap, templatePath, file);\n        } catch (Exception exception) {\n            throw new RuntimeException(exception);\n        }\n    }\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br")])]),s("p",[n._v("最后通过writer方法生成文件")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('/**\n  * 将模板转化成为文件\n  *\n  * @param objectMap    渲染对象 MAP 信息\n  * @param templatePath 模板文件\n  * @param outputFile   文件生成的目录\n  * @throws Exception 异常\n  * @since 3.5.0\n  */\npublic void writer(@NotNull Map<String, Object> objectMap, @NotNull String templatePath, @NotNull File outputFile) throws Exception {\n    this.writer(objectMap, templatePath, outputFile.getPath());\n    logger.debug("模板:" + templatePath + ";  文件:" + outputFile);\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br")])]),s("p",[n._v("本质上就是调用模板引擎来生成")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("    @Override\n    public void writer(@NotNull Map<String, Object> objectMap, @NotNull String templatePath, @NotNull File outputFile) throws Exception {\n        Template template = velocityEngine.getTemplate(templatePath, ConstVal.UTF8);\n        try (FileOutputStream fos = new FileOutputStream(outputFile);\n             OutputStreamWriter ow = new OutputStreamWriter(fos, ConstVal.UTF8);\n             BufferedWriter writer = new BufferedWriter(ow)) {\n            template.merge(new VelocityContext(objectMap), writer);\n        }\n    }\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br")])]),s("p",[n._v("比如Entity，velocityEngine.getTemplate会获取如下entity.vm模板生成Entity的类文件。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('package ${package.Entity};\n\n#foreach($pkg in ${table.importPackages})\nimport ${pkg};\n#end\n#if(${swagger})\nimport io.swagger.annotations.ApiModel;\nimport io.swagger.annotations.ApiModelProperty;\n#end\n\n/**\n * <p>\n * $!{table.comment}\n * </p>\n *\n * @author ${author}\n * @since ${date}\n */\n#if(${table.convert})\n@TableName("${schemaName}${table.name}")\n#end\n#if(${swagger})\n@ApiModel(value = "${entity}对象", description = "$!{table.comment}")\n#end\n#if(${superEntityClass})\nclass ${entity} : ${superEntityClass}#if(${activeRecord})<${entity}>#end() {\n#elseif(${activeRecord})\nclass ${entity} : Model<${entity}>() {\n#elseif(${entitySerialVersionUID})\nclass ${entity} : Serializable {\n#else\nclass ${entity} {\n#end\n\n## ----------  BEGIN 字段循环遍历  ----------\n#foreach($field in ${table.fields})\n#if(${field.keyFlag})\n#set($keyPropertyName=${field.propertyName})\n#end\n#if("$!field.comment" != "")\n    #if(${swagger})\n    @ApiModelProperty(value = "${field.comment}")\n    #else\n    /**\n     * ${field.comment}\n     */\n    #end\n#end\n#if(${field.keyFlag})\n## 主键\n#if(${field.keyIdentityFlag})\n    @TableId(value = "${field.annotationColumnName}", type = IdType.AUTO)\n#elseif(!$null.isNull(${idType}) && "$!idType" != "")\n    @TableId(value = "${field.annotationColumnName}", type = IdType.${idType})\n#elseif(${field.convert})\n    @TableId("${field.annotationColumnName}")\n#end\n## 普通字段\n#elseif(${field.fill})\n## -----   存在字段填充设置   -----\n#if(${field.convert})\n    @TableField(value = "${field.annotationColumnName}", fill = FieldFill.${field.fill})\n#else\n    @TableField(fill = FieldFill.${field.fill})\n#end\n#elseif(${field.convert})\n    @TableField("${field.annotationColumnName}")\n#end\n## 乐观锁注解\n#if(${field.versionField})\n    @Version\n#end\n## 逻辑删除注解\n#if(${field.logicDeleteField})\n    @TableLogic\n#end\n    #if(${field.propertyType} == "Integer")\n    var ${field.propertyName}: Int? = null\n    #else\n    var ${field.propertyName}: ${field.propertyType}? = null\n    #end\n\n#end\n## ----------  END 字段循环遍历  ----------\n#if(${entityColumnConstant})\n    companion object {\n#foreach($field in ${table.fields})\n\n        const val ${field.name.toUpperCase()} : String = "${field.name}"\n\n#end\n    }\n\n#end\n#if(${activeRecord})\n    override fun pkVal(): Serializable? {\n#if(${keyPropertyName})\n        return ${keyPropertyName}\n#else\n        return null\n#end\n    }\n\n#end\n    override fun toString(): String {\n        return "${entity}{" +\n#foreach($field in ${table.fields})\n#if($!{foreach.index}==0)\n        "${field.propertyName}=" + ${field.propertyName} +\n#else\n        ", ${field.propertyName}=" + ${field.propertyName} +\n#end\n#end\n        "}"\n    }\n}\n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br"),s("span",{staticClass:"line-number"},[n._v("61")]),s("br"),s("span",{staticClass:"line-number"},[n._v("62")]),s("br"),s("span",{staticClass:"line-number"},[n._v("63")]),s("br"),s("span",{staticClass:"line-number"},[n._v("64")]),s("br"),s("span",{staticClass:"line-number"},[n._v("65")]),s("br"),s("span",{staticClass:"line-number"},[n._v("66")]),s("br"),s("span",{staticClass:"line-number"},[n._v("67")]),s("br"),s("span",{staticClass:"line-number"},[n._v("68")]),s("br"),s("span",{staticClass:"line-number"},[n._v("69")]),s("br"),s("span",{staticClass:"line-number"},[n._v("70")]),s("br"),s("span",{staticClass:"line-number"},[n._v("71")]),s("br"),s("span",{staticClass:"line-number"},[n._v("72")]),s("br"),s("span",{staticClass:"line-number"},[n._v("73")]),s("br"),s("span",{staticClass:"line-number"},[n._v("74")]),s("br"),s("span",{staticClass:"line-number"},[n._v("75")]),s("br"),s("span",{staticClass:"line-number"},[n._v("76")]),s("br"),s("span",{staticClass:"line-number"},[n._v("77")]),s("br"),s("span",{staticClass:"line-number"},[n._v("78")]),s("br"),s("span",{staticClass:"line-number"},[n._v("79")]),s("br"),s("span",{staticClass:"line-number"},[n._v("80")]),s("br"),s("span",{staticClass:"line-number"},[n._v("81")]),s("br"),s("span",{staticClass:"line-number"},[n._v("82")]),s("br"),s("span",{staticClass:"line-number"},[n._v("83")]),s("br"),s("span",{staticClass:"line-number"},[n._v("84")]),s("br"),s("span",{staticClass:"line-number"},[n._v("85")]),s("br"),s("span",{staticClass:"line-number"},[n._v("86")]),s("br"),s("span",{staticClass:"line-number"},[n._v("87")]),s("br"),s("span",{staticClass:"line-number"},[n._v("88")]),s("br"),s("span",{staticClass:"line-number"},[n._v("89")]),s("br"),s("span",{staticClass:"line-number"},[n._v("90")]),s("br"),s("span",{staticClass:"line-number"},[n._v("91")]),s("br"),s("span",{staticClass:"line-number"},[n._v("92")]),s("br"),s("span",{staticClass:"line-number"},[n._v("93")]),s("br"),s("span",{staticClass:"line-number"},[n._v("94")]),s("br"),s("span",{staticClass:"line-number"},[n._v("95")]),s("br"),s("span",{staticClass:"line-number"},[n._v("96")]),s("br"),s("span",{staticClass:"line-number"},[n._v("97")]),s("br"),s("span",{staticClass:"line-number"},[n._v("98")]),s("br"),s("span",{staticClass:"line-number"},[n._v("99")]),s("br"),s("span",{staticClass:"line-number"},[n._v("100")]),s("br"),s("span",{staticClass:"line-number"},[n._v("101")]),s("br"),s("span",{staticClass:"line-number"},[n._v("102")]),s("br"),s("span",{staticClass:"line-number"},[n._v("103")]),s("br"),s("span",{staticClass:"line-number"},[n._v("104")]),s("br"),s("span",{staticClass:"line-number"},[n._v("105")]),s("br"),s("span",{staticClass:"line-number"},[n._v("106")]),s("br"),s("span",{staticClass:"line-number"},[n._v("107")]),s("br"),s("span",{staticClass:"line-number"},[n._v("108")]),s("br"),s("span",{staticClass:"line-number"},[n._v("109")]),s("br"),s("span",{staticClass:"line-number"},[n._v("110")]),s("br"),s("span",{staticClass:"line-number"},[n._v("111")]),s("br"),s("span",{staticClass:"line-number"},[n._v("112")]),s("br"),s("span",{staticClass:"line-number"},[n._v("113")]),s("br"),s("span",{staticClass:"line-number"},[n._v("114")]),s("br"),s("span",{staticClass:"line-number"},[n._v("115")]),s("br"),s("span",{staticClass:"line-number"},[n._v("116")]),s("br")])]),s("p",[n._v("同理生成mapper, service, controller等文件。是不是很简单？")]),n._v(" "),s("h3",{attrs:{id:"如何看mybatis-plus生成代码的功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何看mybatis-plus生成代码的功能"}},[n._v("#")]),n._v(" 如何看MyBatis-Plus生成代码的功能？")]),n._v(" "),s("blockquote",[s("p",[n._v("简单而言，对于初学者好像能生成代码作用很大，实际情况是很鸡肋！")])]),n._v(" "),s("ul",[s("li",[n._v("从上面的源码我们可以看出，生成类只适合单表结构，表的关联无法处理；")]),n._v(" "),s("li",[n._v("对于单表的CRUD类，如果可以自动化生成，必然是可以很好的抽象的，而BaseMapper, BaseServiceImpl的封装已经足够了；")]),n._v(" "),s("li",[n._v("通常真正可以通过一体化集成前端代码的生成，才有一定的意义；")]),n._v(" "),s("li",[n._v("当然少部分情况快速提供接口的可以考虑，不过其实也省不了什么时间。")])]),n._v(" "),s("h1",{attrs:{id:"示例源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例源码"}},[n._v("#")]),n._v(" 示例源码")]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("https://github.com/realpdai/tech-pdai-spring-demos")])])}),[],!1,null,null,null);s.default=t.exports}}]);