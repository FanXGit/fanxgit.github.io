(window.webpackJsonp=window.webpackJsonp||[]).push([[506],{3567:function(a,s,t){"use strict";t.r(s);var n=t(7),e=Object(n.a)({},(function(){var a=this,s=a._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h2",{attrs:{id:"java-8-重复注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#java-8-重复注解"}},[a._v("#")]),a._v(" Java 8 - 重复注解")]),a._v(" "),s("p",[a._v("===============================")]),a._v(" "),s("blockquote",[s("p",[a._v("理解Java 8 重复注解需理解几个问题: @pdai")]),a._v(" "),s("ul",[s("li",[a._v("Jdk8之前对重复注解是怎么做的?")]),a._v(" "),s("li",[a._v("Jdk8对重复注解添加了什么支持?")])])]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#java-8---%E9%87%8D%E5%A4%8D%E6%B3%A8%E8%A7%A3"}},[a._v("Java 8 - 重复注解")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E4%BB%80%E4%B9%88%E6%98%AF%E9%87%8D%E5%A4%8D%E6%B3%A8%E8%A7%A3"}},[a._v("什么是重复注解")]),a._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#jdk8%E4%B9%8B%E5%89%8D"}},[a._v("JDK8之前")])]),a._v(" "),s("li",[s("a",{attrs:{href:"#jdk8%E9%87%8D%E5%A4%8D%E6%B3%A8%E8%A7%A3"}},[a._v("Jdk8重复注解")])])])]),a._v(" "),s("li",[s("a",{attrs:{href:"#%E6%80%BB%E7%BB%93"}},[a._v("总结")])])])])]),a._v(" "),s("h2",{attrs:{id:"什么是重复注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#什么是重复注解"}},[a._v("#")]),a._v(" 什么是重复注解")]),a._v(" "),s("hr"),a._v(" "),s("p",[a._v("允许在同一申明类型(类，属性，或方法)的多次使用同一个注解")]),a._v(" "),s("h3",{attrs:{id:"jdk8之前"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk8之前"}},[a._v("#")]),a._v(" JDK8之前")]),a._v(" "),s("p",[a._v("java 8之前也有重复使用注解的解决方案，但可读性不是很好，比如下面的代码:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('public @interface Authority {\n     String role();\n}\n\npublic @interface Authorities {\n    Authority[] value();\n}\n\npublic class RepeatAnnotationUseOldVersion {\n\n    @Authorities({@Authority(role="Admin"),@Authority(role="Manager")})\n    public void doSomeThing(){\n    }\n} \n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])]),s("p",[a._v("由另一个注解来存储重复注解，在使用时候，用存储注解Authorities来扩展重复注解。")]),a._v(" "),s("h3",{attrs:{id:"jdk8重复注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#jdk8重复注解"}},[a._v("#")]),a._v(" Jdk8重复注解")]),a._v(" "),s("p",[a._v("我们再来看看java 8里面的做法:")]),a._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v('@Repeatable(Authorities.class)\npublic @interface Authority {\n     String role();\n}\n\npublic @interface Authorities {\n    Authority[] value();\n}\n\npublic class RepeatAnnotationUseNewVersion {\n    @Authority(role="Admin")\n    @Authority(role="Manager")\n    public void doSomeThing(){ }\n} \n')])]),a._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[a._v("1")]),s("br"),s("span",{staticClass:"line-number"},[a._v("2")]),s("br"),s("span",{staticClass:"line-number"},[a._v("3")]),s("br"),s("span",{staticClass:"line-number"},[a._v("4")]),s("br"),s("span",{staticClass:"line-number"},[a._v("5")]),s("br"),s("span",{staticClass:"line-number"},[a._v("6")]),s("br"),s("span",{staticClass:"line-number"},[a._v("7")]),s("br"),s("span",{staticClass:"line-number"},[a._v("8")]),s("br"),s("span",{staticClass:"line-number"},[a._v("9")]),s("br"),s("span",{staticClass:"line-number"},[a._v("10")]),s("br"),s("span",{staticClass:"line-number"},[a._v("11")]),s("br"),s("span",{staticClass:"line-number"},[a._v("12")]),s("br"),s("span",{staticClass:"line-number"},[a._v("13")]),s("br"),s("span",{staticClass:"line-number"},[a._v("14")]),s("br")])]),s("p",[a._v("不同的地方是，创建重复注解Authority时，加上@Repeatable,指向存储注解Authorities，在使用时候，直接可以重复使用Authority注解。从上面例子看出，java 8里面做法更适合常规的思维，可读性强一点")]),a._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[a._v("#")]),a._v(" 总结")]),a._v(" "),s("hr"),a._v(" "),s("p",[a._v("JEP120没有太多内容，是一个小特性，仅仅是为了提高代码可读性。这次java 8对注解做了2个方面的改进(JEP 104,JEP120)，相信注解会比以前使用得更加频繁了。")])])}),[],!1,null,null,null);s.default=e.exports}}]);