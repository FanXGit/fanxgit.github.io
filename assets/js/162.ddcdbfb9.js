(window.webpackJsonp=window.webpackJsonp||[]).push([[162],{3542:function(n,s,a){"use strict";a.r(s);var t=a(7),e=Object(t.a)({},(function(){var n=this,s=n._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h1",{attrs:{id:"juc工具类-countdownlatch详解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#juc工具类-countdownlatch详解"}},[n._v("#")]),n._v(" JUC工具类: CountDownLatch详解")]),n._v(" "),s("p",[n._v("======================================================")]),n._v(" "),s("blockquote",[s("p",[n._v("CountDownLatch底层也是由AQS，用来同步一个或多个任务的常用并发工具类，强制它们等待由其他任务执行的一组操作完成。@pdai")])]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#juc%E5%B7%A5%E5%85%B7%E7%B1%BB-countdownlatch%E8%AF%A6%E8%A7%A3"}},[n._v("JUC工具类: CountDownLatch详解")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%B8%A6%E7%9D%80bat%E5%A4%A7%E5%8E%82%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%8E%BB%E7%90%86%E8%A7%A3"}},[n._v("带着BAT大厂的面试问题去理解")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#countdownlatch%E4%BB%8B%E7%BB%8D"}},[n._v("CountDownLatch介绍")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#countdownlatch%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90"}},[n._v("CountDownLatch源码分析")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB"}},[n._v("类的继承关系")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E7%B1%BB%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB"}},[n._v("类的内部类")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E7%B1%BB%E7%9A%84%E5%B1%9E%E6%80%A7"}},[n._v("类的属性")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0"}},[n._v("类的构造函数")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0---await%E5%87%BD%E6%95%B0"}},[n._v("核心函数 - await函数")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0---countdown%E5%87%BD%E6%95%B0"}},[n._v("核心函数 - countDown函数")])])])]),n._v(" "),s("li",[s("a",{attrs:{href:"#countdownlatch%E7%A4%BA%E4%BE%8B"}},[n._v("CountDownLatch示例")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E6%9B%B4%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3"}},[n._v("更深入理解")]),n._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%86%99%E9%81%93%E9%9D%A2%E8%AF%95%E9%A2%98"}},[n._v("写道面试题")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E4%BD%BF%E7%94%A8wait%E5%92%8Cnotify%E5%AE%9E%E7%8E%B0"}},[n._v("使用wait和notify实现")])]),n._v(" "),s("li",[s("a",{attrs:{href:"#countdownlatch%E5%AE%9E%E7%8E%B0"}},[n._v("CountDownLatch实现")])])])]),n._v(" "),s("li",[s("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0"}},[n._v("参考文章")])])])])]),n._v(" "),s("h2",{attrs:{id:"带着bat大厂的面试问题去理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#带着bat大厂的面试问题去理解"}},[n._v("#")]),n._v(" 带着BAT大厂的面试问题去理解")]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("提示")]),n._v(" "),s("p",[n._v("请带着这些问题继续后文，会很大程度上帮助你更好的理解相关知识点。@pdai")]),n._v(" "),s("ul",[s("li",[n._v("什么是CountDownLatch?")]),n._v(" "),s("li",[n._v("CountDownLatch底层实现原理?")]),n._v(" "),s("li",[n._v("CountDownLatch一次可以唤醒几个任务? 多个")]),n._v(" "),s("li",[n._v("CountDownLatch有哪些主要方法? await(),countDown()")]),n._v(" "),s("li",[n._v("CountDownLatch适用于什么场景?")]),n._v(" "),s("li",[n._v("写道题：实现一个容器，提供两个方法，add，size 写两个线程，线程1添加10个元素到容器中，线程2实现监控元素的个数，当个数到5个时，线程2给出提示并结束? 使用CountDownLatch 代替wait notify 好处。")])]),n._v(" "),s("h2",{attrs:{id:"countdownlatch介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#countdownlatch介绍"}},[n._v("#")]),n._v(" CountDownLatch介绍")]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("从源码可知，其底层是由AQS提供支持，所以其数据结构可以参考AQS的数据结构，而AQS的数据结构核心就是两个虚拟队列: 同步队列sync queue 和条件队列condition queue，不同的条件会有不同的条件队列。CountDownLatch典型的用法是将一个程序分为n个互相独立的可解决任务，并创建值为n的CountDownLatch。当每一个任务完成时，都会在这个锁存器上调用countDown，等待问题被解决的任务调用这个锁存器的await，将他们自己拦住，直至锁存器计数结束。")]),n._v(" "),s("h2",{attrs:{id:"countdownlatch源码分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#countdownlatch源码分析"}},[n._v("#")]),n._v(" CountDownLatch源码分析")]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"类的继承关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的继承关系"}},[n._v("#")]),n._v(" 类的继承关系")]),n._v(" "),s("p",[n._v("CountDownLatch没有显示继承哪个父类或者实现哪个父接口, 它底层是AQS是通过内部类Sync来实现的。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public class CountDownLatch {} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br")])]),s("h3",{attrs:{id:"类的内部类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的内部类"}},[n._v("#")]),n._v(" 类的内部类")]),n._v(" "),s("p",[n._v("CountDownLatch类存在一个内部类Sync，继承自AbstractQueuedSynchronizer，其源代码如下。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("private static final class Sync extends AbstractQueuedSynchronizer {\n    // 版本号\n    private static final long serialVersionUID = 4982264981922014374L;\n    \n    // 构造器\n    Sync(int count) {\n        setState(count);\n    }\n    \n    // 返回当前计数\n    int getCount() {\n        return getState();\n    }\n\n    // 试图在共享模式下获取对象状态\n    protected int tryAcquireShared(int acquires) {\n        return (getState() == 0) ? 1 : -1;\n    }\n\n    // 试图设置状态来反映共享模式下的一个释放\n    protected boolean tryReleaseShared(int releases) {\n        // Decrement count; signal when transition to zero\n        // 无限循环\n        for (;;) {\n            // 获取状态\n            int c = getState();\n            if (c == 0) // 没有被线程占有\n                return false;\n            // 下一个状态\n            int nextc = c-1;\n            if (compareAndSetState(c, nextc)) // 比较并且设置成功\n                return nextc == 0;\n        }\n    }\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br")])]),s("p",[n._v("说明: 对CountDownLatch方法的调用会转发到对Sync或AQS的方法的调用，所以，AQS对CountDownLatch提供支持。")]),n._v(" "),s("h3",{attrs:{id:"类的属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的属性"}},[n._v("#")]),n._v(" 类的属性")]),n._v(" "),s("p",[n._v("可以看到CountDownLatch类的内部只有一个Sync类型的属性:")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public class CountDownLatch {\n    // 同步队列\n    private final Sync sync;\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br")])]),s("h3",{attrs:{id:"类的构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#类的构造函数"}},[n._v("#")]),n._v(" 类的构造函数")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('public CountDownLatch(int count) {\n    if (count < 0) throw new IllegalArgumentException("count < 0");\n    // 初始化状态数\n    this.sync = new Sync(count);\n} \n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br")])]),s("p",[n._v("说明: 该构造函数可以构造一个用给定计数初始化的CountDownLatch，并且构造函数内完成了sync的初始化，并设置了状态数。")]),n._v(" "),s("h3",{attrs:{id:"核心函数-await函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心函数-await函数"}},[n._v("#")]),n._v(" 核心函数 - await函数")]),n._v(" "),s("p",[n._v("此函数将会使当前线程在锁存器倒计数至零之前一直等待，除非线程被中断。其源码如下")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public void await() throws InterruptedException {\n    // 转发到sync对象上\n    sync.acquireSharedInterruptibly(1);\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br")])]),s("p",[n._v("说明: 由源码可知，对CountDownLatch对象的await的调用会转发为对Sync的acquireSharedInterruptibly(从AQS继承的方法)方法的调用。")]),n._v(" "),s("ul",[s("li",[n._v("acquireSharedInterruptibly源码如下:")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public final void acquireSharedInterruptibly(int arg)\n        throws InterruptedException {\n    if (Thread.interrupted())\n        throw new InterruptedException();\n    if (tryAcquireShared(arg) < 0)\n        doAcquireSharedInterruptibly(arg);\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("说明: 从源码中可知，acquireSharedInterruptibly又调用了CountDownLatch的内部类Sync的tryAcquireShared和AQS的doAcquireSharedInterruptibly函数。")]),n._v(" "),s("ul",[s("li",[n._v("tryAcquireShared函数的源码如下:")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("protected int tryAcquireShared(int acquires) {\n    return (getState() == 0) ? 1 : -1;\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("p",[n._v("说明: 该函数只是简单的判断AQS的state是否为0，为0则返回1，不为0则返回-1。")]),n._v(" "),s("ul",[s("li",[n._v("doAcquireSharedInterruptibly函数的源码如下:")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("private void doAcquireSharedInterruptibly(int arg) throws InterruptedException {\n    // 添加节点至等待队列\n    final Node node = addWaiter(Node.SHARED);\n    boolean failed = true;\n    try {\n        for (;;) { // 无限循环\n            // 获取node的前驱节点\n            final Node p = node.predecessor();\n            if (p == head) { // 前驱节点为头节点\n                // 试图在共享模式下获取对象状态\n                int r = tryAcquireShared(arg);\n                if (r >= 0) { // 获取成功\n                    // 设置头节点并进行繁殖\n                    setHeadAndPropagate(node, r);\n                    // 设置节点next域\n                    p.next = null; // help GC\n                    failed = false;\n                    return;\n                }\n            }\n            if (shouldParkAfterFailedAcquire(p, node) &&\n                parkAndCheckInterrupt()) // 在获取失败后是否需要禁止线程并且进行中断检查\n                // 抛出异常\n                throw new InterruptedException();\n        }\n    } finally {\n        if (failed)\n            cancelAcquire(node);\n    }\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br")])]),s("p",[n._v("说明: 在AQS的doAcquireSharedInterruptibly中可能会再次调用CountDownLatch的内部类Sync的tryAcquireShared方法和AQS的setHeadAndPropagate方法。")]),n._v(" "),s("ul",[s("li",[n._v("setHeadAndPropagate方法源码如下。")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("private void setHeadAndPropagate(Node node, int propagate) {\n    // 获取头节点\n    Node h = head; // Record old head for check below\n    // 设置头节点\n    setHead(node);\n    /*\n        * Try to signal next queued node if:\n        *   Propagation was indicated by caller,\n        *     or was recorded (as h.waitStatus either before\n        *     or after setHead) by a previous operation\n        *     (note: this uses sign-check of waitStatus because\n        *      PROPAGATE status may transition to SIGNAL.)\n        * and\n        *   The next node is waiting in shared mode,\n        *     or we don't know, because it appears null\n        *\n        * The conservatism in both of these checks may cause\n        * unnecessary wake-ups, but only when there are multiple\n        * racing acquires/releases, so most need signals now or soon\n        * anyway.\n        */\n    // 进行判断\n    if (propagate > 0 || h == null || h.waitStatus < 0 ||\n        (h = head) == null || h.waitStatus < 0) {\n        // 获取节点的后继\n        Node s = node.next;\n        if (s == null || s.isShared()) // 后继为空或者为共享模式\n            // 以共享模式进行释放\n            doReleaseShared();\n    }\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br")])]),s("p",[n._v("说明: 该方法设置头节点并且释放头节点后面的满足条件的结点，该方法中可能会调用到AQS的doReleaseShared方法，其源码如下。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("private void doReleaseShared() {\n    /*\n        * Ensure that a release propagates, even if there are other\n        * in-progress acquires/releases.  This proceeds in the usual\n        * way of trying to unparkSuccessor of head if it needs\n        * signal. But if it does not, status is set to PROPAGATE to\n        * ensure that upon release, propagation continues.\n        * Additionally, we must loop in case a new node is added\n        * while we are doing this. Also, unlike other uses of\n        * unparkSuccessor, we need to know if CAS to reset status\n        * fails, if so rechecking.\n        */\n    // 无限循环\n    for (;;) {\n        // 保存头节点\n        Node h = head;\n        if (h != null && h != tail) { // 头节点不为空并且头节点不为尾结点\n            // 获取头节点的等待状态\n            int ws = h.waitStatus; \n            if (ws == Node.SIGNAL) { // 状态为SIGNAL\n                if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) // 不成功就继续\n                    continue;            // loop to recheck cases\n                // 释放后继结点\n                unparkSuccessor(h);\n            }\n            else if (ws == 0 &&\n                        !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) // 状态为0并且不成功，继续\n                continue;                // loop on failed CAS\n        }\n        if (h == head) // 若头节点改变，继续循环 \n            break;\n    }\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br")])]),s("p",[n._v("说明: 该方法在共享模式下释放，具体的流程再之后会通过一个示例给出。")]),n._v(" "),s("p",[n._v("所以，对CountDownLatch的await调用大致会有如下的调用链。")]),n._v(" "),s("p",[s("img",{attrs:{src:a(535),alt:""}})]),n._v(" "),s("p",[n._v("说明: 上图给出了可能会调用到的主要方法，并非一定会调用到，之后，会通过一个示例给出详细的分析。")]),n._v(" "),s("h3",{attrs:{id:"核心函数-countdown函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心函数-countdown函数"}},[n._v("#")]),n._v(" 核心函数 - countDown函数")]),n._v(" "),s("p",[n._v("此函数将递减锁存器的计数，如果计数到达零，则释放所有等待的线程")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public void countDown() {\n    sync.releaseShared(1);\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br")])]),s("p",[n._v("说明: 对countDown的调用转换为对Sync对象的releaseShared(从AQS继承而来)方法的调用。")]),n._v(" "),s("ul",[s("li",[n._v("releaseShared源码如下")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("public final boolean releaseShared(int arg) {\n    if (tryReleaseShared(arg)) {\n        doReleaseShared();\n        return true;\n    }\n    return false;\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("说明: 此函数会以共享模式释放对象，并且在函数中会调用到CountDownLatch的tryReleaseShared函数，并且可能会调用AQS的doReleaseShared函数。")]),n._v(" "),s("ul",[s("li",[n._v("tryReleaseShared源码如下")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("protected boolean tryReleaseShared(int releases) {\n    // Decrement count; signal when transition to zero\n    // 无限循环\n    for (;;) {\n        // 获取状态\n        int c = getState();\n        if (c == 0) // 没有被线程占有\n            return false;\n        // 下一个状态\n        int nextc = c-1;\n        if (compareAndSetState(c, nextc)) // 比较并且设置成功\n            return nextc == 0;\n    }\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br")])]),s("p",[n._v("说明: 此函数会试图设置状态来反映共享模式下的一个释放。具体的流程在下面的示例中会进行分析。")]),n._v(" "),s("ul",[s("li",[n._v("AQS的doReleaseShared的源码如下")])]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("private void doReleaseShared() {\n    /*\n        * Ensure that a release propagates, even if there are other\n        * in-progress acquires/releases.  This proceeds in the usual\n        * way of trying to unparkSuccessor of head if it needs\n        * signal. But if it does not, status is set to PROPAGATE to\n        * ensure that upon release, propagation continues.\n        * Additionally, we must loop in case a new node is added\n        * while we are doing this. Also, unlike other uses of\n        * unparkSuccessor, we need to know if CAS to reset status\n        * fails, if so rechecking.\n        */\n    // 无限循环\n    for (;;) {\n        // 保存头节点\n        Node h = head;\n        if (h != null && h != tail) { // 头节点不为空并且头节点不为尾结点\n            // 获取头节点的等待状态\n            int ws = h.waitStatus; \n            if (ws == Node.SIGNAL) { // 状态为SIGNAL\n                if (!compareAndSetWaitStatus(h, Node.SIGNAL, 0)) // 不成功就继续\n                    continue;            // loop to recheck cases\n                // 释放后继结点\n                unparkSuccessor(h);\n            }\n            else if (ws == 0 &&\n                        !compareAndSetWaitStatus(h, 0, Node.PROPAGATE)) // 状态为0并且不成功，继续\n                continue;                // loop on failed CAS\n        }\n        if (h == head) // 若头节点改变，继续循环 \n            break;\n    }\n} \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br")])]),s("p",[n._v("说明: 此函数在共享模式下释放资源。")]),n._v(" "),s("p",[n._v("所以，对CountDownLatch的countDown调用大致会有如下的调用链。")]),n._v(" "),s("p",[s("img",{attrs:{src:a(536),alt:""}})]),n._v(" "),s("p",[n._v("说明: 上图给出了可能会调用到的主要方法，并非一定会调用到，之后，会通过一个示例给出详细的分析。")]),n._v(" "),s("h2",{attrs:{id:"countdownlatch示例"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#countdownlatch示例"}},[n._v("#")]),n._v(" CountDownLatch示例")]),n._v(" "),s("hr"),n._v(" "),s("p",[n._v("下面给出了一个使用CountDownLatch的示例。")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('import java.util.concurrent.CountDownLatch;\n\nclass MyThread extends Thread {\n    private CountDownLatch countDownLatch;\n    \n    public MyThread(String name, CountDownLatch countDownLatch) {\n        super(name);\n        this.countDownLatch = countDownLatch;\n    }\n    \n    public void run() {\n        System.out.println(Thread.currentThread().getName() + " doing something");\n        try {\n            Thread.sleep(1000);\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }\n        System.out.println(Thread.currentThread().getName() + " finish");\n        countDownLatch.countDown();\n    }\n}\n\npublic class CountDownLatchDemo {\n    public static void main(String[] args) {\n        CountDownLatch countDownLatch = new CountDownLatch(2);\n        MyThread t1 = new MyThread("t1", countDownLatch);\n        MyThread t2 = new MyThread("t2", countDownLatch);\n        t1.start();\n        t2.start();\n        System.out.println("Waiting for t1 thread and t2 thread to finish");\n        try {\n            countDownLatch.await();\n        } catch (InterruptedException e) {\n            e.printStackTrace();\n        }            \n        System.out.println(Thread.currentThread().getName() + " continue");        \n    }\n} \n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br")])]),s("p",[n._v("运行结果(某一次):")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("Waiting for t1 thread and t2 thread to finish\nt1 doing something\nt2 doing something\nt1 finish\nt2 finish\nmain continue \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br")])]),s("p",[n._v("说明: 本程序首先计数器初始化为2。根据结果，可能会存在如下的一种时序图。")]),n._v(" "),s("p",[s("img",{attrs:{src:a(537),alt:""}})]),n._v(" "),s("p",[n._v("说明: 首先main线程会调用await操作，此时main线程会被阻塞，等待被唤醒，之后t1线程执行了countDown操作，最后，t2线程执行了countDown操作，此时main线程就被唤醒了，可以继续运行。下面，进行详细分析。")]),n._v(" "),s("ul",[s("li",[n._v("main线程执行countDownLatch.await操作，主要调用的函数如下。")])]),n._v(" "),s("p",[s("img",{attrs:{src:a(538),alt:""}})]),n._v(" "),s("p",[n._v("说明: 在最后，main线程就被park了，即禁止运行了。此时Sync queue(同步队列)中有两个节点，AQS的state为2，包含main线程的结点的nextWaiter指向SHARED结点。")]),n._v(" "),s("ul",[s("li",[n._v("t1线程执行countDownLatch.countDown操作，主要调用的函数如下。")])]),n._v(" "),s("p",[s("img",{attrs:{src:a(539),alt:""}})]),n._v(" "),s("p",[n._v("说明: 此时，Sync queue队列里的结点个数未发生变化，但是此时，AQS的state已经变为1了。")]),n._v(" "),s("ul",[s("li",[n._v("t2线程执行countDownLatch.countDown操作，主要调用的函数如下。")])]),n._v(" "),s("p",[s("img",{attrs:{src:a(540),alt:""}})]),n._v(" "),s("p",[n._v("说明: 经过调用后，AQS的state为0，并且此时，main线程会被unpark，可以继续运行。当main线程获取cpu资源后，继续运行。")]),n._v(" "),s("ul",[s("li",[n._v("main线程获取cpu资源，继续运行，由于main线程是在parkAndCheckInterrupt函数中被禁止的，所以此时，继续在parkAndCheckInterrupt函数运行。")])]),n._v(" "),s("p",[s("img",{attrs:{src:a(541),alt:""}})]),n._v(" "),s("p",[n._v("说明: main线程恢复，继续在parkAndCheckInterrupt函数中运行，之后又会回到最终达到的状态为AQS的state为0，并且head与tail指向同一个结点，该节点的额nextWaiter域还是指向SHARED结点。")]),n._v(" "),s("h2",{attrs:{id:"更深入理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更深入理解"}},[n._v("#")]),n._v(" 更深入理解")]),n._v(" "),s("hr"),n._v(" "),s("h3",{attrs:{id:"写道面试题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#写道面试题"}},[n._v("#")]),n._v(" 写道面试题")]),n._v(" "),s("blockquote",[s("p",[n._v("实现一个容器，提供两个方法，add，size 写两个线程，线程1添加10个元素到容器中，线程2实现监控元素的个数，当个数到5个时，线程2给出提示并结束.")])]),n._v(" "),s("h3",{attrs:{id:"使用wait和notify实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用wait和notify实现"}},[n._v("#")]),n._v(" 使用wait和notify实现")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('import java.util.ArrayList;\nimport java.util.List;\n\n/**\n *  必须先让t2先进行启动 使用wait 和 notify 进行相互通讯，wait会释放锁，notify不会释放锁\n */\npublic class T2 {\n\n volatile   List list = new ArrayList();\n\n    public void add (int i){\n        list.add(i);\n    }\n\n    public int getSize(){\n        return list.size();\n    }\n\n    public static void main(String[] args) {\n\n        T2 t2 = new T2();\n\n        Object lock = new Object();\n\n        new Thread(() -> {\n            synchronized(lock){\n                System.out.println("t2 启动");\n                if(t2.getSize() != 5){\n                    try {\n                        /**会释放锁*/\n                        lock.wait();\n                        System.out.println("t2 结束");\n                    } catch (InterruptedException e) {\n                        e.printStackTrace();\n                    }\n                }\n                lock.notify();\n            }\n        },"t2").start();\n\n        new Thread(() -> {\n           synchronized (lock){\n               System.out.println("t1 启动");\n               for (int i=0;i<9;i++){\n                   t2.add(i);\n                   System.out.println("add"+i);\n                   if(t2.getSize() == 5){\n                       /**不会释放锁*/\n                       lock.notify();\n                       try {\n                           lock.wait();\n                       } catch (InterruptedException e) {\n                           e.printStackTrace();\n                       }\n                   }\n               }\n           }\n        }).start();\n    }\n} \n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br"),s("span",{staticClass:"line-number"},[n._v("51")]),s("br"),s("span",{staticClass:"line-number"},[n._v("52")]),s("br"),s("span",{staticClass:"line-number"},[n._v("53")]),s("br"),s("span",{staticClass:"line-number"},[n._v("54")]),s("br"),s("span",{staticClass:"line-number"},[n._v("55")]),s("br"),s("span",{staticClass:"line-number"},[n._v("56")]),s("br"),s("span",{staticClass:"line-number"},[n._v("57")]),s("br"),s("span",{staticClass:"line-number"},[n._v("58")]),s("br"),s("span",{staticClass:"line-number"},[n._v("59")]),s("br"),s("span",{staticClass:"line-number"},[n._v("60")]),s("br")])]),s("p",[n._v("输出：")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("t2 启动\nt1 启动\nadd0\nadd1\nadd2\nadd3\nadd4\nt2 结束\nadd5\nadd6\nadd7\nadd8 \n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br")])]),s("h3",{attrs:{id:"countdownlatch实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#countdownlatch实现"}},[n._v("#")]),n._v(" CountDownLatch实现")]),n._v(" "),s("p",[n._v("说出使用CountDownLatch 代替wait notify 好处?")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v('import java.util.ArrayList;\nimport java.util.List;\nimport java.util.concurrent.CountDownLatch;\n\n/**\n * 使用CountDownLatch 代替wait notify 好处是通讯方式简单，不涉及锁定  Count 值为0时当前线程继续执行，\n */\npublic class T3 {\n\n   volatile List list = new ArrayList();\n\n    public void add(int i){\n        list.add(i);\n    }\n\n    public int getSize(){\n        return list.size();\n    }\n\n    public static void main(String[] args) {\n        T3 t = new T3();\n        CountDownLatch countDownLatch = new CountDownLatch(1);\n\n        new Thread(() -> {\n            System.out.println("t2 start");\n           if(t.getSize() != 5){\n               try {\n                   countDownLatch.await();\n                   System.out.println("t2 end");\n               } catch (InterruptedException e) {\n                   e.printStackTrace();\n               }\n           }\n        },"t2").start();\n\n        new Thread(()->{\n            System.out.println("t1 start");\n           for (int i = 0;i<9;i++){\n               t.add(i);\n               System.out.println("add"+ i);\n               if(t.getSize() == 5){\n                   System.out.println("countdown is open");\n                   countDownLatch.countDown();\n               }\n           }\n            System.out.println("t1 end");\n        },"t1").start();\n    }\n\n} \n')])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br"),s("span",{staticClass:"line-number"},[n._v("35")]),s("br"),s("span",{staticClass:"line-number"},[n._v("36")]),s("br"),s("span",{staticClass:"line-number"},[n._v("37")]),s("br"),s("span",{staticClass:"line-number"},[n._v("38")]),s("br"),s("span",{staticClass:"line-number"},[n._v("39")]),s("br"),s("span",{staticClass:"line-number"},[n._v("40")]),s("br"),s("span",{staticClass:"line-number"},[n._v("41")]),s("br"),s("span",{staticClass:"line-number"},[n._v("42")]),s("br"),s("span",{staticClass:"line-number"},[n._v("43")]),s("br"),s("span",{staticClass:"line-number"},[n._v("44")]),s("br"),s("span",{staticClass:"line-number"},[n._v("45")]),s("br"),s("span",{staticClass:"line-number"},[n._v("46")]),s("br"),s("span",{staticClass:"line-number"},[n._v("47")]),s("br"),s("span",{staticClass:"line-number"},[n._v("48")]),s("br"),s("span",{staticClass:"line-number"},[n._v("49")]),s("br"),s("span",{staticClass:"line-number"},[n._v("50")]),s("br")])]),s("h2",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[n._v("#")]),n._v(" 参考文章")]),n._v(" "),s("hr"),n._v(" "),s("ul",[s("li",[n._v("文章主要参考自leesf的https://www.cnblogs.com/leesf456/p/5406191.html，在此基础上做了增改。")]),n._v(" "),s("li",[n._v("https://www.jianshu.com/p/40336ef1f5fe")])])])}),[],!1,null,null,null);s.default=e.exports},535:function(n,s,a){n.exports=a.p+"assets/img/thread_java-thread-x-countdownlatch-1.33ef96b2.png"},536:function(n,s){n.exports="data:image/png;base64,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"},537:function(n,s){n.exports="data:image/png;base64,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"},538:function(n,s,a){n.exports=a.p+"assets/img/thread_java-thread-x-countdownlatch-4.d5689d12.png"},539:function(n,s,a){n.exports=a.p+"assets/img/thread_java-thread-x-countdownlatch-5.3d05788a.png"},540:function(n,s,a){n.exports=a.p+"assets/img/thread_java-thread-x-countdownlatch-6.550ccee1.png"},541:function(n,s,a){n.exports=a.p+"assets/img/thread_java-thread-x-countdownlatch-7.d39993ec.png"}}]);