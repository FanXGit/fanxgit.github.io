(window.webpackJsonp=window.webpackJsonp||[]).push([[632],{4012:function(t,n,s){"use strict";s.r(n);var e=s(7),a=Object(e.a)({},(function(){var t=this,n=t._self._c;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"itext-pdf-导出"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#itext-pdf-导出"}},[t._v("#")]),t._v(" Itext PDF 导出")]),t._v(" "),n("p",[t._v("===============================")]),t._v(" "),n("blockquote",[n("p",[t._v("给我的文档系统添加了导出，本文记录PDF填坑小结。@pdai")])]),t._v(" "),n("h1",{attrs:{id:"pdf导出的实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pdf导出的实现"}},[t._v("#")]),t._v(" PDF导出的实现")]),t._v(" "),n("hr"),t._v(" "),n("h3",{attrs:{id:"导出流"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#导出流"}},[t._v("#")]),t._v(" 导出流")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('@RequestMapping(value = "export")\npublic void exportPdfNew(String mdContent, String type, HttpServletResponse response) {\n\tresponse.reset();\n\tresponse.setContentType("multipart/form-data");\n\n\tString title = "file";\n\tString author = "pdai";\n\tString mdFileContent = "";\n\n\tServletOutputStream out = null;\n\ttry {\n\t\tbyte[] fileBytes = null;\n\t\t\n\t\tString htmlFile = StringEscapeUtils.unescapeHtml4(mdContent);\n\t\t\n\t\tString cleanedHtmlFile = htmlFile.replace("<img", "<img style=\\"display:inline-block;width:100%;max-width:650px;\\" ");\n\t\tcleanedHtmlFile = cleanHtml(cleanedHtmlFile);\n\t\tfileBytes = convert(author, cleanedHtmlFile);\n\t\tresponse.setHeader("Content-Disposition",\n\t\t\t\t"inline; filename=\\"" + title + "_" + System.currentTimeMillis() + ".pdf\\"");\n\t\t\t\n\t\tout = response.getOutputStream();\n\t\tout.write(fileBytes);\n\t\tout.close();\n\t\tout.flush();\n\t} catch (Exception e) {\n\t\tSystem.out.println(e);\n\t}\n}\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br")])]),n("h3",{attrs:{id:"清理html"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#清理html"}},[t._v("#")]),t._v(" 清理HTML")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('public static String cleanHtml(String input) throws ConversionException, IOException {\n\tInputStream stringAsStream;\n\ttry {\n\t\tstringAsStream = new ByteArrayInputStream(input.getBytes("UTF-8"));\n\t} catch (UnsupportedEncodingException e) {\n\t\tthrow ConversionException.HTML_TO_PDF_EXCEPTION;\n\t}\n\tHtmlCleaner cleaner = new HtmlCleaner();\n\tTagNode node = cleaner.clean(stringAsStream, "UTF-8");\n\n\tTagNode t = new TagNode("root");\n\tt.addChild(node);\n\n\tString html = cleaner.getInnerHtml(t);\n\treturn html;\n}\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br")])]),n("h3",{attrs:{id:"页眉页脚支持"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#页眉页脚支持"}},[t._v("#")]),t._v(" 页眉页脚支持")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('public class HeaderFooterEvent extends PdfPageEventHelper {\n\tString header, author;\n\tPdfTemplate total;\n\n\tpublic void setHeader(String header) {\n\t\tthis.header = header;\n\t}\n\t\n\tpublic void setAuthor(String author) {\n\t\tthis.author = author;\n\t}\n\n\tpublic void onOpenDocument(PdfWriter writer, Document document) {\n\t\ttotal = writer.getDirectContent().createTemplate(30, 16);\n\t}\n\n//\tpublic void onEndPage(PdfWriter writer, Document document) {\n//\t\tPdfPTable table = new PdfPTable(3);\n//\t\ttry {\n//\t\t\ttable.setWidths(new int[] { 60, 24, 2 });\n//\t\t\ttable.setTotalWidth(600);\n//\t\t\ttable.setLockedWidth(true);\n//\t\t\ttable.getDefaultCell().setFixedHeight(40);\n//\t\t\ttable.getDefaultCell().setBorder(Rectangle.BOX);\n//\t\t\ttable.getDefaultCell().setBorderWidth(0.1f);\n//\t\t\ttable.getDefaultCell().setBorderColor(Color.gray);\n//\n//\t\t\ttable.addCell(header);\n//\t\t\ttable.getDefaultCell().setHorizontalAlignment(Element.ALIGN_RIGHT);\n//\t\t\ttable.addCell(String.format("Page %d of", writer.getPageNumber()));\n//\t\t\tPdfPCell cell = new PdfPCell(Image.getInstance(total));\n//\t\t\tcell.setBorder(Rectangle.BOTTOM);\n//\t\t\ttable.addCell(cell);\n//\t\t\ttable.writeSelectedRows(0, -1, 34, 803, writer.getDirectContent());\n//\n//\t\t} catch (DocumentException de) {\n//\t\t\tthrow new ExceptionConverter(de);\n//\t\t}\n//\t}\n\t\n\tpublic void onEndPage(PdfWriter writer, Document document) {  \n        \n        PdfContentByte cb = writer.getDirectContent();  \n        cb.saveState();  \n  \n        cb.beginText();  \n        BaseFont bf = null;  \n        try {  \n            bf = BaseFont.createFont(BaseFont.HELVETICA, BaseFont.WINANSI, BaseFont.EMBEDDED);\n        } catch (Exception e) {  \n            e.printStackTrace();  \n        }  \n        cb.setColorFill(Color.GRAY);\n        cb.setFontAndSize(bf, 10);  \n        \n          \n        //Header  \n        float x = document.top(-10);  \n          \n        //左  \n        cb.showTextAligned(PdfContentByte.ALIGN_LEFT,  \n                           "Author: " + author,   \n                           document.left(), x, 0);  \n        //中  \n//        cb.showTextAligned(PdfContentByte.ALIGN_CENTER,  \n//                            writer.getPageNumber()+ " page",  \n//                           (document.right() + document.left())/2,  \n//                           x, 0);  \n        //右  \n        cb.showTextAligned(PdfContentByte.ALIGN_RIGHT,  \n                           "Email: suzhou.daipeng@gmail.com",  \n                           document.right(), x, 0);  \n  \n        //Footer  \n        float y = document.bottom(-10);  \n  \n        //左  \n        cb.showTextAligned(PdfContentByte.ALIGN_LEFT,  \n                           "Confidential",  \n                           document.left(), y, 0);  \n        //中  \n\t\tcb.showTextAligned(PdfContentByte.ALIGN_CENTER,  \n\t\t\t\tString.format("- %d -", writer.getPageNumber()),  \n\t\t                   (document.right() + document.left())/2,  \n\t\t                   y, 0);\n        //右  \n//        cb.showTextAligned(PdfContentByte.ALIGN_RIGHT,  \n//                           "F-Right",  \n//                           document.right(), y, 0);  \n  \n        cb.endText();  \n          \n        cb.restoreState();  \n    }  \n\n\tpublic void onCloseDocument(PdfWriter writer, Document document) {\n\t\tColumnText.showTextAligned(total, Element.ALIGN_LEFT, new Phrase(String.valueOf(writer.getPageNumber() - 1)), 2,\n\t\t\t\t2, 0);\n\n\t}\n}\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br"),n("span",{staticClass:"line-number"},[t._v("35")]),n("br"),n("span",{staticClass:"line-number"},[t._v("36")]),n("br"),n("span",{staticClass:"line-number"},[t._v("37")]),n("br"),n("span",{staticClass:"line-number"},[t._v("38")]),n("br"),n("span",{staticClass:"line-number"},[t._v("39")]),n("br"),n("span",{staticClass:"line-number"},[t._v("40")]),n("br"),n("span",{staticClass:"line-number"},[t._v("41")]),n("br"),n("span",{staticClass:"line-number"},[t._v("42")]),n("br"),n("span",{staticClass:"line-number"},[t._v("43")]),n("br"),n("span",{staticClass:"line-number"},[t._v("44")]),n("br"),n("span",{staticClass:"line-number"},[t._v("45")]),n("br"),n("span",{staticClass:"line-number"},[t._v("46")]),n("br"),n("span",{staticClass:"line-number"},[t._v("47")]),n("br"),n("span",{staticClass:"line-number"},[t._v("48")]),n("br"),n("span",{staticClass:"line-number"},[t._v("49")]),n("br"),n("span",{staticClass:"line-number"},[t._v("50")]),n("br"),n("span",{staticClass:"line-number"},[t._v("51")]),n("br"),n("span",{staticClass:"line-number"},[t._v("52")]),n("br"),n("span",{staticClass:"line-number"},[t._v("53")]),n("br"),n("span",{staticClass:"line-number"},[t._v("54")]),n("br"),n("span",{staticClass:"line-number"},[t._v("55")]),n("br"),n("span",{staticClass:"line-number"},[t._v("56")]),n("br"),n("span",{staticClass:"line-number"},[t._v("57")]),n("br"),n("span",{staticClass:"line-number"},[t._v("58")]),n("br"),n("span",{staticClass:"line-number"},[t._v("59")]),n("br"),n("span",{staticClass:"line-number"},[t._v("60")]),n("br"),n("span",{staticClass:"line-number"},[t._v("61")]),n("br"),n("span",{staticClass:"line-number"},[t._v("62")]),n("br"),n("span",{staticClass:"line-number"},[t._v("63")]),n("br"),n("span",{staticClass:"line-number"},[t._v("64")]),n("br"),n("span",{staticClass:"line-number"},[t._v("65")]),n("br"),n("span",{staticClass:"line-number"},[t._v("66")]),n("br"),n("span",{staticClass:"line-number"},[t._v("67")]),n("br"),n("span",{staticClass:"line-number"},[t._v("68")]),n("br"),n("span",{staticClass:"line-number"},[t._v("69")]),n("br"),n("span",{staticClass:"line-number"},[t._v("70")]),n("br"),n("span",{staticClass:"line-number"},[t._v("71")]),n("br"),n("span",{staticClass:"line-number"},[t._v("72")]),n("br"),n("span",{staticClass:"line-number"},[t._v("73")]),n("br"),n("span",{staticClass:"line-number"},[t._v("74")]),n("br"),n("span",{staticClass:"line-number"},[t._v("75")]),n("br"),n("span",{staticClass:"line-number"},[t._v("76")]),n("br"),n("span",{staticClass:"line-number"},[t._v("77")]),n("br"),n("span",{staticClass:"line-number"},[t._v("78")]),n("br"),n("span",{staticClass:"line-number"},[t._v("79")]),n("br"),n("span",{staticClass:"line-number"},[t._v("80")]),n("br"),n("span",{staticClass:"line-number"},[t._v("81")]),n("br"),n("span",{staticClass:"line-number"},[t._v("82")]),n("br"),n("span",{staticClass:"line-number"},[t._v("83")]),n("br"),n("span",{staticClass:"line-number"},[t._v("84")]),n("br"),n("span",{staticClass:"line-number"},[t._v("85")]),n("br"),n("span",{staticClass:"line-number"},[t._v("86")]),n("br"),n("span",{staticClass:"line-number"},[t._v("87")]),n("br"),n("span",{staticClass:"line-number"},[t._v("88")]),n("br"),n("span",{staticClass:"line-number"},[t._v("89")]),n("br"),n("span",{staticClass:"line-number"},[t._v("90")]),n("br"),n("span",{staticClass:"line-number"},[t._v("91")]),n("br"),n("span",{staticClass:"line-number"},[t._v("92")]),n("br"),n("span",{staticClass:"line-number"},[t._v("93")]),n("br"),n("span",{staticClass:"line-number"},[t._v("94")]),n("br"),n("span",{staticClass:"line-number"},[t._v("95")]),n("br"),n("span",{staticClass:"line-number"},[t._v("96")]),n("br"),n("span",{staticClass:"line-number"},[t._v("97")]),n("br"),n("span",{staticClass:"line-number"},[t._v("98")]),n("br"),n("span",{staticClass:"line-number"},[t._v("99")]),n("br"),n("span",{staticClass:"line-number"},[t._v("100")]),n("br"),n("span",{staticClass:"line-number"},[t._v("101")]),n("br")])]),n("h1",{attrs:{id:"pdf中文支持"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pdf中文支持"}},[t._v("#")]),t._v(" PDF中文支持")]),t._v(" "),n("hr"),t._v(" "),n("blockquote",[n("p",[t._v("常见的中文支持思路:")])]),t._v(" "),n("ul",[n("li",[t._v("添加itext-asian.jar")]),t._v(" "),n("li",[t._v("Windows字体添加到项目中，导出时通过创建该字体对象；")]),t._v(" "),n("li",[t._v("classpath设置")])]),t._v(" "),n("p",[t._v("简单demo如下:")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('package oliver.itext.demo;  \nimport java.io.File;  \nimport java.io.FileOutputStream;  \nimport java.io.IOException;  \nimport java.io.OutputStream;  \nimport com.itextpdf.text.Document;  \nimport com.itextpdf.text.DocumentException;  \nimport com.itextpdf.text.Font;  \nimport com.itextpdf.text.Paragraph;  \nimport com.itextpdf.text.pdf.BaseFont;  \nimport com.itextpdf.text.pdf.PdfWriter;  \n  \npublic class PDF2Chinese  \n{  \n    public static void main(String[] args) throws DocumentException, IOException  \n    {  \n        Document document = new Document();  \n        OutputStream os = new FileOutputStream(new File("chinese.pdf"));  \n        PdfWriter.getInstance(document,os);  \n        document.open();  \n        //方法一: 使用Windows系统字体(TrueType)  \n        BaseFont baseFont = BaseFont.createFont("C:/Windows/Fonts/SIMYOU.TTF",BaseFont.IDENTITY_H,BaseFont.NOT_EMBEDDED);  \n          \n        //方法二: 使用iTextAsian.jar中的字体  \n        //BaseFont baseFont = BaseFont.createFont("STSong-Light",BaseFont.IDENTITY_H,BaseFont.NOT_EMBEDDED);  \n          \n        //方法三: 使用资源字体(ClassPath)  \n        ////BaseFont baseFont = BaseFont.createFont("/SIMYOU.TTF",BaseFont.IDENTITY_H,BaseFont.NOT_EMBEDDED);  \n          \n        Font font = new Font(baseFont);  \n        document.add(new Paragraph("解决中文问题了！",font));  \n        document.close();  \n    }  \n} \n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br"),n("span",{staticClass:"line-number"},[t._v("24")]),n("br"),n("span",{staticClass:"line-number"},[t._v("25")]),n("br"),n("span",{staticClass:"line-number"},[t._v("26")]),n("br"),n("span",{staticClass:"line-number"},[t._v("27")]),n("br"),n("span",{staticClass:"line-number"},[t._v("28")]),n("br"),n("span",{staticClass:"line-number"},[t._v("29")]),n("br"),n("span",{staticClass:"line-number"},[t._v("30")]),n("br"),n("span",{staticClass:"line-number"},[t._v("31")]),n("br"),n("span",{staticClass:"line-number"},[t._v("32")]),n("br"),n("span",{staticClass:"line-number"},[t._v("33")]),n("br"),n("span",{staticClass:"line-number"},[t._v("34")]),n("br")])]),n("h3",{attrs:{id:"通过itextfontresolvert添加字体"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#通过itextfontresolvert添加字体"}},[t._v("#")]),t._v(" 通过ITextFontResolvert添加字体")]),t._v(" "),n("p",[t._v("将Windows下fonts中所需要的字体拷贝到项目classpath下:")]),t._v(" "),n("p",[t._v("在代码中通过"),n("code",[t._v("ITextFontResolver")]),t._v("添加字体，具体代码如下:")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v('public byte[] convert(String author, String input)\n\t\t\tthrows ConversionException, IOException, com.lowagie.text.DocumentException {\n\tITextRenderer renderer = new ITextRenderer();\n\trenderer.setDocumentFromString(new String(input.getBytes()));\n\trenderer.setPDFVersion(PdfWriter.VERSION_1_7);\n\tHeaderFooterEvent headerFooterEvent = new HeaderFooterEvent();\n\theaderFooterEvent.setAuthor(author);\n\trenderer.setPdfPageEvent(headerFooterEvent);\n\tITextFontResolver fontResolver = renderer.getFontResolver();\n\tfontResolver.addFont(fontPath+"MSYH.TTC", BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);// 微软雅黑\n\tfontResolver.addFont(fontPath+"MSYHBD.TTC", BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\n\tfontResolver.addFont(fontPath+"MSYHL.TTC", BaseFont.IDENTITY_H, BaseFont.NOT_EMBEDDED);\n\t\n\trenderer.layout();\n\tByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n\trenderer.createPDF(outputStream);\n\tbyte[] bytes = outputStream.toByteArray();\n\treturn bytes;\n}\n')])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br")])]),n("h1",{attrs:{id:"pdf-linux环境下中文字体乱码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pdf-linux环境下中文字体乱码"}},[t._v("#")]),t._v(" PDF Linux环境下中文字体乱码")]),t._v(" "),n("hr"),t._v(" "),n("blockquote",[n("p",[t._v("用itext生成pdf在windows环境下没有出现中文乱码而在linux下出现中文乱码，打开pdf查看pdf编码，以及显示的编码，发现编码并没有对应。原因是使用的宋体和微软雅黑在linux环境下并没有安装。")])]),t._v(" "),n("h3",{attrs:{id:"解决方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决方法"}},[t._v("#")]),t._v(" 解决方法")]),t._v(" "),n("ul",[n("li",[n("p",[t._v("由于我这边PDF生成是通过HTML转化的，所以第一步先导出HTML，去查看需要用哪些字体文件；")])]),t._v(" "),n("li",[n("p",[t._v("到windows环境下将所需字体拷贝到linux下。(simsun.ttc(宋体), msyf.ttf(微软雅黑))")])]),t._v(" "),n("li",[n("p",[t._v("到linux环境下创建目录")])])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("mkdir -pv /usr/share/fonts/chinese/TrueType\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br")])]),n("p",[t._v("将字体放入目录下")]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("cd /usr/share/fonts/chinese/TrueType\nchmod 755 * 为字体赋予可执行权限\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br")])]),n("ul",[n("li",[t._v("建立字体缓存")])]),t._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[t._v("mkfontscale (如果提示 mkfontscale: command not found，需自行安装 # yum install mkfontscale )\nmkfontdir\nfc-cache -fv (如果提示 fc-cache: command not found，则需要安装# yum install fontconfig )\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br")])]),n("ul",[n("li",[t._v("reboot重启系统")])]),t._v(" "),n("blockquote",[n("p",[t._v("经不同Linux环境测试，以上步骤必须顺序全部执行， 建立字体缓存必须是在字体拷贝完成之后顺序执行 mkfontscale，mkfontdir，fc-cache -fv)")])])])}),[],!1,null,null,null);n.default=a.exports}}]);