(window.webpackJsonp=window.webpackJsonp||[]).push([[539],{3674:function(e,s,t){"use strict";t.r(s);var a=t(7),n=Object(a.a)({},(function(){var e=this,s=e._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"springboot集成mysql-mybatis-注解方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#springboot集成mysql-mybatis-注解方式"}},[e._v("#")]),e._v(" SpringBoot集成MySQL - MyBatis 注解方式")]),e._v(" "),s("p",[e._v("=====================================================================")]),e._v(" "),s("blockquote",[s("p",[e._v("上文主要介绍了Spring集成MyBatis访问MySQL，采用的是XML配置方式；我们知道除了XML配置方式，MyBatis还支持注解方式。本文主要介绍SpringBoot+MyBatis注解方式。@pdai")])]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#springboot%E9%9B%86%E6%88%90mysql---mybatis-%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F"}},[e._v("SpringBoot集成MySQL - MyBatis 注解方式")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%87%86%E5%A4%87%E7%9F%A5%E8%AF%86"}},[e._v("准备知识")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E5%9F%BA%E6%9C%AC%E6%9F%A5%E6%94%B9%E5%88%A0%E6%93%8D%E4%BD%9C"}},[e._v("基本查改删操作")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E6%9F%A5%E8%AF%A2%E6%93%8D%E4%BD%9C"}},[e._v("查询操作")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#results%E5%92%8Cresult%E6%B3%A8%E8%A7%A3"}},[e._v("@Results和@Result注解")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#select%E5%92%8Cparam%E6%B3%A8%E8%A7%A3"}},[e._v("@Select和@Param注解")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#resultmap%E6%B3%A8%E8%A7%A3"}},[e._v("@ResultMap注解")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E8%A1%A8%E5%85%B3%E8%81%94%E6%9F%A5%E8%AF%A2"}},[e._v("表关联查询")])])])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E6%8F%92%E5%85%A5%E6%93%8D%E4%BD%9C"}},[e._v("插入操作")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#insert%E6%B3%A8%E8%A7%A3"}},[e._v("@Insert注解")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E8%BF%94%E5%9B%9Einsert%E5%90%8E%E5%AE%9E%E4%BD%93%E7%9A%84%E4%B8%BB%E9%94%AE%E5%80%BC"}},[e._v("返回Insert后实体的主键值")])])])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E6%9B%B4%E6%96%B0%E6%93%8D%E4%BD%9C"}},[e._v("更新操作")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#update-%E6%B3%A8%E8%A7%A3"}},[e._v("@Update 注解")])])])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E5%88%A0%E9%99%A4%E6%93%8D%E4%BD%9C"}},[e._v("删除操作")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#delete-%E6%B3%A8%E8%A7%A3"}},[e._v("@Delete 注解")])])])])])]),e._v(" "),s("li",[s("a",{attrs:{href:"#provider%E6%B3%A8%E8%A7%A3"}},[e._v("Provider注解")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3"}},[e._v("进一步理解")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"#%E5%85%B6%E5%AE%83%E6%B3%A8%E8%A7%A3"}},[e._v("其它注解")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#xml%E6%96%B9%E5%BC%8F%E5%92%8C%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E8%9E%8D%E5%90%88"}},[e._v("xml方式和注解方式融合")])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%BA%AF%E6%B3%A8%E8%A7%A3%E6%96%B9%E5%BC%8F%E4%B8%8D%E6%98%AF%E6%9C%80%E4%BD%B3%E9%80%89%E6%8B%A9"}},[e._v("为什么纯注解方式不是最佳选择?")])])])]),e._v(" "),s("li",[s("a",{attrs:{href:"#%E7%A4%BA%E4%BE%8B%E6%BA%90%E7%A0%81"}},[e._v("示例源码")])])])])]),e._v(" "),s("h1",{attrs:{id:"准备知识"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#准备知识"}},[e._v("#")]),e._v(" 准备知识")]),e._v(" "),s("hr"),e._v(" "),s("blockquote",[s("p",[e._v("MyBatis的相关知识体系。")])]),e._v(" "),s("p",[e._v("具体可以参考 "),s("a",{attrs:{href:"https://pdai.tech/md/spring/springboot/springboot-x-mysql-mybatis-xml.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("SpringBoot集成MySQL - MyBatis XML方式"),s("OutboundLink")],1)]),e._v(" "),s("p",[e._v("在构建知识体系时：我们最重要的"),s("strong",[e._v("目标并不是如何使用注解方式")]),e._v("，而是要理解：")]),e._v(" "),s("ol",[s("li",[e._v("对于有原有xml方式改为注解方式（一定要有对比），如何写？\n"),s("ol",[s("li",[e._v("基本的CRUD怎么用注解写？")]),e._v(" "),s("li",[e._v("对于复杂的动态SQL如何写？")]),e._v(" "),s("li",[e._v("对于表关联的如何写？")])])]),e._v(" "),s("li",[e._v("为什么xml方式依然是比注解方式使用广泛？\n"),s("ol",[s("li",[e._v("xml方式和注解方式混合使用？")])])]),e._v(" "),s("li",[e._v("注解方式是如何工作的呢？")])]),e._v(" "),s("h1",{attrs:{id:"基本查改删操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#基本查改删操作"}},[e._v("#")]),e._v(" 基本查改删操作")]),e._v(" "),s("hr"),e._v(" "),s("blockquote",[s("p",[e._v("我们从最基本的增删改操作开始，对比xml方式进行理解。")])]),e._v(" "),s("h3",{attrs:{id:"查询操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#查询操作"}},[e._v("#")]),e._v(" 查询操作")]),e._v(" "),s("h4",{attrs:{id:"results和-result注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#results和-result注解"}},[e._v("#")]),e._v(" @Results和@Result注解")]),e._v(" "),s("blockquote",[s("p",[e._v("对于xml配置查询时定义的ResultMap, 在注解中如何定义呢？")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<resultMap type="tech.pdai.springboot.mysql57.mybatis.xml.entity.User" id="UserResult1">\n  <id     property="id"       \tcolumn="id"      \t\t/>\n  <result property="userName"     column="user_name"    \t/>\n  <result property="password"     column="password"    \t/>\n  <result property="email"        column="email"        \t/>\n  <result property="phoneNumber"  column="phone_number"  \t/>\n  <result property="description"  column="description"  \t/>\n  <result property="createTime"   column="create_time"  \t/>\n  <result property="updateTime"   column="update_time"  \t/>\n</resultMap>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[e._v("使用注解方式，用@Results注解对应")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Results(\n        id = "UserResult1",\n        value = {\n                @Result(id = true, property = "id", column = "id"),\n                @Result(property = "userName", column = "user_name"),\n                @Result(property = "password", column = "password"),\n                @Result(property = "email", column = "email"),\n                @Result(property = "phoneNumber", column = "phone_number"),\n                @Result(property = "description", column = "description"),\n                @Result(property = "createTime", column = "create_time"),\n                @Result(property = "updateTime", column = "update_time")\n        }\n)\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br")])]),s("h4",{attrs:{id:"select和-param注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#select和-param注解"}},[e._v("#")]),e._v(" @Select和@Param注解")]),e._v(" "),s("blockquote",[s("p",[e._v("对于查询，用@Select注解；对于参数, 使用@Param注解")])]),e._v(" "),s("p",[e._v("所以根据用户ID查询用户，使用注解方式写法如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Results(\n        id = "UserResult1",\n        value = {\n                @Result(id = true, property = "id", column = "id"),\n                @Result(property = "userName", column = "user_name"),\n                @Result(property = "password", column = "password"),\n                @Result(property = "email", column = "email"),\n                @Result(property = "phoneNumber", column = "phone_number"),\n                @Result(property = "description", column = "description"),\n                @Result(property = "createTime", column = "create_time"),\n                @Result(property = "updateTime", column = "update_time")\n        }\n)\n@Select("select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time from tb_user u where id = #{id}")\nUser findById1(@Param("id") Long id);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br")])]),s("h4",{attrs:{id:"resultmap注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#resultmap注解"}},[e._v("#")]),e._v(" @ResultMap注解")]),e._v(" "),s("blockquote",[s("p",[e._v("xml配置查询时定义的ResultMap是可以复用的，那么我们上面通过@Results定义在某个方法上的，如何复用呢？")])]),e._v(" "),s("p",[e._v("比如查询所有用户返回用户实体@Results是和查询单个用户一致的，那么我们可以通过@ResultMap指定返回值对应关系")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@ResultMap("UserResult1")\n@Select("select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time from tb_user u")\nUser findAll1();\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("由此你可以猜到，@ResultMap定义在哪个方法上并没有什么关系，因为它会被优先通过注解解析为数据库字段与Java字段的映射关系。")]),e._v(" "),s("h4",{attrs:{id:"表关联查询"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#表关联查询"}},[e._v("#")]),e._v(" 表关联查询")]),e._v(" "),s("blockquote",[s("p",[e._v("用户和角色存在着一对多的关系，上面的查询只是查询了用户的基本信息，如何关联查询（查询用户同时返回角色信息）呢？")])]),e._v(" "),s("p",[e._v("我们看下xml配置方式是如何做到的？")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<resultMap type="tech.pdai.springboot.mysql57.mybatis.xml.entity.User" id="UserResult">\n  <id     property="id"       \tcolumn="id"      \t\t/>\n  <result property="userName"     column="user_name"    \t/>\n  <result property="password"     column="password"    \t/>\n  <result property="email"        column="email"        \t/>\n  <result property="phoneNumber"  column="phone_number"  \t/>\n  <result property="description"  column="description"  \t/>\n  <result property="createTime"   column="create_time"  \t/>\n  <result property="updateTime"   column="update_time"  \t/>\n  <collection property="roles" ofType="tech.pdai.springboot.mysql57.mybatis.xml.entity.Role">\n    <result property="id" column="id"  />\n    <result property="name" column="name"  />\n    <result property="roleKey" column="role_key"  />\n    <result property="description" column="description"  />\n    <result property="createTime"   column="create_time"  \t/>\n    <result property="updateTime"   column="update_time"  \t/>\n  </collection>\n</resultMap>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br")])]),s("p",[e._v("使用注解方式, 可以通过@Results+@Many注解")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Results(\n        id = "UserResult",\n        value = {\n                @Result(id = true, property = "id", column = "id"),\n                @Result(property = "userName", column = "user_name"),\n                @Result(property = "password", column = "password"),\n                @Result(property = "email", column = "email"),\n                @Result(property = "phoneNumber", column = "phone_number"),\n                @Result(property = "description", column = "description"),\n                @Result(property = "createTime", column = "create_time"),\n                @Result(property = "updateTime", column = "update_time"),\n                @Result(property = "roles", column = "id", many = @Many(select = "tech.pdai.springboot.mysql57.mybatis.anno.dao.IRoleDao.findRoleByUserId", fetchType = FetchType.EAGER))\n        }\n)\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br")])]),s("p",[e._v("其中findRoleByUserId是通过user表中的id查找Role, 具体方法如下")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Results(\n            id = "RoleResult",\n            value = {\n                    @Result(id = true, property = "id", column = "id"),\n                    @Result(property = "name", column = "name"),\n                    @Result(property = "roleKey", column = "role_key"),\n                    @Result(property = "description", column = "description"),\n                    @Result(property = "createTime", column = "create_time"),\n                    @Result(property = "updateTime", column = "update_time")\n            }\n    )\n    @Select("select r.id, r.name, r.role_key, r.description, r.create_time, r.update_time from tb_role r, tb_user_role ur where r.id = ur.user_id and ur.user_id = #{userId}")\n    List<Role> findRoleByUserId(Long userId);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br")])]),s("p",[e._v("对于一对一的可以使用@One注解。")]),e._v(" "),s("h3",{attrs:{id:"插入操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#插入操作"}},[e._v("#")]),e._v(" 插入操作")]),e._v(" "),s("blockquote",[s("p",[e._v("涉及插入操作的主要注解有：@Insert, @SelectKey等。")])]),e._v(" "),s("h4",{attrs:{id:"insert注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#insert注解"}},[e._v("#")]),e._v(" @Insert注解")]),e._v(" "),s("p",[e._v("对于插入操作，在xml配置可以定义为：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<insert id="save" parameterType="tech.pdai.springboot.mysql57.mybatis.xml.entity.User" useGeneratedKeys="true" keyProperty="id">\n \t\tinsert into tb_user(\n \t\t\t<if test="userName != null and userName != \'\'">user_name,</if>\n\t\t\t<if test="password != null and password != \'\'">password,</if>\n \t\t\t<if test="email != null and email != \'\'">email,</if>\n\t\t\t<if test="phoneNumber != null and phoneNumber != \'\'">phone_number,</if>\n \t\t\t<if test="description != null and description != \'\'">description,</if>\n \t\t\tcreate_time,\n\t\t\tupdate_time\n \t\t)values(\n \t\t\t<if test="userName != null and userName != \'\'">#{userName},</if>\n\t\t\t<if test="password != null and password != \'\'">#{password},</if>\n \t\t\t<if test="email != null and email != \'\'">#{email},</if>\n \t\t\t<if test="phoneNumber != null and phoneNumber != \'\'">#{phoneNumber},</if>\n \t\t\t<if test="description != null and description != \'\'">#{description},</if>\n \t\t\tsysdate(),\n\t\t\tsysdate()\n \t\t)\n\t</insert>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br")])]),s("p",[e._v("特别是，这里通过"),s("code",[e._v("<if>")]),e._v("判断条件更新的情况应该如何在注解中写呢？")]),e._v(" "),s("p",[e._v("可以通过@Insert + "),s("code",[e._v("<script>")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Insert({"<script> ", "insert into tb_user(\\n" +\n        " <if test=\\"userName != null and userName != \'\'\\">user_name,</if>\\n" +\n        " <if test=\\"password != null and password != \'\'\\">password,</if>\\n" +\n        " <if test=\\"email != null and email != \'\'\\">email,</if>\\n" +\n        " <if test=\\"phoneNumber != null and phoneNumber != \'\'\\">phone_number,</if>\\n" +\n        " <if test=\\"description != null and description != \'\'\\">description,</if>\\n" +\n        " create_time,\\n" +\n        " update_time\\n" +\n        " )values(\\n" +\n        " <if test=\\"userName != null and userName != \'\'\\">#{userName},</if>\\n" +\n        " <if test=\\"password != null and password != \'\'\\">#{password},</if>\\n" +\n        " <if test=\\"email != null and email != \'\'\\">#{email},</if>\\n" +\n        " <if test=\\"phoneNumber != null and phoneNumber != \'\'\\">#{phoneNumber},</if>\\n" +\n        " <if test=\\"description != null and description != \'\'\\">#{description},</if>\\n" +\n        " sysdate(),\\n" +\n        " sysdate()\\n" +\n        " )", " <\/script>"})\n@Options(useGeneratedKeys = true, keyProperty = "id")\nint save(User user);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br")])]),s("h4",{attrs:{id:"返回insert后实体的主键值"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#返回insert后实体的主键值"}},[e._v("#")]),e._v(" 返回Insert后实体的主键值")]),e._v(" "),s("blockquote",[s("p",[e._v("上述"),s("code",[e._v('@Options(useGeneratedKeys = true, keyProperty = "id")')]),e._v(" 表示什么意思呢？")])]),e._v(" "),s("p",[e._v("表示，如果数据库提供了自增列生成Key的方式（比如这里的id), 并且需要返回自增主键时，可以通过这种方式返回实体。")]),e._v(" "),s("p",[e._v("那么，如果id的自增不使用数据库自增主键时, 在xml中可以使用SelectKey：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<selectKey keyColumn="id" resultType="long" keyProperty="id" order="AFTER">\n    SELECT LAST_INSERT_ID()\n</selectKey>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("p",[e._v("对应着注解：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@SelectKey(statement = "SELECT LAST_INSERT_ID()", keyColumn = "id", keyProperty = "id", resultType = Long.class, before = false)\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("ul",[s("li",[s("code",[e._v("before = false")]),e._v(', 相当于XML中的order="AFTRE"，这是MySql数据库的配置。')]),e._v(" "),s("li",[s("code",[e._v("before = true")]),e._v(', 相当于XML中的order="BEFORE"，这是Oracle数据库的配置。')])]),e._v(" "),s("p",[e._v("注意事项：不同的数据库statement的值会不同，上面中的值适用于MySql数据库，使用其他类型的数据库时要注意修改。")]),e._v(" "),s("h3",{attrs:{id:"更新操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#更新操作"}},[e._v("#")]),e._v(" 更新操作")]),e._v(" "),s("blockquote",[s("p",[e._v("涉及更新操作的主要注解有：@Update等。")])]),e._v(" "),s("h4",{attrs:{id:"update-注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#update-注解"}},[e._v("#")]),e._v(" @Update 注解")]),e._v(" "),s("p",[e._v("对于xml的更新操作如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<update id="update" parameterType="tech.pdai.springboot.mysql57.mybatis.xml.entity.User">\n  update tb_user\n  <set>\n    <if test="userName != null and userName != \'\'">user_name = #{userName},</if>\n    <if test="email != null and email != \'\'">email = #{email},</if>\n    <if test="phoneNumber != null and phoneNumber != \'\'">phone_number = #{phoneNumber},</if>\n    <if test="description != null and description != \'\'">description = #{description},</if>\n    update_time = sysdate()\n  </set>\n  where id = #{id}\n</update>\n\n<update id="updatePassword" parameterType="tech.pdai.springboot.mysql57.mybatis.xml.entity.User">\n  update tb_user\n  <set>\n    password = #{password}, update_time = sysdate()\n  </set>\n  where id = #{id}\n</update>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br")])]),s("p",[e._v("对应的注解写法如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Update({"update tb_user set password = #{password}, update_time = sysdate()", " where id = #{id}"})\nint updatePassword(User user);\n\n@Update({"<script> ", "update tb_user\\n" +\n        " <set>\\n" +\n        " <if test=\\"userName != null and userName != \'\'\\">user_name = #{userName},</if>\\n" +\n        " <if test=\\"email != null and email != \'\'\\">email = #{email},</if>\\n" +\n        " <if test=\\"phoneNumber != null and phoneNumber != \'\'\\">phone_number = #{phoneNumber},</if>\\n" +\n        " <if test=\\"description != null and description != \'\'\\">description = #{description},</if>\\n" +\n        " update_time = sysdate()\\n" +\n        " </set>\\n" +\n        " where id = #{id}", " <\/script>"})\nint update(User user);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br")])]),s("h3",{attrs:{id:"删除操作"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#删除操作"}},[e._v("#")]),e._v(" 删除操作")]),e._v(" "),s("blockquote",[s("p",[e._v("涉及删除操作的主要注解有：@Delete等。")])]),e._v(" "),s("h4",{attrs:{id:"delete-注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#delete-注解"}},[e._v("#")]),e._v(" @Delete 注解")]),e._v(" "),s("p",[e._v("对于xml的删除操作如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<delete id="deleteById" parameterType="Long">\n  delete from tb_user where id = #{id}\n</delete>\n\n<delete id="deleteByIds" parameterType="Long">\n  delete from tb_user where id in\n  <foreach collection="array" item="id" open="(" separator="," close=")">\n    #{id}\n      </foreach> \n</delete>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br")])]),s("p",[e._v("对应的注解写法如下：")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@Delete("delete from tb_user where id = #{id}")\nint deleteById(Long id);\n\n@Delete({"<script> ", "delete from tb_user where id in\\n" +\n        "<foreach collection=\\"array\\" item=\\"id\\" open=\\"(\\" separator=\\",\\" close=\\")\\">\\n" +\n        "#{id}\\n" +\n        "</foreach>", " <\/script>"})\nint deleteByIds(Long[] ids);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br")])]),s("h1",{attrs:{id:"provider注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#provider注解"}},[e._v("#")]),e._v(" Provider注解")]),e._v(" "),s("hr"),e._v(" "),s("blockquote",[s("p",[e._v("其实你可以发现通过注解方式，对于有一些需要通过动态构建查询条件的操作是非常不方便的。MyBatis的作者们自然就想到了动态构建SQL，动态构建SQL的方式是配合@Provider注解来完成的。")])]),e._v(" "),s("p",[e._v("MyBatis提供了4种Provider注解，分别是@SelectProvider、@InsertProvider、@UpdateProvider和@DeleteProvider。")]),e._v(" "),s("p",[e._v("这里以@SelectProvider为例来根据Id查询User：")]),e._v(" "),s("ol",[s("li",[e._v("定义包含自定义生成的动态SQL的类，比如UserDaoProvider")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('/**\n * @author pdai\n */\npublic class UserDaoProvider {\n\n    public String findById(final Long id) {\n        SQL sql = new SQL();\n        sql.SELECT("u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time");\n        sql.FROM("tb_user u");\n        sql.WHERE("id = " + id);\n        return sql.toString();\n    }\n}\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br")])]),s("ol",{attrs:{start:"2"}},[s("li",[e._v("通过@SelectProvider注解关联到定义的类和方法")])]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@ResultMap("UserResult")\n@SelectProvider(type = UserDaoProvider.class, method = "findById")\nUser findById2(Long id);\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("h1",{attrs:{id:"进一步理解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#进一步理解"}},[e._v("#")]),e._v(" 进一步理解")]),e._v(" "),s("hr"),e._v(" "),s("blockquote",[s("p",[e._v("让我们通过几个问题，进一步理解MyBatis注解方式。")])]),e._v(" "),s("h3",{attrs:{id:"其它注解"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#其它注解"}},[e._v("#")]),e._v(" 其它注解")]),e._v(" "),s("ul",[s("li",[s("p",[s("code",[e._v("@CacheNamespace")]),e._v(" ：为给定的命名空间 (比如类) 配置缓存。对应xml中的"),s("code",[e._v("<cache>")]),e._v("。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("@CacheNamespaceRef")]),e._v(" ：参照另外一个命名空间的缓存来使用。属性:value,应该是一个名空间的字 符串值(也就是类的完全限定名) 。对应xml中的"),s("code",[e._v("<cacheRef>")]),e._v("标签。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("@ConstructorArgs")]),e._v(" ：收集一组结果传递给一个劫夺对象的 构造方法。属性:value,是形式参数 的数组。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("@Arg")]),e._v(" ：单 独 的 构 造 方 法 参 数 , 是 ConstructorArgs 集合的一部分。属性: id,column,javaType,typeHandler。id 属性是布尔值, 来标识用于比较的属 性,和XML 元素相似。对应xml中的"),s("code",[e._v("<arg>")]),e._v("标签。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("@Case")]),e._v(" ：单独实例的值和它对应的映射。属性: value,type,results。Results 属性是结 果数组,因此这个注解和实际的 ResultMap 很相似,由下面的 Results 注解指定。对应xml中标签"),s("code",[e._v("<case>")]),e._v("。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("@TypeDiscriminator")]),e._v(" : 一组实例值被用来决定结果映射的表 现。 属性: column, javaType, jdbcType, typeHandler,cases。cases 属性就是实 例的数组。对应xml中标签"),s("code",[e._v("<discriminator>")]),e._v("。")])]),e._v(" "),s("li",[s("p",[s("code",[e._v("@Flush")]),e._v("： 在MyBatis 3.3以上版本，可以通过此注解在Mapper接口中调用SqlSession#flushStatements()。")])])]),e._v(" "),s("h3",{attrs:{id:"xml方式和注解方式融合"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#xml方式和注解方式融合"}},[e._v("#")]),e._v(" xml方式和注解方式融合")]),e._v(" "),s("p",[e._v("xml方式和注解方式是可以融合写的， 我们可以将复杂的SQL写在xml中")]),e._v(" "),s("p",[e._v("比如将resultMap定义在xml中")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('<resultMap type="tech.pdai.springboot.mysql57.mybatis.xml.entity.User" id="UserResult3">\n  <id     property="id"       \tcolumn="id"      \t\t/>\n  <result property="userName"     column="user_name"    \t/>\n  <result property="password"     column="password"    \t/>\n  <result property="email"        column="email"        \t/>\n  <result property="phoneNumber"  column="phone_number"  \t/>\n  <result property="description"  column="description"  \t/>\n  <result property="createTime"   column="create_time"  \t/>\n  <result property="updateTime"   column="update_time"  \t/>\n  <collection property="roles" ofType="tech.pdai.springboot.mysql57.mybatis.xml.entity.Role">\n    <result property="id" column="id"  />\n    <result property="name" column="name"  />\n    <result property="roleKey" column="role_key"  />\n    <result property="description" column="description"  />\n    <result property="createTime"   column="create_time"  \t/>\n    <result property="updateTime"   column="update_time"  \t/>\n  </collection>\n</resultMap>\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br")])]),s("p",[e._v("在方法中用@ResultMap")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('@ResultMap("UserResult3")\n@Select("select u.id, u.password, u.user_name, u.email, u.phone_number, u.description, u.create_time, u.update_time from tb_user u")\nUser findAll1();\n')])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br")])]),s("h3",{attrs:{id:"为什么纯注解方式不是最佳选择"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#为什么纯注解方式不是最佳选择"}},[e._v("#")]),e._v(" 为什么纯注解方式不是最佳选择?")]),e._v(" "),s("blockquote",[s("p",[e._v("纯注解方式为何很少大规模呢？ 说说我的一些看法")])]),e._v(" "),s("ul",[s("li",[e._v("对于复杂的SQL，特别是按照条件动态生成方式极为不便，即便有"),s("code",[e._v("<script>")]),e._v("， 代码的阅读体验和维护极为不佳；")]),e._v(" "),s("li",[e._v("对于复杂的SQL，即便有@Provider方式，这种充其量是一个半成品\n"),s("ul",[s("li",[e._v("不是所见即所得的写法，需要再定义额外的类和方法")]),e._v(" "),s("li",[e._v("动态构建时不便利")]),e._v(" "),s("li",[e._v("函数式编程成为主流，lambda方式才是未来")]),e._v(" "),s("li",[e._v("...")])])])]),e._v(" "),s("p",[e._v("这也是mybatis-plus等工具改进的地方。")]),e._v(" "),s("h1",{attrs:{id:"示例源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#示例源码"}},[e._v("#")]),e._v(" 示例源码")]),e._v(" "),s("hr"),e._v(" "),s("p",[e._v("（上述代码中一些实体类和配置的完整代码，请参考如下代码仓库）")]),e._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/realpdai/tech-pdai-spring-demos",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/realpdai/tech-pdai-spring-demos"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);