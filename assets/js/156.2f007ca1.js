(window.webpackJsonp=window.webpackJsonp||[]).push([[156],{3220:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_4.a6038ba2.png"},3221:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_8.bc0bb16c.png"},3222:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_3.c1e69ab2.png"},3223:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_1.8fdbb245.png"},3224:function(s,a){s.exports="data:image/png;base64,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"},3225:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_7.fffb24d0.png"},3226:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_5.4f9d8daa.png"},3227:function(s,a,n){s.exports=n.p+"assets/img/ci_action_jenkins_gitlab_6.04f7c0f1.png"},4141:function(s,a,n){"use strict";n.r(a);var e=n(7),t=Object(e.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"工具详解-jenkins-gitlab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工具详解-jenkins-gitlab"}},[s._v("#")]),s._v(" 工具详解 - Jenkins+Gitlab")]),s._v(" "),a("p",[s._v("===============================================")]),s._v(" "),a("blockquote",[a("p",[s._v("我在尝试在容器中安装Jenkins时，初衷是希望使用docker in docker 的模式来实现Jenkins slave容器按需创建。在实现的时候需要在Jenkins 中安装Kubernetes插件。 kubernetes的插件目前来看存在一个Bug，这个bug很小但是会导致我们无法设置和kubernetes mastert认证的机制。Bug是由于配置代理时候是用的IP地址，但是jenkins必须加入http协议，可惜的是加入http协议后更新的代理又不能使用了，进入这种死循环了。所以这种方案暂时搁置。")])]),s._v(" "),a("p",[s._v("So，这里我会写常用的实现自动化部署的方案之Jenkins+Gitlab这种模式，在小型的开发时候完全够用了，从来没有一致的最佳方案，只有适不适合咱们的团队方案。")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%B7%A5%E5%85%B7%E8%AF%A6%E8%A7%A3---jenkinsgitlab"}},[s._v("工具详解 - Jenkins+Gitlab")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#jenkins%E7%9A%84%E5%AE%89%E8%A3%85"}},[s._v("Jenkins的安装")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#gitlab%E7%9A%84%E5%AE%89%E8%A3%85"}},[s._v("Gitlab的安装")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2%E9%85%8D%E7%BD%AE"}},[s._v("自动化部署配置")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E5%88%9B%E5%BB%BA%E6%99%AE%E9%80%9A%E7%BC%96%E8%AF%91job"}},[s._v("创建普通编译Job")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#jenkins%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AAjob%E5%B9%B6%E9%85%8D%E7%BD%AEgit%E4%BF%A1%E6%81%AF"}},[s._v("Jenkins创建一个Job，并配置git信息")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9B%B4%E6%94%B9%E6%88%90%E5%85%AC%E5%8F%B8artificatory%E9%85%8D%E7%BD%AE"}},[s._v("更改成公司artificatory配置")])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8A%A0%E5%85%A5ci-trigger%E5%8A%9F%E8%83%BD"}},[s._v("加入CI Trigger功能")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#jenkins-trigger%E9%85%8D%E7%BD%AE"}},[s._v("Jenkins Trigger配置")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#gitlab%E9%85%8D%E7%BD%AEwebhook"}},[s._v("Gitlab配置webhook")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E6%B5%8B%E8%AF%95webhook"}},[s._v("测试webhook:")])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8A%A0%E5%85%A5cd%E5%8A%9F%E8%83%BD"}},[s._v("加入CD功能")]),s._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E8%87%AA%E5%8A%A8%E5%8C%96%E8%BF%90%E8%A1%8C%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99"}},[s._v("自动化运行脚本编写")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#global%E9%85%8D%E7%BD%AEssh-server"}},[s._v("Global配置SSH Server")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#build-job%E4%B8%AD%E9%85%8D%E7%BD%AEpostbuildover-ssh"}},[s._v("Build Job中配置PostBuild，Over SSH")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9B%B4%E6%96%B0%E5%B9%B6%E6%8F%90%E4%BA%A4%E4%BB%A3%E7%A0%81"}},[s._v("更新并提交代码")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E8%A7%A6%E5%8F%91%E7%BC%96%E8%AF%91%E5%92%8C%E8%87%AA%E5%8A%A8%E5%8C%96%E9%83%A8%E7%BD%B2"}},[s._v("触发编译和自动化部署")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#tigger-build-logs"}},[s._v("Tigger Build Logs")])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%AB%99%E6%9B%B4%E6%96%B0"}},[s._v("查看网站更新")])])])])])]),s._v(" "),a("li",[a("a",{attrs:{href:"#%E5%8F%82%E8%80%83%E6%96%87%E6%A1%A3"}},[s._v("参考文档")])])])])]),s._v(" "),a("h1",{attrs:{id:"jenkins的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins的安装"}},[s._v("#")]),s._v(" Jenkins的安装")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("RedHat Linux RPM packages for Jenkins - https://pkg.jenkins.io/redhat-stable/")]),s._v(" "),a("p",[s._v("To use this repository, run the following command:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("sudo wget -O /etc/yum.repos.d/jenkins.repo https://pkg.jenkins.io/redhat-stable/jenkins.repo\nsudo rpm --import https://pkg.jenkins.io/redhat-stable/jenkins.io.key\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v('If you\'ve previously imported the key from Jenkins, the "rpm --import" will fail because you already have a key. Please ignore that and move on.')]),s._v(" "),a("p",[s._v("You will need to explicitly install a Java runtime environment, because Oracle's Java RPMs are incorrect and fail to register as providing a java dependency. Thus, adding an explicit dependency requirement on Java would force installation of the OpenJDK JVM.")]),s._v(" "),a("p",[s._v("2.54 (2017-04) and newer: Java 8 1.612 (2015-05) and newer: Java 7 With that set up, the Jenkins package can be installed with:")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("yum install jenkins\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("See Wiki for more information, including how Jenkins is run and where the configuration is stored, etc.")]),s._v(" "),a("h1",{attrs:{id:"gitlab的安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab的安装"}},[s._v("#")]),s._v(" Gitlab的安装")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("自己网上找吧，但是安装8.0+的版本，因为后面webhooks是有版本的要求的。")]),s._v(" "),a("h1",{attrs:{id:"自动化部署配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化部署配置"}},[s._v("#")]),s._v(" 自动化部署配置")]),s._v(" "),a("hr"),s._v(" "),a("h3",{attrs:{id:"创建普通编译job"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建普通编译job"}},[s._v("#")]),s._v(" 创建普通编译Job")]),s._v(" "),a("h4",{attrs:{id:"jenkins创建一个job-并配置git信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins创建一个job-并配置git信息"}},[s._v("#")]),s._v(" Jenkins创建一个Job，并配置git信息")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3220),alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("注意，这里连接Gitlab需要配置认证")])]),s._v(" "),a("p",[a("img",{attrs:{src:n(3221),alt:""}})]),s._v(" "),a("blockquote",[a("p",[s._v("同时，保证jenkins机器安装了Java， maven。")])]),s._v(" "),a("p",[s._v("Maven 中需要配置成我们自己的仓库，配置settings.xm即可。")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@jenkins ~]# find / -name settings.xml\n/etc/maven/settings.xml\n/var/lib/jenkins/.m2/settings.xml\n/usr/share/maven/conf/settings.xml\n[root@jenkins ~]# cat /usr/share/maven/conf/settings.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h4",{attrs:{id:"更改成公司artificatory配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更改成公司artificatory配置"}},[s._v("#")]),s._v(" 更改成公司artificatory配置")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   <mirror>\n      <id>mirrorId_2</id>\n      <mirrorOf>*</mirrorOf>\n      <name>Human Readable Name for this Mirror.</name>\n      <url>http://maven.aliyun.com/nexus/content/groups/public/</url>\n    </mirror>--\x3e\n   <mirror>\n      <id>mirrorId_1</id>\n      <mirrorOf>*</mirrorOf>\n      <name>Human Readable Name for this Mirror.</name>\n      <url>http://139.24.120.251:58086/artifactory/list/maven2/</url>\n    </mirror>\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h3",{attrs:{id:"加入ci-trigger功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加入ci-trigger功能"}},[s._v("#")]),s._v(" 加入CI Trigger功能")]),s._v(" "),a("h4",{attrs:{id:"jenkins-trigger配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#jenkins-trigger配置"}},[s._v("#")]),s._v(" Jenkins Trigger配置")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3222),alt:""}})]),s._v(" "),a("h4",{attrs:{id:"gitlab配置webhook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#gitlab配置webhook"}},[s._v("#")]),s._v(" Gitlab配置webhook")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3223),alt:""}})]),s._v(" "),a("h4",{attrs:{id:"测试webhook"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#测试webhook"}},[s._v("#")]),s._v(" 测试webhook:")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3224),alt:""}})]),s._v(" "),a("h3",{attrs:{id:"加入cd功能"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#加入cd功能"}},[s._v("#")]),s._v(" 加入CD功能")]),s._v(" "),a("h4",{attrs:{id:"自动化运行脚本编写"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动化运行脚本编写"}},[s._v("#")]),s._v(" 自动化运行脚本编写")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("[root@jenkins ~]# cat run.sh\n#!/bin/bash\necho 'Checking scic document system status...'\nSCIC_APP_PID=$(ps -ef | grep scic_paas_doc | grep -v grep | awk '{ print $2 }')\nif [ -z \"$SCIC_APP_PID\" ]\n  then\n      echo Starting scic document...\n      nohup java -jar scic_paas_doc-0.0.1-RELEASE.jar > doc.log 2>&1 &\n      echo Started successfully.\nelse\n    echo killing old service -  $SCIC_APP_PID ...\n    kill $SCIC_APP_PID\n    echo Restarting scic document...\n    nohup java -jar scic_paas_doc-0.0.1-RELEASE.jar > doc.log 2>&1 &\n    echo Restarted successfully.\nfi\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h4",{attrs:{id:"global配置ssh-server"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#global配置ssh-server"}},[s._v("#")]),s._v(" Global配置SSH Server")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3225),alt:""}})]),s._v(" "),a("h4",{attrs:{id:"build-job中配置postbuild-over-ssh"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#build-job中配置postbuild-over-ssh"}},[s._v("#")]),s._v(" Build Job中配置PostBuild，Over SSH")]),s._v(" "),a("p",[s._v("通过SSH上传jar，并使用脚本运行")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3226),alt:""}})]),s._v(" "),a("h4",{attrs:{id:"更新并提交代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新并提交代码"}},[s._v("#")]),s._v(" 更新并提交代码")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("pdai@pdai MINGW64 /d/git/k8s/scic_paas_doc (master)\n$ git add .\nwarning: LF will be replaced by CRLF in src/main/resources/static/_sidebar.md.\nThe file will have its original line endings in your working directory.\n\npdai@pdai MINGW64 /d/git/k8s/scic_paas_doc (master)\n$ git commit\nwarning: LF will be replaced by CRLF in src/main/resources/static/_sidebar.md.\nThe file will have its original line endings in your working directory.\n[master warning: LF will be replaced by CRLF in src/main/resources/static/_sidebar.md.\nThe file will have its original line endings in your working directory.\n50c1cc4] test trigger\nwarning: LF will be replaced by CRLF in src/main/resources/static/_sidebar.md.\nThe file will have its original line endings in your working directory.\n 1 file changed, 1 insertion(+), 1 deletion(-)\n\npdai@pdai MINGW64 /d/git/k8s/scic_paas_doc (master)\n$ git push\nCounting objects: 7, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (6/6), done.\nWriting objects: 100% (7/7), 499 bytes | 0 bytes/s, done.\nTotal 7 (delta 5), reused 0 (delta 0)\nTo git@10.192.29.91:k8s_test/scic_paas_doc.git\n   63b8ff4..50c1cc4  master -> master\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("h4",{attrs:{id:"触发编译和自动化部署"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#触发编译和自动化部署"}},[s._v("#")]),s._v(" 触发编译和自动化部署")]),s._v(" "),a("p",[a("img",{attrs:{src:n(3227),alt:""}})]),s._v(" "),a("h4",{attrs:{id:"tigger-build-logs"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#tigger-build-logs"}},[s._v("#")]),s._v(" Tigger Build Logs")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("Started by GitLab push by daipeng\nBuilding in workspace /var/lib/jenkins/workspace/SCIC_DOC_TRIGGER_BUILD\n > git rev-parse --is-inside-work-tree # timeout=10\nFetching changes from the remote Git repository\n > git config remote.origin.url git@10.192.29.91:k8s_test/scic_paas_doc.git # timeout=10\nFetching upstream changes from git@10.192.29.91:k8s_test/scic_paas_doc.git\n > git --version # timeout=10\nusing GIT_SSH to set credentials jenkins master server key\n > git fetch --tags --progress git@10.192.29.91:k8s_test/scic_paas_doc.git +refs/heads/*:refs/remotes/origin/*\n > git rev-parse remotes/origin/master^{commit} # timeout=10\n > git branch -a -v --no-abbrev --contains 50c1cc4499394d70919a470db5961cec00e65457 # timeout=10\nChecking out Revision 50c1cc4499394d70919a470db5961cec00e65457 (origin/master)\nCommit message: \"test trigger\"\n > git config core.sparsecheckout # timeout=10\n > git checkout -f 50c1cc4499394d70919a470db5961cec00e65457\n > git rev-list 99d919b08d5a2010fe750d4d920a10024401bc92 # timeout=10\n[SCIC_DOC_TRIGGER_BUILD] $ /bin/sh -xe /tmp/jenkins3779972667920467885.sh\n+ mvn package\n[INFO] Scanning for projects...\n[INFO]                                                                         \n[INFO] ------------------------------------------------------------------------\n[INFO] Building pass_doc 0.0.1-RELEASE\n[INFO] ------------------------------------------------------------------------\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:resources (default-resources) @ scic_paas_doc ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] Copying 1 resource\n[INFO] Copying 71 resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:compile (default-compile) @ scic_paas_doc ---\n[INFO] Nothing to compile - all classes are up to date\n[INFO] \n[INFO] --- maven-resources-plugin:2.6:testResources (default-testResources) @ scic_paas_doc ---\n[INFO] Using 'UTF-8' encoding to copy filtered resources.\n[INFO] skip non existing resourceDirectory /var/lib/jenkins/workspace/SCIC_DOC_TRIGGER_BUILD/src/test/resources\n[INFO] \n[INFO] --- maven-compiler-plugin:3.1:testCompile (default-testCompile) @ scic_paas_doc ---\n[INFO] No sources to compile\n[INFO] \n[INFO] --- maven-surefire-plugin:2.18.1:test (default-test) @ scic_paas_doc ---\n[INFO] No tests to run.\n[INFO] \n[INFO] --- maven-jar-plugin:2.6:jar (default-jar) @ scic_paas_doc ---\n[INFO] Building jar: /var/lib/jenkins/workspace/SCIC_DOC_TRIGGER_BUILD/target/scic_paas_doc-0.0.1-RELEASE.jar\n[INFO] \n[INFO] --- spring-boot-maven-plugin:1.4.1.RELEASE:repackage (default) @ scic_paas_doc ---\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD SUCCESS\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time: 3.695s\n[INFO] Finished at: Fri Jul 28 09:15:43 CST 2017\n[INFO] Final Memory: 16M/237M\n[INFO] ------------------------------------------------------------------------\nSSH: Connecting from host [jenkins]\nSSH: Connecting with configuration [PAAS_DOC_SERVER_200] ...\nSSH: EXEC: STDOUT/STDERR from command [/root/run.sh] ...\nChecking scic document system status...\nkilling old service - 19970 ...\nRestarting scic document...\nRestarted successfully.\nSSH: EXEC: completed after 200 ms\nSSH: Disconnecting configuration [PAAS_DOC_SERVER_200] ...\nSSH: Transferred 1 file(s)\nFinished: SUCCESS\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br")])]),a("h4",{attrs:{id:"查看网站更新"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查看网站更新"}},[s._v("#")]),s._v(" 查看网站更新")]),s._v(" "),a("p",[s._v("发现确实已经更新 啦。")]),s._v(" "),a("h1",{attrs:{id:"参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文档"}},[s._v("#")]),s._v(" 参考文档")]),s._v(" "),a("hr"),s._v(" "),a("p",[s._v("https://jenkins.io/doc/pipeline/tour/hello-world/")]),s._v(" "),a("p",[s._v("https://jenkins.io/user-handbook.pdf")]),s._v(" "),a("p",[s._v("http://www.cnblogs.com/kevingrace/p/5651447.html")]),s._v(" "),a("p",[s._v("http://www.cnblogs.com/ceshi2016/p/6529557.html")]),s._v(" "),a("p",[s._v("http://linuxsogood.org/1539.html")]),s._v(" "),a("p",[s._v("http://www.mamicode.com/info-detail-1264849.html")]),s._v(" "),a("p",[s._v("http://blog.didispace.com/spring-boot-run-backend/)")])])}),[],!1,null,null,null);a.default=t.exports}}]);