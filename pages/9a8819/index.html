<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Tomcat - 如何设计一个简单的web容器 | Fanx 知识库</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.svg">[object Object]
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.6ece31e0.css" as="style"><link rel="preload" href="/assets/js/app.38fd400a.js" as="script"><link rel="preload" href="/assets/js/3.e11db813.js" as="script"><link rel="preload" href="/assets/js/158.540f7a5a.js" as="script"><link rel="prefetch" href="/assets/js/10.939e2dd4.js"><link rel="prefetch" href="/assets/js/100.4a08f581.js"><link rel="prefetch" href="/assets/js/101.45cd45c9.js"><link rel="prefetch" href="/assets/js/102.ac1359d1.js"><link rel="prefetch" href="/assets/js/103.22344102.js"><link rel="prefetch" href="/assets/js/104.5071cdfd.js"><link rel="prefetch" href="/assets/js/105.7767c121.js"><link rel="prefetch" href="/assets/js/106.809b79f1.js"><link rel="prefetch" href="/assets/js/107.62fd626a.js"><link rel="prefetch" href="/assets/js/108.0583fdc1.js"><link rel="prefetch" href="/assets/js/109.fa127771.js"><link rel="prefetch" href="/assets/js/11.6463adc8.js"><link rel="prefetch" href="/assets/js/110.5cf9f09c.js"><link rel="prefetch" href="/assets/js/111.9d963667.js"><link rel="prefetch" href="/assets/js/112.bc2b8a6e.js"><link rel="prefetch" href="/assets/js/113.2ae29573.js"><link rel="prefetch" href="/assets/js/114.0b2cedfa.js"><link rel="prefetch" href="/assets/js/115.652e433e.js"><link rel="prefetch" href="/assets/js/116.bcc5d64a.js"><link rel="prefetch" href="/assets/js/117.30b02d0d.js"><link rel="prefetch" href="/assets/js/118.87f4f927.js"><link rel="prefetch" href="/assets/js/119.05839492.js"><link rel="prefetch" href="/assets/js/12.a17960e5.js"><link rel="prefetch" href="/assets/js/120.3d772c9c.js"><link rel="prefetch" href="/assets/js/121.bd8fcebf.js"><link rel="prefetch" href="/assets/js/122.e58d2205.js"><link rel="prefetch" href="/assets/js/123.f2c2826d.js"><link rel="prefetch" href="/assets/js/124.12d9ff87.js"><link rel="prefetch" href="/assets/js/125.c7e4bf1c.js"><link rel="prefetch" href="/assets/js/126.71c358fb.js"><link rel="prefetch" href="/assets/js/127.fb1922e5.js"><link rel="prefetch" href="/assets/js/128.25cbf771.js"><link rel="prefetch" href="/assets/js/129.50047ea3.js"><link rel="prefetch" href="/assets/js/13.727ebfda.js"><link rel="prefetch" href="/assets/js/130.a77cfa28.js"><link rel="prefetch" href="/assets/js/131.1618c1f5.js"><link rel="prefetch" href="/assets/js/132.4073573b.js"><link rel="prefetch" href="/assets/js/133.f6e4882f.js"><link rel="prefetch" href="/assets/js/134.1de81973.js"><link rel="prefetch" href="/assets/js/135.43148a0c.js"><link rel="prefetch" href="/assets/js/136.12b3ef34.js"><link rel="prefetch" href="/assets/js/137.accefc34.js"><link rel="prefetch" href="/assets/js/138.8d3115ff.js"><link rel="prefetch" href="/assets/js/139.6e492e2b.js"><link rel="prefetch" href="/assets/js/14.bc6d3062.js"><link rel="prefetch" href="/assets/js/140.3d98f006.js"><link rel="prefetch" href="/assets/js/141.542d08af.js"><link rel="prefetch" href="/assets/js/142.c91a19a2.js"><link rel="prefetch" href="/assets/js/143.0c681ed2.js"><link rel="prefetch" href="/assets/js/144.62e9c646.js"><link rel="prefetch" href="/assets/js/145.ebc34777.js"><link rel="prefetch" href="/assets/js/146.d94a04a7.js"><link rel="prefetch" href="/assets/js/147.b45158de.js"><link rel="prefetch" href="/assets/js/148.5dfa6740.js"><link rel="prefetch" href="/assets/js/149.cb6f2cb0.js"><link rel="prefetch" href="/assets/js/15.a9468bf1.js"><link rel="prefetch" href="/assets/js/150.9f58dbc6.js"><link rel="prefetch" href="/assets/js/151.0a1c07e3.js"><link rel="prefetch" href="/assets/js/152.eafe4843.js"><link rel="prefetch" href="/assets/js/153.fb94cab5.js"><link rel="prefetch" href="/assets/js/154.07f7a11d.js"><link rel="prefetch" href="/assets/js/155.7f6da40b.js"><link rel="prefetch" href="/assets/js/156.2f007ca1.js"><link rel="prefetch" href="/assets/js/157.a35b5249.js"><link rel="prefetch" href="/assets/js/159.f62e0315.js"><link rel="prefetch" href="/assets/js/16.ace3b806.js"><link rel="prefetch" href="/assets/js/160.e043c758.js"><link rel="prefetch" href="/assets/js/161.d90141bf.js"><link rel="prefetch" href="/assets/js/162.ddcdbfb9.js"><link rel="prefetch" href="/assets/js/163.f1ba395e.js"><link rel="prefetch" href="/assets/js/164.9f398973.js"><link rel="prefetch" href="/assets/js/165.0db3da51.js"><link rel="prefetch" href="/assets/js/166.b5305797.js"><link rel="prefetch" href="/assets/js/167.e7b2f76b.js"><link rel="prefetch" href="/assets/js/168.a2ecf883.js"><link rel="prefetch" href="/assets/js/169.88bd4d26.js"><link rel="prefetch" href="/assets/js/17.60481837.js"><link rel="prefetch" href="/assets/js/170.fb1699e2.js"><link rel="prefetch" href="/assets/js/171.47268bef.js"><link rel="prefetch" href="/assets/js/172.79002327.js"><link rel="prefetch" href="/assets/js/173.3b1813fb.js"><link rel="prefetch" href="/assets/js/174.362811a9.js"><link rel="prefetch" href="/assets/js/175.bb48bcd7.js"><link rel="prefetch" href="/assets/js/176.97bbf32c.js"><link rel="prefetch" href="/assets/js/177.0717ff7a.js"><link rel="prefetch" href="/assets/js/178.75bff3b7.js"><link rel="prefetch" href="/assets/js/179.3e7db0a2.js"><link rel="prefetch" href="/assets/js/18.dd3c5709.js"><link rel="prefetch" href="/assets/js/180.c81da8dd.js"><link rel="prefetch" href="/assets/js/181.142d6d1c.js"><link rel="prefetch" href="/assets/js/182.fb312040.js"><link rel="prefetch" href="/assets/js/183.3684267e.js"><link rel="prefetch" href="/assets/js/184.ec2a13bc.js"><link rel="prefetch" href="/assets/js/185.a7acace4.js"><link rel="prefetch" href="/assets/js/186.7df28551.js"><link rel="prefetch" href="/assets/js/187.347e9348.js"><link rel="prefetch" href="/assets/js/188.07356026.js"><link rel="prefetch" href="/assets/js/189.0816176d.js"><link rel="prefetch" href="/assets/js/19.cc2d4ad1.js"><link rel="prefetch" href="/assets/js/190.fd5dd8cc.js"><link rel="prefetch" href="/assets/js/191.a938967e.js"><link rel="prefetch" href="/assets/js/192.859b71a1.js"><link rel="prefetch" href="/assets/js/193.adcf2ec3.js"><link rel="prefetch" href="/assets/js/194.69d1169c.js"><link rel="prefetch" href="/assets/js/195.ad7cbcc4.js"><link rel="prefetch" href="/assets/js/196.b65138da.js"><link rel="prefetch" href="/assets/js/197.b4fca73b.js"><link rel="prefetch" href="/assets/js/198.2494a23f.js"><link rel="prefetch" href="/assets/js/199.404b9ce1.js"><link rel="prefetch" href="/assets/js/2.938bab56.js"><link rel="prefetch" href="/assets/js/20.361e2bf6.js"><link rel="prefetch" href="/assets/js/200.42b54eae.js"><link rel="prefetch" href="/assets/js/201.ab495eb8.js"><link rel="prefetch" href="/assets/js/202.2cbc5c9a.js"><link rel="prefetch" href="/assets/js/203.abf3fde5.js"><link rel="prefetch" href="/assets/js/204.4fdd4cfb.js"><link rel="prefetch" href="/assets/js/205.411987d7.js"><link rel="prefetch" href="/assets/js/206.dbcab3ae.js"><link rel="prefetch" href="/assets/js/207.f1429354.js"><link rel="prefetch" href="/assets/js/208.f763286c.js"><link rel="prefetch" href="/assets/js/209.c1edbca5.js"><link rel="prefetch" href="/assets/js/21.ae1e88a3.js"><link rel="prefetch" href="/assets/js/210.b2a1501d.js"><link rel="prefetch" href="/assets/js/211.fe1fd5f7.js"><link rel="prefetch" href="/assets/js/212.0fd39a8f.js"><link rel="prefetch" href="/assets/js/213.bb3fc163.js"><link rel="prefetch" href="/assets/js/214.c42e1ef3.js"><link rel="prefetch" href="/assets/js/215.4f0fa915.js"><link rel="prefetch" href="/assets/js/216.07c485c9.js"><link rel="prefetch" href="/assets/js/217.ada25e7a.js"><link rel="prefetch" href="/assets/js/218.2f761d3c.js"><link rel="prefetch" href="/assets/js/219.32d1a663.js"><link rel="prefetch" href="/assets/js/22.0b09d67f.js"><link rel="prefetch" href="/assets/js/220.36c56cf4.js"><link rel="prefetch" href="/assets/js/221.3e0431e2.js"><link rel="prefetch" href="/assets/js/222.90aa0ff7.js"><link rel="prefetch" href="/assets/js/223.5966d7df.js"><link rel="prefetch" href="/assets/js/224.7e2329e1.js"><link rel="prefetch" href="/assets/js/225.2ed3675d.js"><link rel="prefetch" href="/assets/js/226.fa3cef02.js"><link rel="prefetch" href="/assets/js/227.07bf7bca.js"><link rel="prefetch" href="/assets/js/228.9ac2589a.js"><link rel="prefetch" href="/assets/js/229.b980e141.js"><link rel="prefetch" href="/assets/js/23.31ed5c2f.js"><link rel="prefetch" href="/assets/js/230.2c32e874.js"><link rel="prefetch" href="/assets/js/231.723e20cb.js"><link rel="prefetch" href="/assets/js/232.1f94511c.js"><link rel="prefetch" href="/assets/js/233.2d477f71.js"><link rel="prefetch" href="/assets/js/234.10141c75.js"><link rel="prefetch" href="/assets/js/235.a328b127.js"><link rel="prefetch" href="/assets/js/236.42419c3b.js"><link rel="prefetch" href="/assets/js/237.648ca44e.js"><link rel="prefetch" href="/assets/js/238.4b363b75.js"><link rel="prefetch" href="/assets/js/239.fe711a73.js"><link rel="prefetch" href="/assets/js/24.fe75e3fa.js"><link rel="prefetch" href="/assets/js/240.6baa12bf.js"><link rel="prefetch" href="/assets/js/241.6f375dc4.js"><link rel="prefetch" href="/assets/js/242.aee8e39d.js"><link rel="prefetch" href="/assets/js/243.bfc7f6e1.js"><link rel="prefetch" href="/assets/js/244.c73a14a7.js"><link rel="prefetch" href="/assets/js/245.a2352aa1.js"><link rel="prefetch" href="/assets/js/246.b12c3ae6.js"><link rel="prefetch" href="/assets/js/247.2f768275.js"><link rel="prefetch" href="/assets/js/248.3f79dfb1.js"><link rel="prefetch" href="/assets/js/249.7fd0cb75.js"><link rel="prefetch" href="/assets/js/25.f2e379df.js"><link rel="prefetch" href="/assets/js/250.df3f1d0a.js"><link rel="prefetch" href="/assets/js/251.a3865750.js"><link rel="prefetch" href="/assets/js/252.d62542df.js"><link rel="prefetch" href="/assets/js/253.59b2f200.js"><link rel="prefetch" href="/assets/js/254.522d17b5.js"><link rel="prefetch" href="/assets/js/255.0f95a196.js"><link rel="prefetch" href="/assets/js/256.31b37cbe.js"><link rel="prefetch" href="/assets/js/257.ff22ad12.js"><link rel="prefetch" href="/assets/js/258.15205e0b.js"><link rel="prefetch" href="/assets/js/259.f3b7c5aa.js"><link rel="prefetch" href="/assets/js/26.45264b04.js"><link rel="prefetch" href="/assets/js/260.fec3c7aa.js"><link rel="prefetch" href="/assets/js/261.d965ee56.js"><link rel="prefetch" href="/assets/js/262.76a7105b.js"><link rel="prefetch" href="/assets/js/263.e684cc46.js"><link rel="prefetch" href="/assets/js/264.59297da0.js"><link rel="prefetch" href="/assets/js/265.66182ed2.js"><link rel="prefetch" href="/assets/js/266.eec50d90.js"><link rel="prefetch" href="/assets/js/267.c85bce12.js"><link rel="prefetch" href="/assets/js/268.ef544f0c.js"><link rel="prefetch" href="/assets/js/269.8cfb5c6a.js"><link rel="prefetch" href="/assets/js/27.4e065810.js"><link rel="prefetch" href="/assets/js/270.b66cab3c.js"><link rel="prefetch" href="/assets/js/271.c1b7d136.js"><link rel="prefetch" href="/assets/js/272.0d7950c3.js"><link rel="prefetch" href="/assets/js/273.06349cca.js"><link rel="prefetch" href="/assets/js/274.9b442c09.js"><link rel="prefetch" href="/assets/js/275.11082d81.js"><link rel="prefetch" href="/assets/js/276.ce0abe31.js"><link rel="prefetch" href="/assets/js/277.4b7fcc53.js"><link rel="prefetch" href="/assets/js/278.129d0397.js"><link rel="prefetch" href="/assets/js/279.5c021f7c.js"><link rel="prefetch" href="/assets/js/28.126ecd33.js"><link rel="prefetch" href="/assets/js/280.d183c9e3.js"><link rel="prefetch" href="/assets/js/281.0df67750.js"><link rel="prefetch" href="/assets/js/282.8fdd2372.js"><link rel="prefetch" href="/assets/js/283.dae956df.js"><link rel="prefetch" href="/assets/js/284.c5dc7189.js"><link rel="prefetch" href="/assets/js/285.7f5a7367.js"><link rel="prefetch" href="/assets/js/286.d9bfcef5.js"><link rel="prefetch" href="/assets/js/287.4fa6a5c5.js"><link rel="prefetch" href="/assets/js/288.57904d2d.js"><link rel="prefetch" href="/assets/js/289.b96d7c2f.js"><link rel="prefetch" href="/assets/js/29.8f5db82a.js"><link rel="prefetch" href="/assets/js/290.8dda9646.js"><link rel="prefetch" href="/assets/js/291.ab433493.js"><link rel="prefetch" href="/assets/js/292.e2d59796.js"><link rel="prefetch" href="/assets/js/293.30f9fcc4.js"><link rel="prefetch" href="/assets/js/294.158492dc.js"><link rel="prefetch" href="/assets/js/295.33e3a53d.js"><link rel="prefetch" href="/assets/js/296.49d7a2de.js"><link rel="prefetch" href="/assets/js/297.1b7572ac.js"><link rel="prefetch" href="/assets/js/298.00e4586a.js"><link rel="prefetch" href="/assets/js/299.d8fb6ff9.js"><link rel="prefetch" href="/assets/js/30.ef97cb8e.js"><link rel="prefetch" href="/assets/js/300.90e9dadf.js"><link rel="prefetch" href="/assets/js/301.d5592ea1.js"><link rel="prefetch" href="/assets/js/302.b08dc1ea.js"><link rel="prefetch" href="/assets/js/303.bef541c8.js"><link rel="prefetch" href="/assets/js/304.be3f7081.js"><link rel="prefetch" href="/assets/js/305.13718421.js"><link rel="prefetch" href="/assets/js/306.41685aa2.js"><link rel="prefetch" href="/assets/js/307.6d569102.js"><link rel="prefetch" href="/assets/js/308.aaabab89.js"><link rel="prefetch" href="/assets/js/309.910ecc42.js"><link rel="prefetch" href="/assets/js/31.795b3334.js"><link rel="prefetch" href="/assets/js/310.104b7753.js"><link rel="prefetch" href="/assets/js/311.45f4a7da.js"><link rel="prefetch" href="/assets/js/312.180c7e45.js"><link rel="prefetch" href="/assets/js/313.87d3a801.js"><link rel="prefetch" href="/assets/js/314.7739b1ef.js"><link rel="prefetch" href="/assets/js/315.54a1fac0.js"><link rel="prefetch" href="/assets/js/316.a978a787.js"><link rel="prefetch" href="/assets/js/317.84f65f2c.js"><link rel="prefetch" href="/assets/js/318.7f8caff8.js"><link rel="prefetch" href="/assets/js/319.0b5276f3.js"><link rel="prefetch" href="/assets/js/32.e65c7229.js"><link rel="prefetch" href="/assets/js/320.ba90589a.js"><link rel="prefetch" href="/assets/js/321.b6810c5a.js"><link rel="prefetch" href="/assets/js/322.2eaa727d.js"><link rel="prefetch" href="/assets/js/323.17573ee3.js"><link rel="prefetch" href="/assets/js/324.806fd6ca.js"><link rel="prefetch" href="/assets/js/325.4cd65079.js"><link rel="prefetch" href="/assets/js/326.fe0e2e22.js"><link rel="prefetch" href="/assets/js/327.a64d0209.js"><link rel="prefetch" href="/assets/js/328.aca1c89a.js"><link rel="prefetch" href="/assets/js/329.53ccf1dd.js"><link rel="prefetch" href="/assets/js/33.9a57aab8.js"><link rel="prefetch" href="/assets/js/330.92822a09.js"><link rel="prefetch" href="/assets/js/331.6b82baff.js"><link rel="prefetch" href="/assets/js/332.fc20f585.js"><link rel="prefetch" href="/assets/js/333.005ba8e3.js"><link rel="prefetch" href="/assets/js/334.9d3309b8.js"><link rel="prefetch" href="/assets/js/335.0e938f19.js"><link rel="prefetch" href="/assets/js/336.01fe9903.js"><link rel="prefetch" href="/assets/js/337.e207d67c.js"><link rel="prefetch" href="/assets/js/338.bfcf6bc8.js"><link rel="prefetch" href="/assets/js/339.a502aa64.js"><link rel="prefetch" href="/assets/js/34.3835d35c.js"><link rel="prefetch" href="/assets/js/340.3888b147.js"><link rel="prefetch" href="/assets/js/341.20297f95.js"><link rel="prefetch" href="/assets/js/342.9cd149e9.js"><link rel="prefetch" href="/assets/js/343.faac8369.js"><link rel="prefetch" href="/assets/js/344.da8cd079.js"><link rel="prefetch" href="/assets/js/345.78303b88.js"><link rel="prefetch" href="/assets/js/346.d8eaca82.js"><link rel="prefetch" href="/assets/js/347.edd389a1.js"><link rel="prefetch" href="/assets/js/348.21ee9617.js"><link rel="prefetch" href="/assets/js/349.0251471a.js"><link rel="prefetch" href="/assets/js/35.76dc7096.js"><link rel="prefetch" href="/assets/js/350.710b7d30.js"><link rel="prefetch" href="/assets/js/351.535f8d60.js"><link rel="prefetch" href="/assets/js/352.c66fe42e.js"><link rel="prefetch" href="/assets/js/353.ebbcd333.js"><link rel="prefetch" href="/assets/js/354.7cbba2f1.js"><link rel="prefetch" href="/assets/js/355.0106db16.js"><link rel="prefetch" href="/assets/js/356.7debf350.js"><link rel="prefetch" href="/assets/js/357.a43eb887.js"><link rel="prefetch" href="/assets/js/358.28e5d2ed.js"><link rel="prefetch" href="/assets/js/359.956fc3b8.js"><link rel="prefetch" href="/assets/js/36.fc54452c.js"><link rel="prefetch" href="/assets/js/360.13fb600a.js"><link rel="prefetch" href="/assets/js/361.d100f85b.js"><link rel="prefetch" href="/assets/js/362.35277df2.js"><link rel="prefetch" href="/assets/js/363.d993a7fc.js"><link rel="prefetch" href="/assets/js/364.0168c2b0.js"><link rel="prefetch" href="/assets/js/365.bc8af0bb.js"><link rel="prefetch" href="/assets/js/366.2645dc0d.js"><link rel="prefetch" href="/assets/js/367.87368acb.js"><link rel="prefetch" href="/assets/js/368.0b7d41fc.js"><link rel="prefetch" href="/assets/js/369.4bf3f46e.js"><link rel="prefetch" href="/assets/js/37.5a47cee9.js"><link rel="prefetch" href="/assets/js/370.ea5f965e.js"><link rel="prefetch" href="/assets/js/371.1af764ef.js"><link rel="prefetch" href="/assets/js/372.bf6c68e2.js"><link rel="prefetch" href="/assets/js/373.1a605cc8.js"><link rel="prefetch" href="/assets/js/374.34a41a4a.js"><link rel="prefetch" href="/assets/js/375.1d2d3776.js"><link rel="prefetch" href="/assets/js/376.4b7b0b10.js"><link rel="prefetch" href="/assets/js/377.b3d9748a.js"><link rel="prefetch" href="/assets/js/378.7f00fa88.js"><link rel="prefetch" href="/assets/js/379.adcd298a.js"><link rel="prefetch" href="/assets/js/38.6614c565.js"><link rel="prefetch" href="/assets/js/380.6d08bb56.js"><link rel="prefetch" href="/assets/js/381.164bb4e3.js"><link rel="prefetch" href="/assets/js/382.f71f0ca4.js"><link rel="prefetch" href="/assets/js/383.01ba70ad.js"><link rel="prefetch" href="/assets/js/384.22b98cde.js"><link rel="prefetch" href="/assets/js/385.5f1298a9.js"><link rel="prefetch" href="/assets/js/386.01a912bc.js"><link rel="prefetch" href="/assets/js/387.3db4713f.js"><link rel="prefetch" href="/assets/js/388.4cde7d0f.js"><link rel="prefetch" href="/assets/js/389.d96bafad.js"><link rel="prefetch" href="/assets/js/39.1a09ed15.js"><link rel="prefetch" href="/assets/js/390.343bbc06.js"><link rel="prefetch" href="/assets/js/391.68b3e72a.js"><link rel="prefetch" href="/assets/js/392.f4f15e43.js"><link rel="prefetch" href="/assets/js/393.82475934.js"><link rel="prefetch" href="/assets/js/394.3101ea10.js"><link rel="prefetch" href="/assets/js/395.34083342.js"><link rel="prefetch" href="/assets/js/396.780d6efe.js"><link rel="prefetch" href="/assets/js/397.cb686f39.js"><link rel="prefetch" href="/assets/js/398.c4ad669f.js"><link rel="prefetch" href="/assets/js/399.ee8d28ad.js"><link rel="prefetch" href="/assets/js/4.c1dcb1a7.js"><link rel="prefetch" href="/assets/js/40.4216f4f9.js"><link rel="prefetch" href="/assets/js/400.23d48a38.js"><link rel="prefetch" href="/assets/js/401.319d7a68.js"><link rel="prefetch" href="/assets/js/402.25b27bd0.js"><link rel="prefetch" href="/assets/js/403.9a898a40.js"><link rel="prefetch" href="/assets/js/404.e3b49b79.js"><link rel="prefetch" href="/assets/js/405.7695b9f1.js"><link rel="prefetch" href="/assets/js/406.edb801f7.js"><link rel="prefetch" href="/assets/js/407.03c3f725.js"><link rel="prefetch" href="/assets/js/408.4345ef1f.js"><link rel="prefetch" href="/assets/js/409.77c34447.js"><link rel="prefetch" href="/assets/js/41.f035663a.js"><link rel="prefetch" href="/assets/js/410.7f6c0744.js"><link rel="prefetch" href="/assets/js/411.cb19323e.js"><link rel="prefetch" href="/assets/js/412.4b16959d.js"><link rel="prefetch" href="/assets/js/413.ff4f1ca2.js"><link rel="prefetch" href="/assets/js/414.b1ca1298.js"><link rel="prefetch" href="/assets/js/415.c2111593.js"><link rel="prefetch" href="/assets/js/416.a6d18039.js"><link rel="prefetch" href="/assets/js/417.dc36c66d.js"><link rel="prefetch" href="/assets/js/418.e7eba879.js"><link rel="prefetch" href="/assets/js/419.57673b9e.js"><link rel="prefetch" href="/assets/js/42.9c8cf569.js"><link rel="prefetch" href="/assets/js/420.ccd41fe0.js"><link rel="prefetch" href="/assets/js/421.ea69f0b0.js"><link rel="prefetch" href="/assets/js/422.093448e2.js"><link rel="prefetch" href="/assets/js/423.ae003f31.js"><link rel="prefetch" href="/assets/js/424.f670cd2b.js"><link rel="prefetch" href="/assets/js/425.6e814335.js"><link rel="prefetch" href="/assets/js/426.faf45206.js"><link rel="prefetch" href="/assets/js/427.cf6be942.js"><link rel="prefetch" href="/assets/js/428.9ff6199c.js"><link rel="prefetch" href="/assets/js/429.b6ef4678.js"><link rel="prefetch" href="/assets/js/43.717fe06b.js"><link rel="prefetch" href="/assets/js/430.e9575d07.js"><link rel="prefetch" href="/assets/js/431.8bf26a3e.js"><link rel="prefetch" href="/assets/js/432.5eaa2162.js"><link rel="prefetch" href="/assets/js/433.6dab12a1.js"><link rel="prefetch" href="/assets/js/434.fca918e8.js"><link rel="prefetch" href="/assets/js/435.4c8f9ad9.js"><link rel="prefetch" href="/assets/js/436.0f0de1a8.js"><link rel="prefetch" href="/assets/js/437.2221ab9f.js"><link rel="prefetch" href="/assets/js/438.37f28cfb.js"><link rel="prefetch" href="/assets/js/439.1e3f3611.js"><link rel="prefetch" href="/assets/js/44.705dc411.js"><link rel="prefetch" href="/assets/js/440.28ab35e8.js"><link rel="prefetch" href="/assets/js/441.8d006af8.js"><link rel="prefetch" href="/assets/js/442.2618a6e3.js"><link rel="prefetch" href="/assets/js/443.a7723674.js"><link rel="prefetch" href="/assets/js/444.18f23e7c.js"><link rel="prefetch" href="/assets/js/445.f4807c5a.js"><link rel="prefetch" href="/assets/js/446.77a5afc2.js"><link rel="prefetch" href="/assets/js/447.7f653483.js"><link rel="prefetch" href="/assets/js/448.1143c566.js"><link rel="prefetch" href="/assets/js/449.b788a288.js"><link rel="prefetch" href="/assets/js/45.6a225373.js"><link rel="prefetch" href="/assets/js/450.b6463ba3.js"><link rel="prefetch" href="/assets/js/451.fd4d46b9.js"><link rel="prefetch" href="/assets/js/452.e8de4fc2.js"><link rel="prefetch" href="/assets/js/453.4125e5e6.js"><link rel="prefetch" href="/assets/js/454.30af5d0a.js"><link rel="prefetch" href="/assets/js/455.9c919e58.js"><link rel="prefetch" href="/assets/js/456.22dbfa8f.js"><link rel="prefetch" href="/assets/js/457.e9c5248a.js"><link rel="prefetch" href="/assets/js/458.c0a9cf1d.js"><link rel="prefetch" href="/assets/js/459.b5e96042.js"><link rel="prefetch" href="/assets/js/46.515d085a.js"><link rel="prefetch" href="/assets/js/460.b4097efb.js"><link rel="prefetch" href="/assets/js/461.5d545741.js"><link rel="prefetch" href="/assets/js/462.402d4cdd.js"><link rel="prefetch" href="/assets/js/463.e6d6ea07.js"><link rel="prefetch" href="/assets/js/464.df817445.js"><link rel="prefetch" href="/assets/js/465.18a6bc2b.js"><link rel="prefetch" href="/assets/js/466.da313c0c.js"><link rel="prefetch" href="/assets/js/467.41294182.js"><link rel="prefetch" href="/assets/js/468.41c59467.js"><link rel="prefetch" href="/assets/js/469.d55da13c.js"><link rel="prefetch" href="/assets/js/47.a41193df.js"><link rel="prefetch" href="/assets/js/470.7457a92e.js"><link rel="prefetch" href="/assets/js/471.ed739bdf.js"><link rel="prefetch" href="/assets/js/472.83882459.js"><link rel="prefetch" href="/assets/js/473.fe2df51c.js"><link rel="prefetch" href="/assets/js/474.d40797b8.js"><link rel="prefetch" href="/assets/js/475.a00992a2.js"><link rel="prefetch" href="/assets/js/476.c7687189.js"><link rel="prefetch" href="/assets/js/477.fd4fd227.js"><link rel="prefetch" href="/assets/js/478.1ae08c3b.js"><link rel="prefetch" href="/assets/js/479.04a246c6.js"><link rel="prefetch" href="/assets/js/48.fe693306.js"><link rel="prefetch" href="/assets/js/480.36acb4ff.js"><link rel="prefetch" href="/assets/js/481.05d3129e.js"><link rel="prefetch" href="/assets/js/482.1741a02c.js"><link rel="prefetch" href="/assets/js/483.44cf2d25.js"><link rel="prefetch" href="/assets/js/484.9c14e5c6.js"><link rel="prefetch" href="/assets/js/485.ea0c1de1.js"><link rel="prefetch" href="/assets/js/486.8c683697.js"><link rel="prefetch" href="/assets/js/487.8b1eb604.js"><link rel="prefetch" href="/assets/js/488.ae16fca6.js"><link rel="prefetch" href="/assets/js/489.7f674a0d.js"><link rel="prefetch" href="/assets/js/49.a7d05a3d.js"><link rel="prefetch" href="/assets/js/490.52983854.js"><link rel="prefetch" href="/assets/js/491.968e7af4.js"><link rel="prefetch" href="/assets/js/492.e7f58bac.js"><link rel="prefetch" href="/assets/js/493.55afbb68.js"><link rel="prefetch" href="/assets/js/494.ac17d05b.js"><link rel="prefetch" href="/assets/js/495.d1ca2a12.js"><link rel="prefetch" href="/assets/js/496.d6841a0e.js"><link rel="prefetch" href="/assets/js/497.99431b4b.js"><link rel="prefetch" href="/assets/js/498.cacac1d8.js"><link rel="prefetch" href="/assets/js/499.c6b7fab0.js"><link rel="prefetch" href="/assets/js/5.f74a04c4.js"><link rel="prefetch" href="/assets/js/50.f59b29ea.js"><link rel="prefetch" href="/assets/js/500.abba24c7.js"><link rel="prefetch" href="/assets/js/501.e9496674.js"><link rel="prefetch" href="/assets/js/502.3ece0e86.js"><link rel="prefetch" href="/assets/js/503.974421d1.js"><link rel="prefetch" href="/assets/js/504.6e8d8539.js"><link rel="prefetch" href="/assets/js/505.b8161483.js"><link rel="prefetch" href="/assets/js/506.a6a6f2de.js"><link rel="prefetch" href="/assets/js/507.9c6955ee.js"><link rel="prefetch" href="/assets/js/508.223e145d.js"><link rel="prefetch" href="/assets/js/509.553e6f2c.js"><link rel="prefetch" href="/assets/js/51.428c5495.js"><link rel="prefetch" href="/assets/js/510.46e2eab7.js"><link rel="prefetch" href="/assets/js/511.24962b3f.js"><link rel="prefetch" href="/assets/js/512.a29fe236.js"><link rel="prefetch" href="/assets/js/513.8729b339.js"><link rel="prefetch" href="/assets/js/514.41199019.js"><link rel="prefetch" href="/assets/js/515.b1a71e99.js"><link rel="prefetch" href="/assets/js/516.001e3634.js"><link rel="prefetch" href="/assets/js/517.4de05581.js"><link rel="prefetch" href="/assets/js/518.57697c31.js"><link rel="prefetch" href="/assets/js/519.e962365e.js"><link rel="prefetch" href="/assets/js/52.c97c3911.js"><link rel="prefetch" href="/assets/js/520.e7775961.js"><link rel="prefetch" href="/assets/js/521.05b0ce57.js"><link rel="prefetch" href="/assets/js/522.49f7412e.js"><link rel="prefetch" href="/assets/js/523.b3d821b2.js"><link rel="prefetch" href="/assets/js/524.ab2395b7.js"><link rel="prefetch" href="/assets/js/525.25559bb4.js"><link rel="prefetch" href="/assets/js/526.23111d2a.js"><link rel="prefetch" href="/assets/js/527.c61f6e86.js"><link rel="prefetch" href="/assets/js/528.032fa7b6.js"><link rel="prefetch" href="/assets/js/529.3953f346.js"><link rel="prefetch" href="/assets/js/53.77f22b1a.js"><link rel="prefetch" href="/assets/js/530.b882066e.js"><link rel="prefetch" href="/assets/js/531.62dddf23.js"><link rel="prefetch" href="/assets/js/532.1826fe1a.js"><link rel="prefetch" href="/assets/js/533.a2e014bb.js"><link rel="prefetch" href="/assets/js/534.d5d89c00.js"><link rel="prefetch" href="/assets/js/535.4e5d7739.js"><link rel="prefetch" href="/assets/js/536.f2c700db.js"><link rel="prefetch" href="/assets/js/537.80aa278c.js"><link rel="prefetch" href="/assets/js/538.95e2f471.js"><link rel="prefetch" href="/assets/js/539.4e4ecfe8.js"><link rel="prefetch" href="/assets/js/54.d85b2f2e.js"><link rel="prefetch" href="/assets/js/540.00bd44e5.js"><link rel="prefetch" href="/assets/js/541.d740df14.js"><link rel="prefetch" href="/assets/js/542.5aadeaee.js"><link rel="prefetch" href="/assets/js/543.d42c9d9a.js"><link rel="prefetch" href="/assets/js/544.29704685.js"><link rel="prefetch" href="/assets/js/545.7fdb1a83.js"><link rel="prefetch" href="/assets/js/546.6b5655ea.js"><link rel="prefetch" href="/assets/js/547.c98e27c4.js"><link rel="prefetch" href="/assets/js/548.8edec06f.js"><link rel="prefetch" href="/assets/js/549.33b8eae3.js"><link rel="prefetch" href="/assets/js/55.80a4fa71.js"><link rel="prefetch" href="/assets/js/550.cb706b0e.js"><link rel="prefetch" href="/assets/js/551.79598cc6.js"><link rel="prefetch" href="/assets/js/552.69aa5f8b.js"><link rel="prefetch" href="/assets/js/553.7ccb8831.js"><link rel="prefetch" href="/assets/js/554.954013b2.js"><link rel="prefetch" href="/assets/js/555.960d7f8b.js"><link rel="prefetch" href="/assets/js/556.5c054c14.js"><link rel="prefetch" href="/assets/js/557.890045ea.js"><link rel="prefetch" href="/assets/js/558.f72f6668.js"><link rel="prefetch" href="/assets/js/559.452d8ff3.js"><link rel="prefetch" href="/assets/js/56.009b0340.js"><link rel="prefetch" href="/assets/js/560.1656e33f.js"><link rel="prefetch" href="/assets/js/561.bb4650eb.js"><link rel="prefetch" href="/assets/js/562.7322fd81.js"><link rel="prefetch" href="/assets/js/563.a34a68ea.js"><link rel="prefetch" href="/assets/js/564.6da92e18.js"><link rel="prefetch" href="/assets/js/565.01d288e5.js"><link rel="prefetch" href="/assets/js/566.6a3459a1.js"><link rel="prefetch" href="/assets/js/567.e3eb8e54.js"><link rel="prefetch" href="/assets/js/568.f95e0fba.js"><link rel="prefetch" href="/assets/js/569.a42d134c.js"><link rel="prefetch" href="/assets/js/57.25e8dd1c.js"><link rel="prefetch" href="/assets/js/570.87887d15.js"><link rel="prefetch" href="/assets/js/571.ce4b478b.js"><link rel="prefetch" href="/assets/js/572.634418a6.js"><link rel="prefetch" href="/assets/js/573.cd4cf02b.js"><link rel="prefetch" href="/assets/js/574.8bf073fa.js"><link rel="prefetch" href="/assets/js/575.c194dddb.js"><link rel="prefetch" href="/assets/js/576.7750193f.js"><link rel="prefetch" href="/assets/js/577.5daa388a.js"><link rel="prefetch" href="/assets/js/578.54bb0029.js"><link rel="prefetch" href="/assets/js/579.92f58c76.js"><link rel="prefetch" href="/assets/js/58.9c1eb9e5.js"><link rel="prefetch" href="/assets/js/580.0e543efb.js"><link rel="prefetch" href="/assets/js/581.4e0b0b47.js"><link rel="prefetch" href="/assets/js/582.8c172f83.js"><link rel="prefetch" href="/assets/js/583.c91c43e0.js"><link rel="prefetch" href="/assets/js/584.ca68d52b.js"><link rel="prefetch" href="/assets/js/585.663b17d3.js"><link rel="prefetch" href="/assets/js/586.9494847d.js"><link rel="prefetch" href="/assets/js/587.f3805773.js"><link rel="prefetch" href="/assets/js/588.8ae14be1.js"><link rel="prefetch" href="/assets/js/589.b4af88be.js"><link rel="prefetch" href="/assets/js/59.2a730e41.js"><link rel="prefetch" href="/assets/js/590.fb77fea8.js"><link rel="prefetch" href="/assets/js/591.a3aaa57c.js"><link rel="prefetch" href="/assets/js/592.54ec5f32.js"><link rel="prefetch" href="/assets/js/593.96eab5cb.js"><link rel="prefetch" href="/assets/js/594.e356725c.js"><link rel="prefetch" href="/assets/js/595.0a2c4ad4.js"><link rel="prefetch" href="/assets/js/596.2c075cd8.js"><link rel="prefetch" href="/assets/js/597.e904811b.js"><link rel="prefetch" href="/assets/js/598.f6ca8b71.js"><link rel="prefetch" href="/assets/js/599.ae3d12c4.js"><link rel="prefetch" href="/assets/js/6.451e012f.js"><link rel="prefetch" href="/assets/js/60.e6b60343.js"><link rel="prefetch" href="/assets/js/600.e71a0062.js"><link rel="prefetch" href="/assets/js/601.2571a19d.js"><link rel="prefetch" href="/assets/js/602.0f4fa961.js"><link rel="prefetch" href="/assets/js/603.d8387c37.js"><link rel="prefetch" href="/assets/js/604.69433906.js"><link rel="prefetch" href="/assets/js/605.1bc7d87a.js"><link rel="prefetch" href="/assets/js/606.ec419517.js"><link rel="prefetch" href="/assets/js/607.b473fb0b.js"><link rel="prefetch" href="/assets/js/608.a361b48c.js"><link rel="prefetch" href="/assets/js/609.9186f226.js"><link rel="prefetch" href="/assets/js/61.d50a156d.js"><link rel="prefetch" href="/assets/js/610.ff3cf241.js"><link rel="prefetch" href="/assets/js/611.c3c7e648.js"><link rel="prefetch" href="/assets/js/612.2a520ebd.js"><link rel="prefetch" href="/assets/js/613.42936ffc.js"><link rel="prefetch" href="/assets/js/614.3ca0de21.js"><link rel="prefetch" href="/assets/js/615.ecf60a47.js"><link rel="prefetch" href="/assets/js/616.17185e83.js"><link rel="prefetch" href="/assets/js/617.769d4cdf.js"><link rel="prefetch" href="/assets/js/618.015c6376.js"><link rel="prefetch" href="/assets/js/619.3af186d0.js"><link rel="prefetch" href="/assets/js/62.e24b7811.js"><link rel="prefetch" href="/assets/js/620.f8ff3784.js"><link rel="prefetch" href="/assets/js/621.4c21311f.js"><link rel="prefetch" href="/assets/js/622.355178df.js"><link rel="prefetch" href="/assets/js/623.45a30695.js"><link rel="prefetch" href="/assets/js/624.61e89d34.js"><link rel="prefetch" href="/assets/js/625.49e0d1ce.js"><link rel="prefetch" href="/assets/js/626.1b7ae767.js"><link rel="prefetch" href="/assets/js/627.b8c507cf.js"><link rel="prefetch" href="/assets/js/628.c5a43517.js"><link rel="prefetch" href="/assets/js/629.274eb0fd.js"><link rel="prefetch" href="/assets/js/63.b804baab.js"><link rel="prefetch" href="/assets/js/630.69e055ce.js"><link rel="prefetch" href="/assets/js/631.0892fc51.js"><link rel="prefetch" href="/assets/js/632.6a68e9a2.js"><link rel="prefetch" href="/assets/js/633.d536fe74.js"><link rel="prefetch" href="/assets/js/634.24695f39.js"><link rel="prefetch" href="/assets/js/635.3aeede9c.js"><link rel="prefetch" href="/assets/js/636.3628d8a6.js"><link rel="prefetch" href="/assets/js/637.40af5a79.js"><link rel="prefetch" href="/assets/js/638.15e257ae.js"><link rel="prefetch" href="/assets/js/639.31e6597c.js"><link rel="prefetch" href="/assets/js/64.eb5699ff.js"><link rel="prefetch" href="/assets/js/640.a071f6df.js"><link rel="prefetch" href="/assets/js/641.f9edd7bf.js"><link rel="prefetch" href="/assets/js/642.adcb583f.js"><link rel="prefetch" href="/assets/js/643.7c98a990.js"><link rel="prefetch" href="/assets/js/644.fb1213d8.js"><link rel="prefetch" href="/assets/js/645.220a5034.js"><link rel="prefetch" href="/assets/js/646.d66a419b.js"><link rel="prefetch" href="/assets/js/647.12ef89ab.js"><link rel="prefetch" href="/assets/js/648.a3112300.js"><link rel="prefetch" href="/assets/js/649.f457dfa5.js"><link rel="prefetch" href="/assets/js/65.0d8501b5.js"><link rel="prefetch" href="/assets/js/650.cc63d03b.js"><link rel="prefetch" href="/assets/js/651.16d1bbd6.js"><link rel="prefetch" href="/assets/js/652.0f5343f0.js"><link rel="prefetch" href="/assets/js/653.28f7710a.js"><link rel="prefetch" href="/assets/js/654.b343d473.js"><link rel="prefetch" href="/assets/js/655.215fe67b.js"><link rel="prefetch" href="/assets/js/656.79aa1653.js"><link rel="prefetch" href="/assets/js/657.c57f2b5c.js"><link rel="prefetch" href="/assets/js/658.d0aa0b95.js"><link rel="prefetch" href="/assets/js/659.2dfaed93.js"><link rel="prefetch" href="/assets/js/66.8361cc16.js"><link rel="prefetch" href="/assets/js/660.c00b347e.js"><link rel="prefetch" href="/assets/js/661.ecc4f968.js"><link rel="prefetch" href="/assets/js/662.06f83919.js"><link rel="prefetch" href="/assets/js/663.67d8849e.js"><link rel="prefetch" href="/assets/js/664.74dba1a9.js"><link rel="prefetch" href="/assets/js/665.28b450f0.js"><link rel="prefetch" href="/assets/js/666.0f4bb6ba.js"><link rel="prefetch" href="/assets/js/667.586074e3.js"><link rel="prefetch" href="/assets/js/668.b13c0e70.js"><link rel="prefetch" href="/assets/js/669.9d0d4cbc.js"><link rel="prefetch" href="/assets/js/67.37f46ba2.js"><link rel="prefetch" href="/assets/js/670.6b36ca72.js"><link rel="prefetch" href="/assets/js/671.33b2e754.js"><link rel="prefetch" href="/assets/js/672.3b02c287.js"><link rel="prefetch" href="/assets/js/673.3f274929.js"><link rel="prefetch" href="/assets/js/674.7d75584f.js"><link rel="prefetch" href="/assets/js/675.0de52334.js"><link rel="prefetch" href="/assets/js/676.6734133e.js"><link rel="prefetch" href="/assets/js/677.c6f4a973.js"><link rel="prefetch" href="/assets/js/678.1344b6be.js"><link rel="prefetch" href="/assets/js/679.23fed56f.js"><link rel="prefetch" href="/assets/js/68.27dbce5b.js"><link rel="prefetch" href="/assets/js/680.c49329d6.js"><link rel="prefetch" href="/assets/js/681.8df66615.js"><link rel="prefetch" href="/assets/js/682.77b4bff8.js"><link rel="prefetch" href="/assets/js/683.6cf41cf4.js"><link rel="prefetch" href="/assets/js/684.58deecd5.js"><link rel="prefetch" href="/assets/js/685.d2f7480e.js"><link rel="prefetch" href="/assets/js/686.0b77a241.js"><link rel="prefetch" href="/assets/js/687.2cc04b4f.js"><link rel="prefetch" href="/assets/js/688.da24cbae.js"><link rel="prefetch" href="/assets/js/689.a9961f74.js"><link rel="prefetch" href="/assets/js/69.8052a977.js"><link rel="prefetch" href="/assets/js/690.cb736269.js"><link rel="prefetch" href="/assets/js/691.21c13be1.js"><link rel="prefetch" href="/assets/js/692.3ed557d0.js"><link rel="prefetch" href="/assets/js/693.066efe93.js"><link rel="prefetch" href="/assets/js/694.5368f98a.js"><link rel="prefetch" href="/assets/js/695.4fdb93d5.js"><link rel="prefetch" href="/assets/js/696.9c055ac6.js"><link rel="prefetch" href="/assets/js/697.51e0c47c.js"><link rel="prefetch" href="/assets/js/698.08ca1dbd.js"><link rel="prefetch" href="/assets/js/699.ce7e9e2a.js"><link rel="prefetch" href="/assets/js/7.7e21c947.js"><link rel="prefetch" href="/assets/js/70.19faeb78.js"><link rel="prefetch" href="/assets/js/700.3676fa7f.js"><link rel="prefetch" href="/assets/js/701.82db4887.js"><link rel="prefetch" href="/assets/js/702.73425f22.js"><link rel="prefetch" href="/assets/js/703.d9391c74.js"><link rel="prefetch" href="/assets/js/704.d6e275cf.js"><link rel="prefetch" href="/assets/js/705.d2f23969.js"><link rel="prefetch" href="/assets/js/706.1c66dcc1.js"><link rel="prefetch" href="/assets/js/707.0fc5a26a.js"><link rel="prefetch" href="/assets/js/708.97471ee6.js"><link rel="prefetch" href="/assets/js/709.9b4d5665.js"><link rel="prefetch" href="/assets/js/71.d1683810.js"><link rel="prefetch" href="/assets/js/710.75fa8103.js"><link rel="prefetch" href="/assets/js/711.43777b40.js"><link rel="prefetch" href="/assets/js/712.5c583e39.js"><link rel="prefetch" href="/assets/js/713.5aa72111.js"><link rel="prefetch" href="/assets/js/714.e8215702.js"><link rel="prefetch" href="/assets/js/715.46614e7c.js"><link rel="prefetch" href="/assets/js/716.eaac6d69.js"><link rel="prefetch" href="/assets/js/717.c344c042.js"><link rel="prefetch" href="/assets/js/718.437bf0b2.js"><link rel="prefetch" href="/assets/js/719.23aa3deb.js"><link rel="prefetch" href="/assets/js/72.9fa783f0.js"><link rel="prefetch" href="/assets/js/720.9456a449.js"><link rel="prefetch" href="/assets/js/721.67fd324a.js"><link rel="prefetch" href="/assets/js/722.fc5e79ca.js"><link rel="prefetch" href="/assets/js/723.46db8115.js"><link rel="prefetch" href="/assets/js/724.31a11b8c.js"><link rel="prefetch" href="/assets/js/725.49cef603.js"><link rel="prefetch" href="/assets/js/726.7d0a2e7f.js"><link rel="prefetch" href="/assets/js/727.a1de6f02.js"><link rel="prefetch" href="/assets/js/728.7e0a727e.js"><link rel="prefetch" href="/assets/js/729.b6bf04fa.js"><link rel="prefetch" href="/assets/js/73.1ac0ac37.js"><link rel="prefetch" href="/assets/js/730.1c102528.js"><link rel="prefetch" href="/assets/js/731.80403e3d.js"><link rel="prefetch" href="/assets/js/732.cf8b4a6d.js"><link rel="prefetch" href="/assets/js/733.aab88d38.js"><link rel="prefetch" href="/assets/js/734.965a0adc.js"><link rel="prefetch" href="/assets/js/735.f9d33608.js"><link rel="prefetch" href="/assets/js/736.d1621f9e.js"><link rel="prefetch" href="/assets/js/737.a12ea0d3.js"><link rel="prefetch" href="/assets/js/738.96e61512.js"><link rel="prefetch" href="/assets/js/739.9bce4dfe.js"><link rel="prefetch" href="/assets/js/74.1913daec.js"><link rel="prefetch" href="/assets/js/740.c1a0bf7b.js"><link rel="prefetch" href="/assets/js/741.0185115e.js"><link rel="prefetch" href="/assets/js/742.21e99d78.js"><link rel="prefetch" href="/assets/js/743.e5f2407e.js"><link rel="prefetch" href="/assets/js/744.53d4e25a.js"><link rel="prefetch" href="/assets/js/745.9fb6722c.js"><link rel="prefetch" href="/assets/js/746.893e3a2f.js"><link rel="prefetch" href="/assets/js/747.ad94fed4.js"><link rel="prefetch" href="/assets/js/748.3421b09b.js"><link rel="prefetch" href="/assets/js/749.15c364e9.js"><link rel="prefetch" href="/assets/js/75.d63a9540.js"><link rel="prefetch" href="/assets/js/750.4e5379b7.js"><link rel="prefetch" href="/assets/js/751.18b0273f.js"><link rel="prefetch" href="/assets/js/752.24717596.js"><link rel="prefetch" href="/assets/js/753.5868bcc4.js"><link rel="prefetch" href="/assets/js/754.77808a6c.js"><link rel="prefetch" href="/assets/js/755.af7f7a71.js"><link rel="prefetch" href="/assets/js/76.342d837c.js"><link rel="prefetch" href="/assets/js/77.466349c3.js"><link rel="prefetch" href="/assets/js/78.886d05b6.js"><link rel="prefetch" href="/assets/js/79.b478bdab.js"><link rel="prefetch" href="/assets/js/8.9f40767d.js"><link rel="prefetch" href="/assets/js/80.9205cc43.js"><link rel="prefetch" href="/assets/js/81.77f831c9.js"><link rel="prefetch" href="/assets/js/82.650475d1.js"><link rel="prefetch" href="/assets/js/83.aa7e3d4b.js"><link rel="prefetch" href="/assets/js/84.2fc92fb4.js"><link rel="prefetch" href="/assets/js/85.0f633e10.js"><link rel="prefetch" href="/assets/js/86.e862f4bc.js"><link rel="prefetch" href="/assets/js/87.8a869468.js"><link rel="prefetch" href="/assets/js/88.6c584051.js"><link rel="prefetch" href="/assets/js/89.3ab84e02.js"><link rel="prefetch" href="/assets/js/9.7ed864ce.js"><link rel="prefetch" href="/assets/js/90.41e6925d.js"><link rel="prefetch" href="/assets/js/91.55055993.js"><link rel="prefetch" href="/assets/js/92.ced7b439.js"><link rel="prefetch" href="/assets/js/93.41cc8a7f.js"><link rel="prefetch" href="/assets/js/94.6d2b144f.js"><link rel="prefetch" href="/assets/js/95.399a7909.js"><link rel="prefetch" href="/assets/js/96.556f8f9f.js"><link rel="prefetch" href="/assets/js/97.47ecdf46.js"><link rel="prefetch" href="/assets/js/98.fdbe6822.js"><link rel="prefetch" href="/assets/js/99.db8442e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ece31e0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Fanx 知识库" class="logo"> <span class="site-name can-hide">Fanx 知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Web容器 - Tomcat知识体系详解</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/50542a/" class="sidebar-link">♥Tomcat源码详解知识体系详解♥</a></li><li><a href="/pages/9a8819/" aria-current="page" class="active sidebar-link">Tomcat - 如何设计一个简单的web容器</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/30d10a/" class="sidebar-link">Tomcat - 理解Tomcat架构设计</a></li><li><a href="/pages/43ebeb/" class="sidebar-link">Tomcat - 源码分析准备和分析入口</a></li><li><a href="/pages/a181a9/" class="sidebar-link">Tomcat - 启动过程-初始化和启动流程</a></li><li><a href="/pages/cdb0da/" class="sidebar-link">Tomcat - 启动过程-类加载机制详解</a></li><li><a href="/pages/d9dee8/" class="sidebar-link">Tomcat - 启动过程-Catalina的加载</a></li><li><a href="/pages/cf2c21/" class="sidebar-link">Tomcat - 组件生命周期管理-LifeCycle</a></li><li><a href="/pages/f4f850/" class="sidebar-link">Tomcat - 组件拓展管理-JMX和MBean</a></li><li><a href="/pages/e33b3b/" class="sidebar-link">Tomcat - 事件的监听机制-观察者模式</a></li><li><a href="/pages/fa3842/" class="sidebar-link">Tomcat - Server的设计和实现-StandardServer</a></li><li><a href="/pages/9e0e57/" class="sidebar-link">Tomcat - Service的设计和实现-StandardService</a></li><li><a href="/pages/2ba75a/" class="sidebar-link">Tomcat - 线程池的设计与实现-StandardThreadExecutor</a></li><li><a href="/pages/5fdb87/" class="sidebar-link">Tomcat - Request请求处理-Container设计</a></li><li><a href="/pages/3f3528/" class="sidebar-link">Tomcat - Container容器之Engine-StandardEngine</a></li><li><a href="/pages/906181/" class="sidebar-link">Tomcat - Container的管道机制-责任链模式</a></li><li><a href="/pages/1fe46c/" class="sidebar-link">Tomcat - Request请求处理过程-Connector</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>ORM框架 - MyBatis知识体系详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分表分库 - ShardingSphere详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>调试源代码常用快捷键</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring源代码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开源代码集合</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0" title="分类" data-v-06225672>源代码学习</a></li><li data-v-06225672><a href="/categories/?category=Web%E5%AE%B9%E5%99%A8%20-%20Tomcat%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E8%AF%A6%E8%A7%A3" title="分类" data-v-06225672>Web容器 - Tomcat知识体系详解</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/FanXGit" target="_blank" title="作者" class="beLink" data-v-06225672>fanx</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABKFJREFUSA3tVl1oFVcQnrMbrak3QUgkya1akpJYcrUtIqW1JvFBE9LiQ5v6JmJpolbMg32rVrhgoYK0QiMY6i9Y6EMaW5D+xFJaTYItIuK2Kr3+BJNwkxBj05sQY3b3nM6cs2dv9t7NT/vQJw/sndk5M/PNzJkzewGerP+pAmy+ON8lLzUJgA8ZYxYIYZmGYRnctDaWvJJAmTtfP1pvXsBCCPP8QFcCaRkZYACgDZFO4stNIcBCajEOlmmC9XpJ9bAGCaPaPmzPl32dvLSVu3BWCTQs0XQQ6g0DYgwLIoAZbBCdW/i+781o1VVlm/410mw4h06Y7bIPHNyWDyL4FHkX03Q8SrzNhZTZriieckWt7cL6MM85YcLpsi/7O9/iXFT6MswI0DmmpkSaJ0qLxFIm3+i1THHB3zmBH3PYx9CcykcLOeQVVa7QtdxTgQgEleX2AjHYfwA+2ddV77ruGoJUbhGDI09YSNXyMpUt5ylOzxgbUmtOp7NmbNt8v3arjTBfYELmLUV+M+nSawNNAUqpT3ClJWg5I3BLT+cGW/DXNGCa6tx1aakCGEigArTn4TDIPdrXXYKCZNrHLMCOEPvHBlLQ99s9eHB7EB6NTki73CVPQ2F5MSx/uRQixfmq7rK0wYD8w8E905bnPDfwoWs/rfv93NWN/ZfvwsLIU7A09gxECyISeGJkHAau98L97tuw7NXnoPyNF8FcYGLGKsOs0mN3OEyec9esGW/ZEl945dTP34wlR2FZVQWU1q0Cw8Tr7p+hgLLNL0FPxx/Q35mA8aEUrH6nCgwEl0tn7wUiZYJnNRh6DK4UH/k0lfyrsBKdPVv/AriGIQcEDQZ65LBAGe2Rzui9Ybjz7XUppz1/uKBbyVPGkN3ZAeC6hr0x7Nr38N5+EqkoOm17xpoqR9ohQF55ERSvr4Dkr3chNfC3DMzGJlNBElW8w9nsGQvhNGIzDkXzCg8cLK951xHsFBlTJspJNi3ZFIMF2AeDV3q8DNOB+YHi6QTrChDIWDBRi5U5f+ZMfJLu3ccrqxtdxk4SKH336LFxSmkqefwU5T8fhdSdQf9IVKD6aNiwI/hnmcAZ91isYMJIaCUCx9W098+LgruikeTqzqqxKPUwqJyCPJiyemVVZBOijDGjD38Os0jOiSPL1z3SPjXNANbiNPXAdzTfukjjuknNBbyz3nwgTd3AVFqUJ5hpHlq9MveLnWwttUfoygBmvVjuikxND3znrhsELnZk7k+OjIGxeNEkomyLVta0xxn+HZhjBc4YZ/AFjHjz9u3xRZl2BN4aq9nFwWh16IrQ1aHHEd3j1+4/dB9OtH4e29A2H1DyHQRmOSfQZ1Fy7MHBTGB6J/Djq6p3OxyO2cB+4Car7v/o3GXgfAkj23+x9ID1Teoamo/SXcbvSf2PX7Vc8DdCmE1vN9di+32P9/5YR3vLnhCVGUWBjEkr3yh4H8v9CzmsbdhzOKzsJKM90iFdaTMjRPhGVsakRvOaRidljo6H6G7j+ctrJpsP+4COhDIl0La2+FS4+5mlocBaXY5QnGZysIBYoeSsl5qQzrSj/cgNrfuEzlWBfwA+EjrZyWUvpAAAAABJRU5ErkJggg==">Tomcat - 如何设计一个简单的web容器<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="tomcat-如何设计一个简单的web容器"><a href="#tomcat-如何设计一个简单的web容器" class="header-anchor">#</a> Tomcat - 如何设计一个简单的web容器</h1> <p>===================================================</p> <blockquote><p>在学习Tomcat前，很多人先入为主的对它的认知是巨复杂的；所以第一步，在学习它之前，要打破这种观念，我们通过学习如何设计一个最基本的web容器来看它需要考虑什么；进而在真正学习Tomcat时，多把重点放在它的顶层设计上，而不是某一块代码上, 思路永远比具体实现重要的多。@pdai</p></blockquote> <ul><li><a href="#tomcat---%E5%A6%82%E4%BD%95%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95%E7%9A%84web%E5%AE%B9%E5%99%A8">Tomcat - 如何设计一个简单的web容器</a> <ul><li><a href="#%E5%86%99%E5%9C%A8%E5%89%8D%E9%9D%A2">写在前面</a></li> <li><a href="#%E5%9F%BA%E7%A1%80%E8%AE%A4%E7%9F%A5%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%92%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E4%BA%A4%E4%BA%92">基础认知：如何实现服务器和客户端（浏览器）的交互</a> <ul><li><a href="#http%E5%8D%8F%E8%AE%AE">HTTP协议</a></li> <li><a href="#socket">Socket</a></li> <li><a href="#seversocket">SeverSocket</a></li></ul></li> <li><a href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95web%E5%AE%B9%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%AF%B9%E9%9D%99%E6%80%81%E8%B5%84%E6%BA%90">一个简单web容器的设计和实现：对静态资源</a> <ul><li><a href="#%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1">组件设计</a></li> <li><a href="#%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0">组件实现</a></li></ul></li> <li><a href="#%E4%B8%80%E4%B8%AA%E7%AE%80%E5%8D%95web%E5%AE%B9%E5%99%A8%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%AE%9E%E7%8E%B0%E5%AF%B9servelet">一个简单web容器的设计和实现：对Servelet</a> <ul><li><a href="#%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1-1">组件设计</a></li> <li><a href="#%E7%BB%84%E4%BB%B6%E5%AE%9E%E7%8E%B0-1">组件实现</a></li> <li><a href="#%E5%88%A9%E7%94%A8%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F%E6%94%B9%E9%80%A0">利用外观模式改造</a></li></ul></li> <li><a href="#%E6%80%BB%E7%BB%93">总结</a></li></ul></li></ul> <h1 id="写在前面"><a href="#写在前面" class="header-anchor">#</a> 写在前面</h1> <hr> <p>我们在学习一项技术时，需要学习是它的知识体系，而不是碎片化的知识点。在构建知识体系时，我们往往需要先全局的看完一个教程或者一本书，这是构建的基础。这里我推荐大家看两本书：</p> <p><img src="/assets/img/tomcat-x-design-7.ec3bee1f.png" alt=""></p> <p>特别是第一本：经典的《How Tomcat Works》的中文版，它从0基础逐步构建出Tomcat，适合新手；本节中很多内容源自这本书。</p> <p>本系列在本之后，将转为直接分析Tomcat框架。</p> <h1 id="基础认知-如何实现服务器和客户端-浏览器-的交互"><a href="#基础认知-如何实现服务器和客户端-浏览器-的交互" class="header-anchor">#</a> 基础认知：如何实现服务器和客户端（浏览器）的交互</h1> <hr> <blockquote><p>客户端和服务器端之间的交互式通过Socket来实现的，它属于应用层的协议。</p></blockquote> <h3 id="http协议"><a href="#http协议" class="header-anchor">#</a> HTTP协议</h3> <p>http协议相关的内容可以参看这里：<a href="https://pdai.tech/md/develop/protocol/dev-protocol-http.html" target="_blank" rel="noopener noreferrer">网络协议 - HTTP 协议详解<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h3 id="socket"><a href="#socket" class="header-anchor">#</a> Socket</h3> <p>Socket是网络连接的一个端点。套接字使得一个应用可以从网络中读取和写入数据。放在两 个不同计算机上的两个应用可以通过连接发送和接受字节流。为了从你的应用发送一条信息到另 一个应用，你需要知道另一个应用的 IP 地址和套接字端口。在 Java 里边，套接字指的是<code>java.net.Socket</code>类。</p> <p>要创建一个套接字，你可以使用 Socket 类众多构造方法中的一个。其中一个接收主机名称 和端口号:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public Socket (java.lang.String host, int port)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>在这里主机是指远程机器名称或者 IP 地址，端口是指远程应用的端口号。例如，要连接 yahoo.com 的 80 端口，你需要构造以下的 Socket 对象:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>new Socket (&quot;yahoo.com&quot;, 80);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>一旦你成功创建了一个 Socket 类的实例，你可以使用它来发送和接受字节流。要发送字节 流，你首先必须调用Socket类的getOutputStream方法来获取一个<code>java.io.OutputStream</code>对象。 要 发 送 文 本 到 一 个 远 程 应 用 ， 你 经 常 要 从 返 回 的 OutputStream 对 象 中 构 造 一 个 <code>java.io.PrintWriter</code> 对象。要从连接的另一端接受字节流，你可以调用 Socket 类的 getInputStream 方法用来返回一个 <code>java.io.InputStream</code> 对象。</p> <p><img src="/assets/img/tomcat-x-design-6.e83e8d34.png" alt=""></p> <h3 id="seversocket"><a href="#seversocket" class="header-anchor">#</a> SeverSocket</h3> <p>Socket 类代表一个<strong>客户端套接字</strong>，即任何时候你想连接到一个远程服务器应用的时候你构造的套接字，现在，假如你想实施一个服务器应用，例如一个 HTTP 服务器或者 FTP 服务器，你需要一种不同的做法。这是因为你的服务器必须随时待命，因为它不知道一个客户端应用什么时候会尝试去连接它。为了让你的应用能随时待命，你需要使用 <code>java.net.ServerSocket</code> 类。这是 <strong>服务器套接字</strong>的实现。</p> <p><code>ServerSocket</code> 和 <code>Socket</code> 不同，服务器套接字的角色是等待来自客户端的连接请求。<strong>一旦服务器套接字获得一个连接请求，它创建一个 Socket 实例来与客户端进行通信</strong>。</p> <p>要创建一个服务器套接字，你需要使用 ServerSocket 类提供的四个构造方法中的一个。你 需要指定 IP 地址和服务器套接字将要进行监听的端口号。通常，IP 地址将会是 127.0.0.1，也 就是说，服务器套接字将会监听本地机器。服务器套接字正在监听的 IP 地址被称为是绑定地址。 服务器套接字的另一个重要的属性是 backlog，这是服务器套接字开始拒绝传入的请求之前，传 入的连接请求的最大队列长度。</p> <p>其中一个 ServerSocket 类的构造方法如下所示:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public ServerSocket(int port, int backLog, InetAddress bindingAddress);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h1 id="一个简单web容器的设计和实现-对静态资源"><a href="#一个简单web容器的设计和实现-对静态资源" class="header-anchor">#</a> 一个简单web容器的设计和实现：对静态资源</h1> <hr> <blockquote><p>准备，这个例子来源于《How Tomcat Works》, 可以从这里下载源码</p></blockquote> <p>注意：当你跑如下程序时，可能会由于浏览器新版本不再支持的HTTP 0.9协议，而造成浏览器页面没有返回信息。</p> <h3 id="组件设计"><a href="#组件设计" class="header-anchor">#</a> 组件设计</h3> <p>根据上述的基础，我们可以看到，我们只需要提供三个最基本的类，分别是：</p> <ul><li><strong>Request</strong> - 表示请求，这里表示浏览器发起的HTTP请求</li> <li><strong>HttpServer</strong> - 表示处理请求的服务器，同时这里使用我们上面铺垫的ServerSocket</li> <li><strong>Reponse</strong> - 表示处理请求后的响应， 这里表示服务器对HTTP请求的响应结果</li></ul> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="组件实现"><a href="#组件实现" class="header-anchor">#</a> 组件实现</h3> <p>从上图中我们可以看到，组织这几个类的入口在Server的启动方法中，即main方法中, 所以我们透过main方法从Server类进行分析：</p> <ul><li>Server是如何启动的？</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class HttpServer {

  // 存放静态资源的位置
  public static final String WEB_ROOT =
    System.getProperty(&quot;user.dir&quot;) + File.separator  + &quot;webroot&quot;;

  // 关闭Server的请求
  private static final String SHUTDOWN_COMMAND = &quot;/SHUTDOWN&quot;;

  // 是否关闭Server
  private boolean shutdown = false;

  // 主入口
  public static void main(String[] args) {
    HttpServer server = new HttpServer();
    server.await();
  }

  public void await() {
    // 启动ServerSocket
    ServerSocket serverSocket = null;
    int port = 8080;
    try {
      serverSocket =  new ServerSocket(port, 1, InetAddress.getByName(&quot;127.0.0.1&quot;));
    }
    catch (IOException e) {
      e.printStackTrace();
      System.exit(1);
    }

    // 循环等待一个Request请求
    while (!shutdown) {
      Socket socket = null;
      InputStream input = null;
      OutputStream output = null;
      try {
        // 创建socket
        socket = serverSocket.accept();
        input = socket.getInputStream();
        output = socket.getOutputStream();

        // 封装input至request, 并处理请求
        Request request = new Request(input);
        request.parse();

        // 封装output至response
        Response response = new Response(output);
        response.setRequest(request);
        response.sendStaticResource();

        // 关闭socket
        socket.close();

        // 如果接受的是关闭请求，则设置关闭监听request的标志
        shutdown = request.getUri().equals(SHUTDOWN_COMMAND);
      }
      catch (Exception e) {
        e.printStackTrace();
        continue;
      }
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br></div></div><ul><li>Request请求是如何封装和处理的？</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class Request {

  private InputStream input;
  private String uri;

  // 初始化Request
  public Request(InputStream input) {
    this.input = input;
  }

  // 处理request的方法
  public void parse() {
    // 从socket中读取字符
    StringBuffer request = new StringBuffer(2048);
    int i;
    byte[] buffer = new byte[2048];
    try {
      i = input.read(buffer);
    }
    catch (IOException e) {
      e.printStackTrace();
      i = -1;
    }
    for (int j=0; j&lt;i; j++) {
      request.append((char) buffer[j]);
    }
    System.out.print(request.toString());

    // 获得两个空格之间的内容, 这里将是HttpServer.WEB_ROOT中静态文件的文件名称
    uri = parseUri(request.toString());
  }

  private String parseUri(String requestString) {
    int index1, index2;
    index1 = requestString.indexOf(' ');
    if (index1 != -1) {
      index2 = requestString.indexOf(' ', index1 + 1);
      if (index2 &gt; index1)
        return requestString.substring(index1 + 1, index2);
    }
    return null;
  }

  public String getUri() {
    return uri;
  }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><ul><li>Response中响应了什么？</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class Response {

  private static final int BUFFER_SIZE = 1024;
  Request request;
  OutputStream output;

  public Response(OutputStream output) {
    this.output = output;
  }

  // response中封装了request，以便获取request中的请求参数
  public void setRequest(Request request) {
    this.request = request;
  }

  public void sendStaticResource() throws IOException {
    byte[] bytes = new byte[BUFFER_SIZE];
    FileInputStream fis = null;
    try {
      // 读取文件内容
      File file = new File(HttpServer.WEB_ROOT, request.getUri());
      if (file.exists()) {
        fis = new FileInputStream(file);
        int ch = fis.read(bytes, 0, BUFFER_SIZE);
        while (ch!=-1) {
          output.write(bytes, 0, ch);
          ch = fis.read(bytes, 0, BUFFER_SIZE);
        }
      }
      else {
        // 文件不存在时，输出404信息
        String errorMessage = &quot;HTTP/1.1 404 File Not Found\r\n&quot; +
          &quot;Content-Type: text/html\r\n&quot; +
          &quot;Content-Length: 23\r\n&quot; +
          &quot;\r\n&quot; +
          &quot;&lt;h1&gt;File Not Found&lt;/h1&gt;&quot;;
        output.write(errorMessage.getBytes());
      }
    }
    catch (Exception e) {
      // thrown if cannot instantiate a File object
      System.out.println(e.toString() );
    }
    finally {
      if (fis!=null)
        fis.close();
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><ul><li>启动输出</li></ul> <p>当我们run上面HttpServer中的main方法之后，我们就可以打开浏览器http://localhost:8080, 后面添加参数看返回webroot目录中静态文件的内容了(比如这里我加了hello.txt文件到webroot下，并访问http://localhost:8080/hello.txt)。</p> <p><img src="/assets/img/tomcat-x-design-5.88d78569.png" alt=""></p> <p><img src="data:image/png;base64,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" alt=""></p> <h1 id="一个简单web容器的设计和实现-对servelet"><a href="#一个简单web容器的设计和实现-对servelet" class="header-anchor">#</a> 一个简单web容器的设计和实现：对Servelet</h1> <hr> <p>上面这个例子是不是很简单？是否打破了对一个简单http服务器的认知，减少了对它的恐惧。</p> <p>但是上述的例子中只处理了静态资源，我们如果要处理Servlet呢？</p> <h3 id="组件设计-2"><a href="#组件设计-2" class="header-anchor">#</a> 组件设计</h3> <p>不难发现，我们只需要在HttpServer只需要请求的处理委托给ServletProcessor, 让它接受请求，并处理Response即可。</p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="组件实现-2"><a href="#组件实现-2" class="header-anchor">#</a> 组件实现</h3> <ul><li>在HttpServer中</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void await() {
    //....

        // create Response object
        Response response = new Response(output);
        response.setRequest(request);

        // 不再有response自己处理
        //response.sendStaticResource();

        // 而是如果以/servlet/开头，则委托ServletProcessor处理
        if (request.getUri().startsWith(&quot;/servlet/&quot;)) {
          ServletProcessor1 processor = new ServletProcessor1();
          processor.process(request, response);
        } else {
          // 原有的静态资源处理
          StaticResourceProcessor processor = new StaticResourceProcessor();
          processor.process(request, response);
        }

    // ....
  }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>ServletProcessor 如何处理的？</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class ServletProcessor1 {

  public void process(Request request, Response response) {

    // 获取servlet名字
    String uri = request.getUri();
    String servletName = uri.substring(uri.lastIndexOf(&quot;/&quot;) + 1);
    
    // 初始化URLClassLoader
    URLClassLoader loader = null;
    try {
      // create a URLClassLoader
      URL[] urls = new URL[1];
      URLStreamHandler streamHandler = null;
      File classPath = new File(Constants.WEB_ROOT);
      // the forming of repository is taken from the createClassLoader method in
      // org.apache.catalina.startup.ClassLoaderFactory
      String repository = (new URL(&quot;file&quot;, null, classPath.getCanonicalPath() + File.separator)).toString() ;
      // the code for forming the URL is taken from the addRepository method in
      // org.apache.catalina.loader.StandardClassLoader class.
      urls[0] = new URL(null, repository, streamHandler);
      loader = new URLClassLoader(urls);
    } catch (IOException e) {
      System.out.println(e.toString() );
    }

    // 用classLoader加载上面的servlet
    Class myClass = null;
    try {
      myClass = loader.loadClass(servletName);
    }
    catch (ClassNotFoundException e) {
      System.out.println(e.toString());
    }

    // 将加载到的class转成Servlet，并调用service方法处理
    Servlet servlet = null;
    try {
      servlet = (Servlet) myClass.newInstance();
      servlet.service((ServletRequest) request, (ServletResponse) response);
    } catch (Exception e) {
      System.out.println(e.toString());
    } catch (Throwable e) {
      System.out.println(e.toString());
    }

  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><ul><li>Repsonse</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class PrimitiveServlet implements Servlet {

  public void init(ServletConfig config) throws ServletException {
    System.out.println(&quot;init&quot;);
  }

  public void service(ServletRequest request, ServletResponse response)
    throws ServletException, IOException {
    System.out.println(&quot;from service&quot;);
    PrintWriter out = response.getWriter();
    out.println(&quot;Hello. Roses are red.&quot;);
    out.print(&quot;Violets are blue.&quot;);
  }

  public void destroy() {
    System.out.println(&quot;destroy&quot;);
  }

  public String getServletInfo() {
    return null;
  }
  public ServletConfig getServletConfig() {
    return null;
  }

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>访问 URL</li></ul> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="利用外观模式改造"><a href="#利用外观模式改造" class="header-anchor">#</a> 利用外观模式改造</h3> <p>上述代码存在一个问题，</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 将加载到的class转成Servlet，并调用service方法处理
    Servlet servlet = null;
    try {
      servlet = (Servlet) myClass.newInstance();
      servlet.service((ServletRequest) request, (ServletResponse) response);
    } catch (Exception e) {
      System.out.println(e.toString());
    } catch (Throwable e) {
      System.out.println(e.toString());
    }
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>这里直接处理将request和response传给servlet处理是不安全的，因为request可以向下转型为Request类，从而ServeletRequest便具备了访问Request中方法的能力。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class Request implements ServletRequest {
  // 一些public方法
}
public class Response implements ServletResponse {

}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>解决的方法便是通过外观模式进行改造：</p> <p><img src="data:image/png;base64,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" alt=""></p> <ul><li>RequestFacade为例</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class RequestFacade implements ServletRequest {

  private ServletRequest request = null;

  public RequestFacade(Request request) {
    this.request = request;
  }

  /* implementation of the ServletRequest*/
  public Object getAttribute(String attribute) {
    return request.getAttribute(attribute);
  }

  public Enumeration getAttributeNames() {
    return request.getAttributeNames();
  }

  public String getRealPath(String path) {
    return request.getRealPath(path);
  }

...
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><ul><li>Process中由传入外观类</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>Servlet servlet = null;
RequestFacade requestFacade = new RequestFacade(request); // 转换成外观类
ResponseFacade responseFacade = new ResponseFacade(response);// 转换成外观类
try {
  servlet = (Servlet) myClass.newInstance();
  servlet.service((ServletRequest) requestFacade, (ServletResponse) responseFacade);
}
catch (Exception e) {
  System.out.println(e.toString());
}
catch (Throwable e) {
  System.out.println(e.toString());
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h1 id="总结"><a href="#总结" class="header-anchor">#</a> 总结</h1> <hr> <p>当我们看到这么一个简单的web容器实现之后，我们便不再觉得Tomcat高高在上；这将为我们继续分析Tomcat中核心源码提供基础。)</p></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://fanxgit.github.io/fanxNotes/edit/master/docs/源代码学习/01.Web容器 - Tomcat知识体系详解/02.Tomcat - 如何设计一个简单的web容器.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/17/2023, 5:04:28 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/50542a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">♥Tomcat源码详解知识体系详解♥</div></a> <a href="/pages/30d10a/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Tomcat - 理解Tomcat架构设计</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/50542a/" class="prev">♥Tomcat源码详解知识体系详解♥</a></span> <span class="next"><a href="/pages/30d10a/">Tomcat - 理解Tomcat架构设计</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/797621/"><div>
            VuePress+GithubPages教程
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/016620/"><div>
            java打jar包整理
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b23a10/"><div>
            多线程问题总结
            <!----></div></a> <span class="date">11-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.38fd400a.js" defer></script><script src="/assets/js/3.e11db813.js" defer></script><script src="/assets/js/158.540f7a5a.js" defer></script>
  </body>
</html>
