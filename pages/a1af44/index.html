<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>MyBatis详解 - 数据源与连接池 | Fanx 知识库</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.svg">[object Object]
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.6ece31e0.css" as="style"><link rel="preload" href="/assets/js/app.38fd400a.js" as="script"><link rel="preload" href="/assets/js/3.e11db813.js" as="script"><link rel="preload" href="/assets/js/205.411987d7.js" as="script"><link rel="prefetch" href="/assets/js/10.939e2dd4.js"><link rel="prefetch" href="/assets/js/100.4a08f581.js"><link rel="prefetch" href="/assets/js/101.45cd45c9.js"><link rel="prefetch" href="/assets/js/102.ac1359d1.js"><link rel="prefetch" href="/assets/js/103.22344102.js"><link rel="prefetch" href="/assets/js/104.5071cdfd.js"><link rel="prefetch" href="/assets/js/105.7767c121.js"><link rel="prefetch" href="/assets/js/106.809b79f1.js"><link rel="prefetch" href="/assets/js/107.62fd626a.js"><link rel="prefetch" href="/assets/js/108.0583fdc1.js"><link rel="prefetch" href="/assets/js/109.fa127771.js"><link rel="prefetch" href="/assets/js/11.6463adc8.js"><link rel="prefetch" href="/assets/js/110.5cf9f09c.js"><link rel="prefetch" href="/assets/js/111.9d963667.js"><link rel="prefetch" href="/assets/js/112.bc2b8a6e.js"><link rel="prefetch" href="/assets/js/113.2ae29573.js"><link rel="prefetch" href="/assets/js/114.0b2cedfa.js"><link rel="prefetch" href="/assets/js/115.652e433e.js"><link rel="prefetch" href="/assets/js/116.bcc5d64a.js"><link rel="prefetch" href="/assets/js/117.30b02d0d.js"><link rel="prefetch" href="/assets/js/118.87f4f927.js"><link rel="prefetch" href="/assets/js/119.05839492.js"><link rel="prefetch" href="/assets/js/12.a17960e5.js"><link rel="prefetch" href="/assets/js/120.3d772c9c.js"><link rel="prefetch" href="/assets/js/121.bd8fcebf.js"><link rel="prefetch" href="/assets/js/122.e58d2205.js"><link rel="prefetch" href="/assets/js/123.f2c2826d.js"><link rel="prefetch" href="/assets/js/124.12d9ff87.js"><link rel="prefetch" href="/assets/js/125.c7e4bf1c.js"><link rel="prefetch" href="/assets/js/126.71c358fb.js"><link rel="prefetch" href="/assets/js/127.fb1922e5.js"><link rel="prefetch" href="/assets/js/128.25cbf771.js"><link rel="prefetch" href="/assets/js/129.50047ea3.js"><link rel="prefetch" href="/assets/js/13.727ebfda.js"><link rel="prefetch" href="/assets/js/130.a77cfa28.js"><link rel="prefetch" href="/assets/js/131.1618c1f5.js"><link rel="prefetch" href="/assets/js/132.4073573b.js"><link rel="prefetch" href="/assets/js/133.f6e4882f.js"><link rel="prefetch" href="/assets/js/134.1de81973.js"><link rel="prefetch" href="/assets/js/135.43148a0c.js"><link rel="prefetch" href="/assets/js/136.12b3ef34.js"><link rel="prefetch" href="/assets/js/137.accefc34.js"><link rel="prefetch" href="/assets/js/138.8d3115ff.js"><link rel="prefetch" href="/assets/js/139.6e492e2b.js"><link rel="prefetch" href="/assets/js/14.bc6d3062.js"><link rel="prefetch" href="/assets/js/140.3d98f006.js"><link rel="prefetch" href="/assets/js/141.542d08af.js"><link rel="prefetch" href="/assets/js/142.c91a19a2.js"><link rel="prefetch" href="/assets/js/143.0c681ed2.js"><link rel="prefetch" href="/assets/js/144.62e9c646.js"><link rel="prefetch" href="/assets/js/145.ebc34777.js"><link rel="prefetch" href="/assets/js/146.d94a04a7.js"><link rel="prefetch" href="/assets/js/147.b45158de.js"><link rel="prefetch" href="/assets/js/148.5dfa6740.js"><link rel="prefetch" href="/assets/js/149.cb6f2cb0.js"><link rel="prefetch" href="/assets/js/15.a9468bf1.js"><link rel="prefetch" href="/assets/js/150.9f58dbc6.js"><link rel="prefetch" href="/assets/js/151.0a1c07e3.js"><link rel="prefetch" href="/assets/js/152.eafe4843.js"><link rel="prefetch" href="/assets/js/153.fb94cab5.js"><link rel="prefetch" href="/assets/js/154.07f7a11d.js"><link rel="prefetch" href="/assets/js/155.7f6da40b.js"><link rel="prefetch" href="/assets/js/156.2f007ca1.js"><link rel="prefetch" href="/assets/js/157.a35b5249.js"><link rel="prefetch" href="/assets/js/158.540f7a5a.js"><link rel="prefetch" href="/assets/js/159.f62e0315.js"><link rel="prefetch" href="/assets/js/16.ace3b806.js"><link rel="prefetch" href="/assets/js/160.e043c758.js"><link rel="prefetch" href="/assets/js/161.d90141bf.js"><link rel="prefetch" href="/assets/js/162.ddcdbfb9.js"><link rel="prefetch" href="/assets/js/163.f1ba395e.js"><link rel="prefetch" href="/assets/js/164.9f398973.js"><link rel="prefetch" href="/assets/js/165.0db3da51.js"><link rel="prefetch" href="/assets/js/166.b5305797.js"><link rel="prefetch" href="/assets/js/167.e7b2f76b.js"><link rel="prefetch" href="/assets/js/168.a2ecf883.js"><link rel="prefetch" href="/assets/js/169.88bd4d26.js"><link rel="prefetch" href="/assets/js/17.60481837.js"><link rel="prefetch" href="/assets/js/170.fb1699e2.js"><link rel="prefetch" href="/assets/js/171.47268bef.js"><link rel="prefetch" href="/assets/js/172.79002327.js"><link rel="prefetch" href="/assets/js/173.3b1813fb.js"><link rel="prefetch" href="/assets/js/174.362811a9.js"><link rel="prefetch" href="/assets/js/175.bb48bcd7.js"><link rel="prefetch" href="/assets/js/176.97bbf32c.js"><link rel="prefetch" href="/assets/js/177.0717ff7a.js"><link rel="prefetch" href="/assets/js/178.75bff3b7.js"><link rel="prefetch" href="/assets/js/179.3e7db0a2.js"><link rel="prefetch" href="/assets/js/18.dd3c5709.js"><link rel="prefetch" href="/assets/js/180.c81da8dd.js"><link rel="prefetch" href="/assets/js/181.142d6d1c.js"><link rel="prefetch" href="/assets/js/182.fb312040.js"><link rel="prefetch" href="/assets/js/183.3684267e.js"><link rel="prefetch" href="/assets/js/184.ec2a13bc.js"><link rel="prefetch" href="/assets/js/185.a7acace4.js"><link rel="prefetch" href="/assets/js/186.7df28551.js"><link rel="prefetch" href="/assets/js/187.347e9348.js"><link rel="prefetch" href="/assets/js/188.07356026.js"><link rel="prefetch" href="/assets/js/189.0816176d.js"><link rel="prefetch" href="/assets/js/19.cc2d4ad1.js"><link rel="prefetch" href="/assets/js/190.fd5dd8cc.js"><link rel="prefetch" href="/assets/js/191.a938967e.js"><link rel="prefetch" href="/assets/js/192.859b71a1.js"><link rel="prefetch" href="/assets/js/193.adcf2ec3.js"><link rel="prefetch" href="/assets/js/194.69d1169c.js"><link rel="prefetch" href="/assets/js/195.ad7cbcc4.js"><link rel="prefetch" href="/assets/js/196.b65138da.js"><link rel="prefetch" href="/assets/js/197.b4fca73b.js"><link rel="prefetch" href="/assets/js/198.2494a23f.js"><link rel="prefetch" href="/assets/js/199.404b9ce1.js"><link rel="prefetch" href="/assets/js/2.938bab56.js"><link rel="prefetch" href="/assets/js/20.361e2bf6.js"><link rel="prefetch" href="/assets/js/200.42b54eae.js"><link rel="prefetch" href="/assets/js/201.ab495eb8.js"><link rel="prefetch" href="/assets/js/202.2cbc5c9a.js"><link rel="prefetch" href="/assets/js/203.abf3fde5.js"><link rel="prefetch" href="/assets/js/204.4fdd4cfb.js"><link rel="prefetch" href="/assets/js/206.dbcab3ae.js"><link rel="prefetch" href="/assets/js/207.f1429354.js"><link rel="prefetch" href="/assets/js/208.f763286c.js"><link rel="prefetch" href="/assets/js/209.c1edbca5.js"><link rel="prefetch" href="/assets/js/21.ae1e88a3.js"><link rel="prefetch" href="/assets/js/210.b2a1501d.js"><link rel="prefetch" href="/assets/js/211.fe1fd5f7.js"><link rel="prefetch" href="/assets/js/212.0fd39a8f.js"><link rel="prefetch" href="/assets/js/213.bb3fc163.js"><link rel="prefetch" href="/assets/js/214.c42e1ef3.js"><link rel="prefetch" href="/assets/js/215.4f0fa915.js"><link rel="prefetch" href="/assets/js/216.07c485c9.js"><link rel="prefetch" href="/assets/js/217.ada25e7a.js"><link rel="prefetch" href="/assets/js/218.2f761d3c.js"><link rel="prefetch" href="/assets/js/219.32d1a663.js"><link rel="prefetch" href="/assets/js/22.0b09d67f.js"><link rel="prefetch" href="/assets/js/220.36c56cf4.js"><link rel="prefetch" href="/assets/js/221.3e0431e2.js"><link rel="prefetch" href="/assets/js/222.90aa0ff7.js"><link rel="prefetch" href="/assets/js/223.5966d7df.js"><link rel="prefetch" href="/assets/js/224.7e2329e1.js"><link rel="prefetch" href="/assets/js/225.2ed3675d.js"><link rel="prefetch" href="/assets/js/226.fa3cef02.js"><link rel="prefetch" href="/assets/js/227.07bf7bca.js"><link rel="prefetch" href="/assets/js/228.9ac2589a.js"><link rel="prefetch" href="/assets/js/229.b980e141.js"><link rel="prefetch" href="/assets/js/23.31ed5c2f.js"><link rel="prefetch" href="/assets/js/230.2c32e874.js"><link rel="prefetch" href="/assets/js/231.723e20cb.js"><link rel="prefetch" href="/assets/js/232.1f94511c.js"><link rel="prefetch" href="/assets/js/233.2d477f71.js"><link rel="prefetch" href="/assets/js/234.10141c75.js"><link rel="prefetch" href="/assets/js/235.a328b127.js"><link rel="prefetch" href="/assets/js/236.42419c3b.js"><link rel="prefetch" href="/assets/js/237.648ca44e.js"><link rel="prefetch" href="/assets/js/238.4b363b75.js"><link rel="prefetch" href="/assets/js/239.fe711a73.js"><link rel="prefetch" href="/assets/js/24.fe75e3fa.js"><link rel="prefetch" href="/assets/js/240.6baa12bf.js"><link rel="prefetch" href="/assets/js/241.6f375dc4.js"><link rel="prefetch" href="/assets/js/242.aee8e39d.js"><link rel="prefetch" href="/assets/js/243.bfc7f6e1.js"><link rel="prefetch" href="/assets/js/244.c73a14a7.js"><link rel="prefetch" href="/assets/js/245.a2352aa1.js"><link rel="prefetch" href="/assets/js/246.b12c3ae6.js"><link rel="prefetch" href="/assets/js/247.2f768275.js"><link rel="prefetch" href="/assets/js/248.3f79dfb1.js"><link rel="prefetch" href="/assets/js/249.7fd0cb75.js"><link rel="prefetch" href="/assets/js/25.f2e379df.js"><link rel="prefetch" href="/assets/js/250.df3f1d0a.js"><link rel="prefetch" href="/assets/js/251.a3865750.js"><link rel="prefetch" href="/assets/js/252.d62542df.js"><link rel="prefetch" href="/assets/js/253.59b2f200.js"><link rel="prefetch" href="/assets/js/254.522d17b5.js"><link rel="prefetch" href="/assets/js/255.0f95a196.js"><link rel="prefetch" href="/assets/js/256.31b37cbe.js"><link rel="prefetch" href="/assets/js/257.ff22ad12.js"><link rel="prefetch" href="/assets/js/258.15205e0b.js"><link rel="prefetch" href="/assets/js/259.f3b7c5aa.js"><link rel="prefetch" href="/assets/js/26.45264b04.js"><link rel="prefetch" href="/assets/js/260.fec3c7aa.js"><link rel="prefetch" href="/assets/js/261.d965ee56.js"><link rel="prefetch" href="/assets/js/262.76a7105b.js"><link rel="prefetch" href="/assets/js/263.e684cc46.js"><link rel="prefetch" href="/assets/js/264.59297da0.js"><link rel="prefetch" href="/assets/js/265.66182ed2.js"><link rel="prefetch" href="/assets/js/266.eec50d90.js"><link rel="prefetch" href="/assets/js/267.c85bce12.js"><link rel="prefetch" href="/assets/js/268.ef544f0c.js"><link rel="prefetch" href="/assets/js/269.8cfb5c6a.js"><link rel="prefetch" href="/assets/js/27.4e065810.js"><link rel="prefetch" href="/assets/js/270.b66cab3c.js"><link rel="prefetch" href="/assets/js/271.c1b7d136.js"><link rel="prefetch" href="/assets/js/272.0d7950c3.js"><link rel="prefetch" href="/assets/js/273.06349cca.js"><link rel="prefetch" href="/assets/js/274.9b442c09.js"><link rel="prefetch" href="/assets/js/275.11082d81.js"><link rel="prefetch" href="/assets/js/276.ce0abe31.js"><link rel="prefetch" href="/assets/js/277.4b7fcc53.js"><link rel="prefetch" href="/assets/js/278.129d0397.js"><link rel="prefetch" href="/assets/js/279.5c021f7c.js"><link rel="prefetch" href="/assets/js/28.126ecd33.js"><link rel="prefetch" href="/assets/js/280.d183c9e3.js"><link rel="prefetch" href="/assets/js/281.0df67750.js"><link rel="prefetch" href="/assets/js/282.8fdd2372.js"><link rel="prefetch" href="/assets/js/283.dae956df.js"><link rel="prefetch" href="/assets/js/284.c5dc7189.js"><link rel="prefetch" href="/assets/js/285.7f5a7367.js"><link rel="prefetch" href="/assets/js/286.d9bfcef5.js"><link rel="prefetch" href="/assets/js/287.4fa6a5c5.js"><link rel="prefetch" href="/assets/js/288.57904d2d.js"><link rel="prefetch" href="/assets/js/289.b96d7c2f.js"><link rel="prefetch" href="/assets/js/29.8f5db82a.js"><link rel="prefetch" href="/assets/js/290.8dda9646.js"><link rel="prefetch" href="/assets/js/291.ab433493.js"><link rel="prefetch" href="/assets/js/292.e2d59796.js"><link rel="prefetch" href="/assets/js/293.30f9fcc4.js"><link rel="prefetch" href="/assets/js/294.158492dc.js"><link rel="prefetch" href="/assets/js/295.33e3a53d.js"><link rel="prefetch" href="/assets/js/296.49d7a2de.js"><link rel="prefetch" href="/assets/js/297.1b7572ac.js"><link rel="prefetch" href="/assets/js/298.00e4586a.js"><link rel="prefetch" href="/assets/js/299.d8fb6ff9.js"><link rel="prefetch" href="/assets/js/30.ef97cb8e.js"><link rel="prefetch" href="/assets/js/300.90e9dadf.js"><link rel="prefetch" href="/assets/js/301.d5592ea1.js"><link rel="prefetch" href="/assets/js/302.b08dc1ea.js"><link rel="prefetch" href="/assets/js/303.bef541c8.js"><link rel="prefetch" href="/assets/js/304.be3f7081.js"><link rel="prefetch" href="/assets/js/305.13718421.js"><link rel="prefetch" href="/assets/js/306.41685aa2.js"><link rel="prefetch" href="/assets/js/307.6d569102.js"><link rel="prefetch" href="/assets/js/308.aaabab89.js"><link rel="prefetch" href="/assets/js/309.910ecc42.js"><link rel="prefetch" href="/assets/js/31.795b3334.js"><link rel="prefetch" href="/assets/js/310.104b7753.js"><link rel="prefetch" href="/assets/js/311.45f4a7da.js"><link rel="prefetch" href="/assets/js/312.180c7e45.js"><link rel="prefetch" href="/assets/js/313.87d3a801.js"><link rel="prefetch" href="/assets/js/314.7739b1ef.js"><link rel="prefetch" href="/assets/js/315.54a1fac0.js"><link rel="prefetch" href="/assets/js/316.a978a787.js"><link rel="prefetch" href="/assets/js/317.84f65f2c.js"><link rel="prefetch" href="/assets/js/318.7f8caff8.js"><link rel="prefetch" href="/assets/js/319.0b5276f3.js"><link rel="prefetch" href="/assets/js/32.e65c7229.js"><link rel="prefetch" href="/assets/js/320.ba90589a.js"><link rel="prefetch" href="/assets/js/321.b6810c5a.js"><link rel="prefetch" href="/assets/js/322.2eaa727d.js"><link rel="prefetch" href="/assets/js/323.17573ee3.js"><link rel="prefetch" href="/assets/js/324.806fd6ca.js"><link rel="prefetch" href="/assets/js/325.4cd65079.js"><link rel="prefetch" href="/assets/js/326.fe0e2e22.js"><link rel="prefetch" href="/assets/js/327.a64d0209.js"><link rel="prefetch" href="/assets/js/328.aca1c89a.js"><link rel="prefetch" href="/assets/js/329.53ccf1dd.js"><link rel="prefetch" href="/assets/js/33.9a57aab8.js"><link rel="prefetch" href="/assets/js/330.92822a09.js"><link rel="prefetch" href="/assets/js/331.6b82baff.js"><link rel="prefetch" href="/assets/js/332.fc20f585.js"><link rel="prefetch" href="/assets/js/333.005ba8e3.js"><link rel="prefetch" href="/assets/js/334.9d3309b8.js"><link rel="prefetch" href="/assets/js/335.0e938f19.js"><link rel="prefetch" href="/assets/js/336.01fe9903.js"><link rel="prefetch" href="/assets/js/337.e207d67c.js"><link rel="prefetch" href="/assets/js/338.bfcf6bc8.js"><link rel="prefetch" href="/assets/js/339.a502aa64.js"><link rel="prefetch" href="/assets/js/34.3835d35c.js"><link rel="prefetch" href="/assets/js/340.3888b147.js"><link rel="prefetch" href="/assets/js/341.20297f95.js"><link rel="prefetch" href="/assets/js/342.9cd149e9.js"><link rel="prefetch" href="/assets/js/343.faac8369.js"><link rel="prefetch" href="/assets/js/344.da8cd079.js"><link rel="prefetch" href="/assets/js/345.78303b88.js"><link rel="prefetch" href="/assets/js/346.d8eaca82.js"><link rel="prefetch" href="/assets/js/347.edd389a1.js"><link rel="prefetch" href="/assets/js/348.21ee9617.js"><link rel="prefetch" href="/assets/js/349.0251471a.js"><link rel="prefetch" href="/assets/js/35.76dc7096.js"><link rel="prefetch" href="/assets/js/350.710b7d30.js"><link rel="prefetch" href="/assets/js/351.535f8d60.js"><link rel="prefetch" href="/assets/js/352.c66fe42e.js"><link rel="prefetch" href="/assets/js/353.ebbcd333.js"><link rel="prefetch" href="/assets/js/354.7cbba2f1.js"><link rel="prefetch" href="/assets/js/355.0106db16.js"><link rel="prefetch" href="/assets/js/356.7debf350.js"><link rel="prefetch" href="/assets/js/357.a43eb887.js"><link rel="prefetch" href="/assets/js/358.28e5d2ed.js"><link rel="prefetch" href="/assets/js/359.956fc3b8.js"><link rel="prefetch" href="/assets/js/36.fc54452c.js"><link rel="prefetch" href="/assets/js/360.13fb600a.js"><link rel="prefetch" href="/assets/js/361.d100f85b.js"><link rel="prefetch" href="/assets/js/362.35277df2.js"><link rel="prefetch" href="/assets/js/363.d993a7fc.js"><link rel="prefetch" href="/assets/js/364.0168c2b0.js"><link rel="prefetch" href="/assets/js/365.bc8af0bb.js"><link rel="prefetch" href="/assets/js/366.2645dc0d.js"><link rel="prefetch" href="/assets/js/367.87368acb.js"><link rel="prefetch" href="/assets/js/368.0b7d41fc.js"><link rel="prefetch" href="/assets/js/369.4bf3f46e.js"><link rel="prefetch" href="/assets/js/37.5a47cee9.js"><link rel="prefetch" href="/assets/js/370.ea5f965e.js"><link rel="prefetch" href="/assets/js/371.1af764ef.js"><link rel="prefetch" href="/assets/js/372.bf6c68e2.js"><link rel="prefetch" href="/assets/js/373.1a605cc8.js"><link rel="prefetch" href="/assets/js/374.34a41a4a.js"><link rel="prefetch" href="/assets/js/375.1d2d3776.js"><link rel="prefetch" href="/assets/js/376.4b7b0b10.js"><link rel="prefetch" href="/assets/js/377.b3d9748a.js"><link rel="prefetch" href="/assets/js/378.7f00fa88.js"><link rel="prefetch" href="/assets/js/379.adcd298a.js"><link rel="prefetch" href="/assets/js/38.6614c565.js"><link rel="prefetch" href="/assets/js/380.6d08bb56.js"><link rel="prefetch" href="/assets/js/381.164bb4e3.js"><link rel="prefetch" href="/assets/js/382.f71f0ca4.js"><link rel="prefetch" href="/assets/js/383.01ba70ad.js"><link rel="prefetch" href="/assets/js/384.22b98cde.js"><link rel="prefetch" href="/assets/js/385.5f1298a9.js"><link rel="prefetch" href="/assets/js/386.01a912bc.js"><link rel="prefetch" href="/assets/js/387.3db4713f.js"><link rel="prefetch" href="/assets/js/388.4cde7d0f.js"><link rel="prefetch" href="/assets/js/389.d96bafad.js"><link rel="prefetch" href="/assets/js/39.1a09ed15.js"><link rel="prefetch" href="/assets/js/390.343bbc06.js"><link rel="prefetch" href="/assets/js/391.68b3e72a.js"><link rel="prefetch" href="/assets/js/392.f4f15e43.js"><link rel="prefetch" href="/assets/js/393.82475934.js"><link rel="prefetch" href="/assets/js/394.3101ea10.js"><link rel="prefetch" href="/assets/js/395.34083342.js"><link rel="prefetch" href="/assets/js/396.780d6efe.js"><link rel="prefetch" href="/assets/js/397.cb686f39.js"><link rel="prefetch" href="/assets/js/398.c4ad669f.js"><link rel="prefetch" href="/assets/js/399.ee8d28ad.js"><link rel="prefetch" href="/assets/js/4.c1dcb1a7.js"><link rel="prefetch" href="/assets/js/40.4216f4f9.js"><link rel="prefetch" href="/assets/js/400.23d48a38.js"><link rel="prefetch" href="/assets/js/401.319d7a68.js"><link rel="prefetch" href="/assets/js/402.25b27bd0.js"><link rel="prefetch" href="/assets/js/403.9a898a40.js"><link rel="prefetch" href="/assets/js/404.e3b49b79.js"><link rel="prefetch" href="/assets/js/405.7695b9f1.js"><link rel="prefetch" href="/assets/js/406.edb801f7.js"><link rel="prefetch" href="/assets/js/407.03c3f725.js"><link rel="prefetch" href="/assets/js/408.4345ef1f.js"><link rel="prefetch" href="/assets/js/409.77c34447.js"><link rel="prefetch" href="/assets/js/41.f035663a.js"><link rel="prefetch" href="/assets/js/410.7f6c0744.js"><link rel="prefetch" href="/assets/js/411.cb19323e.js"><link rel="prefetch" href="/assets/js/412.4b16959d.js"><link rel="prefetch" href="/assets/js/413.ff4f1ca2.js"><link rel="prefetch" href="/assets/js/414.b1ca1298.js"><link rel="prefetch" href="/assets/js/415.c2111593.js"><link rel="prefetch" href="/assets/js/416.a6d18039.js"><link rel="prefetch" href="/assets/js/417.dc36c66d.js"><link rel="prefetch" href="/assets/js/418.e7eba879.js"><link rel="prefetch" href="/assets/js/419.57673b9e.js"><link rel="prefetch" href="/assets/js/42.9c8cf569.js"><link rel="prefetch" href="/assets/js/420.ccd41fe0.js"><link rel="prefetch" href="/assets/js/421.ea69f0b0.js"><link rel="prefetch" href="/assets/js/422.093448e2.js"><link rel="prefetch" href="/assets/js/423.ae003f31.js"><link rel="prefetch" href="/assets/js/424.f670cd2b.js"><link rel="prefetch" href="/assets/js/425.6e814335.js"><link rel="prefetch" href="/assets/js/426.faf45206.js"><link rel="prefetch" href="/assets/js/427.cf6be942.js"><link rel="prefetch" href="/assets/js/428.9ff6199c.js"><link rel="prefetch" href="/assets/js/429.b6ef4678.js"><link rel="prefetch" href="/assets/js/43.717fe06b.js"><link rel="prefetch" href="/assets/js/430.e9575d07.js"><link rel="prefetch" href="/assets/js/431.8bf26a3e.js"><link rel="prefetch" href="/assets/js/432.5eaa2162.js"><link rel="prefetch" href="/assets/js/433.6dab12a1.js"><link rel="prefetch" href="/assets/js/434.fca918e8.js"><link rel="prefetch" href="/assets/js/435.4c8f9ad9.js"><link rel="prefetch" href="/assets/js/436.0f0de1a8.js"><link rel="prefetch" href="/assets/js/437.2221ab9f.js"><link rel="prefetch" href="/assets/js/438.37f28cfb.js"><link rel="prefetch" href="/assets/js/439.1e3f3611.js"><link rel="prefetch" href="/assets/js/44.705dc411.js"><link rel="prefetch" href="/assets/js/440.28ab35e8.js"><link rel="prefetch" href="/assets/js/441.8d006af8.js"><link rel="prefetch" href="/assets/js/442.2618a6e3.js"><link rel="prefetch" href="/assets/js/443.a7723674.js"><link rel="prefetch" href="/assets/js/444.18f23e7c.js"><link rel="prefetch" href="/assets/js/445.f4807c5a.js"><link rel="prefetch" href="/assets/js/446.77a5afc2.js"><link rel="prefetch" href="/assets/js/447.7f653483.js"><link rel="prefetch" href="/assets/js/448.1143c566.js"><link rel="prefetch" href="/assets/js/449.b788a288.js"><link rel="prefetch" href="/assets/js/45.6a225373.js"><link rel="prefetch" href="/assets/js/450.b6463ba3.js"><link rel="prefetch" href="/assets/js/451.fd4d46b9.js"><link rel="prefetch" href="/assets/js/452.e8de4fc2.js"><link rel="prefetch" href="/assets/js/453.4125e5e6.js"><link rel="prefetch" href="/assets/js/454.30af5d0a.js"><link rel="prefetch" href="/assets/js/455.9c919e58.js"><link rel="prefetch" href="/assets/js/456.22dbfa8f.js"><link rel="prefetch" href="/assets/js/457.e9c5248a.js"><link rel="prefetch" href="/assets/js/458.c0a9cf1d.js"><link rel="prefetch" href="/assets/js/459.b5e96042.js"><link rel="prefetch" href="/assets/js/46.515d085a.js"><link rel="prefetch" href="/assets/js/460.b4097efb.js"><link rel="prefetch" href="/assets/js/461.5d545741.js"><link rel="prefetch" href="/assets/js/462.402d4cdd.js"><link rel="prefetch" href="/assets/js/463.e6d6ea07.js"><link rel="prefetch" href="/assets/js/464.df817445.js"><link rel="prefetch" href="/assets/js/465.18a6bc2b.js"><link rel="prefetch" href="/assets/js/466.da313c0c.js"><link rel="prefetch" href="/assets/js/467.41294182.js"><link rel="prefetch" href="/assets/js/468.41c59467.js"><link rel="prefetch" href="/assets/js/469.d55da13c.js"><link rel="prefetch" href="/assets/js/47.a41193df.js"><link rel="prefetch" href="/assets/js/470.7457a92e.js"><link rel="prefetch" href="/assets/js/471.ed739bdf.js"><link rel="prefetch" href="/assets/js/472.83882459.js"><link rel="prefetch" href="/assets/js/473.fe2df51c.js"><link rel="prefetch" href="/assets/js/474.d40797b8.js"><link rel="prefetch" href="/assets/js/475.a00992a2.js"><link rel="prefetch" href="/assets/js/476.c7687189.js"><link rel="prefetch" href="/assets/js/477.fd4fd227.js"><link rel="prefetch" href="/assets/js/478.1ae08c3b.js"><link rel="prefetch" href="/assets/js/479.04a246c6.js"><link rel="prefetch" href="/assets/js/48.fe693306.js"><link rel="prefetch" href="/assets/js/480.36acb4ff.js"><link rel="prefetch" href="/assets/js/481.05d3129e.js"><link rel="prefetch" href="/assets/js/482.1741a02c.js"><link rel="prefetch" href="/assets/js/483.44cf2d25.js"><link rel="prefetch" href="/assets/js/484.9c14e5c6.js"><link rel="prefetch" href="/assets/js/485.ea0c1de1.js"><link rel="prefetch" href="/assets/js/486.8c683697.js"><link rel="prefetch" href="/assets/js/487.8b1eb604.js"><link rel="prefetch" href="/assets/js/488.ae16fca6.js"><link rel="prefetch" href="/assets/js/489.7f674a0d.js"><link rel="prefetch" href="/assets/js/49.a7d05a3d.js"><link rel="prefetch" href="/assets/js/490.52983854.js"><link rel="prefetch" href="/assets/js/491.968e7af4.js"><link rel="prefetch" href="/assets/js/492.e7f58bac.js"><link rel="prefetch" href="/assets/js/493.55afbb68.js"><link rel="prefetch" href="/assets/js/494.ac17d05b.js"><link rel="prefetch" href="/assets/js/495.d1ca2a12.js"><link rel="prefetch" href="/assets/js/496.d6841a0e.js"><link rel="prefetch" href="/assets/js/497.99431b4b.js"><link rel="prefetch" href="/assets/js/498.cacac1d8.js"><link rel="prefetch" href="/assets/js/499.c6b7fab0.js"><link rel="prefetch" href="/assets/js/5.f74a04c4.js"><link rel="prefetch" href="/assets/js/50.f59b29ea.js"><link rel="prefetch" href="/assets/js/500.abba24c7.js"><link rel="prefetch" href="/assets/js/501.e9496674.js"><link rel="prefetch" href="/assets/js/502.3ece0e86.js"><link rel="prefetch" href="/assets/js/503.974421d1.js"><link rel="prefetch" href="/assets/js/504.6e8d8539.js"><link rel="prefetch" href="/assets/js/505.b8161483.js"><link rel="prefetch" href="/assets/js/506.a6a6f2de.js"><link rel="prefetch" href="/assets/js/507.9c6955ee.js"><link rel="prefetch" href="/assets/js/508.223e145d.js"><link rel="prefetch" href="/assets/js/509.553e6f2c.js"><link rel="prefetch" href="/assets/js/51.428c5495.js"><link rel="prefetch" href="/assets/js/510.46e2eab7.js"><link rel="prefetch" href="/assets/js/511.24962b3f.js"><link rel="prefetch" href="/assets/js/512.a29fe236.js"><link rel="prefetch" href="/assets/js/513.8729b339.js"><link rel="prefetch" href="/assets/js/514.41199019.js"><link rel="prefetch" href="/assets/js/515.b1a71e99.js"><link rel="prefetch" href="/assets/js/516.001e3634.js"><link rel="prefetch" href="/assets/js/517.4de05581.js"><link rel="prefetch" href="/assets/js/518.57697c31.js"><link rel="prefetch" href="/assets/js/519.e962365e.js"><link rel="prefetch" href="/assets/js/52.c97c3911.js"><link rel="prefetch" href="/assets/js/520.e7775961.js"><link rel="prefetch" href="/assets/js/521.05b0ce57.js"><link rel="prefetch" href="/assets/js/522.49f7412e.js"><link rel="prefetch" href="/assets/js/523.b3d821b2.js"><link rel="prefetch" href="/assets/js/524.ab2395b7.js"><link rel="prefetch" href="/assets/js/525.25559bb4.js"><link rel="prefetch" href="/assets/js/526.23111d2a.js"><link rel="prefetch" href="/assets/js/527.c61f6e86.js"><link rel="prefetch" href="/assets/js/528.032fa7b6.js"><link rel="prefetch" href="/assets/js/529.3953f346.js"><link rel="prefetch" href="/assets/js/53.77f22b1a.js"><link rel="prefetch" href="/assets/js/530.b882066e.js"><link rel="prefetch" href="/assets/js/531.62dddf23.js"><link rel="prefetch" href="/assets/js/532.1826fe1a.js"><link rel="prefetch" href="/assets/js/533.a2e014bb.js"><link rel="prefetch" href="/assets/js/534.d5d89c00.js"><link rel="prefetch" href="/assets/js/535.4e5d7739.js"><link rel="prefetch" href="/assets/js/536.f2c700db.js"><link rel="prefetch" href="/assets/js/537.80aa278c.js"><link rel="prefetch" href="/assets/js/538.95e2f471.js"><link rel="prefetch" href="/assets/js/539.4e4ecfe8.js"><link rel="prefetch" href="/assets/js/54.d85b2f2e.js"><link rel="prefetch" href="/assets/js/540.00bd44e5.js"><link rel="prefetch" href="/assets/js/541.d740df14.js"><link rel="prefetch" href="/assets/js/542.5aadeaee.js"><link rel="prefetch" href="/assets/js/543.d42c9d9a.js"><link rel="prefetch" href="/assets/js/544.29704685.js"><link rel="prefetch" href="/assets/js/545.7fdb1a83.js"><link rel="prefetch" href="/assets/js/546.6b5655ea.js"><link rel="prefetch" href="/assets/js/547.c98e27c4.js"><link rel="prefetch" href="/assets/js/548.8edec06f.js"><link rel="prefetch" href="/assets/js/549.33b8eae3.js"><link rel="prefetch" href="/assets/js/55.80a4fa71.js"><link rel="prefetch" href="/assets/js/550.cb706b0e.js"><link rel="prefetch" href="/assets/js/551.79598cc6.js"><link rel="prefetch" href="/assets/js/552.69aa5f8b.js"><link rel="prefetch" href="/assets/js/553.7ccb8831.js"><link rel="prefetch" href="/assets/js/554.954013b2.js"><link rel="prefetch" href="/assets/js/555.960d7f8b.js"><link rel="prefetch" href="/assets/js/556.5c054c14.js"><link rel="prefetch" href="/assets/js/557.890045ea.js"><link rel="prefetch" href="/assets/js/558.f72f6668.js"><link rel="prefetch" href="/assets/js/559.452d8ff3.js"><link rel="prefetch" href="/assets/js/56.009b0340.js"><link rel="prefetch" href="/assets/js/560.1656e33f.js"><link rel="prefetch" href="/assets/js/561.bb4650eb.js"><link rel="prefetch" href="/assets/js/562.7322fd81.js"><link rel="prefetch" href="/assets/js/563.a34a68ea.js"><link rel="prefetch" href="/assets/js/564.6da92e18.js"><link rel="prefetch" href="/assets/js/565.01d288e5.js"><link rel="prefetch" href="/assets/js/566.6a3459a1.js"><link rel="prefetch" href="/assets/js/567.e3eb8e54.js"><link rel="prefetch" href="/assets/js/568.f95e0fba.js"><link rel="prefetch" href="/assets/js/569.a42d134c.js"><link rel="prefetch" href="/assets/js/57.25e8dd1c.js"><link rel="prefetch" href="/assets/js/570.87887d15.js"><link rel="prefetch" href="/assets/js/571.ce4b478b.js"><link rel="prefetch" href="/assets/js/572.634418a6.js"><link rel="prefetch" href="/assets/js/573.cd4cf02b.js"><link rel="prefetch" href="/assets/js/574.8bf073fa.js"><link rel="prefetch" href="/assets/js/575.c194dddb.js"><link rel="prefetch" href="/assets/js/576.7750193f.js"><link rel="prefetch" href="/assets/js/577.5daa388a.js"><link rel="prefetch" href="/assets/js/578.54bb0029.js"><link rel="prefetch" href="/assets/js/579.92f58c76.js"><link rel="prefetch" href="/assets/js/58.9c1eb9e5.js"><link rel="prefetch" href="/assets/js/580.0e543efb.js"><link rel="prefetch" href="/assets/js/581.4e0b0b47.js"><link rel="prefetch" href="/assets/js/582.8c172f83.js"><link rel="prefetch" href="/assets/js/583.c91c43e0.js"><link rel="prefetch" href="/assets/js/584.ca68d52b.js"><link rel="prefetch" href="/assets/js/585.663b17d3.js"><link rel="prefetch" href="/assets/js/586.9494847d.js"><link rel="prefetch" href="/assets/js/587.f3805773.js"><link rel="prefetch" href="/assets/js/588.8ae14be1.js"><link rel="prefetch" href="/assets/js/589.b4af88be.js"><link rel="prefetch" href="/assets/js/59.2a730e41.js"><link rel="prefetch" href="/assets/js/590.fb77fea8.js"><link rel="prefetch" href="/assets/js/591.a3aaa57c.js"><link rel="prefetch" href="/assets/js/592.54ec5f32.js"><link rel="prefetch" href="/assets/js/593.96eab5cb.js"><link rel="prefetch" href="/assets/js/594.e356725c.js"><link rel="prefetch" href="/assets/js/595.0a2c4ad4.js"><link rel="prefetch" href="/assets/js/596.2c075cd8.js"><link rel="prefetch" href="/assets/js/597.e904811b.js"><link rel="prefetch" href="/assets/js/598.f6ca8b71.js"><link rel="prefetch" href="/assets/js/599.ae3d12c4.js"><link rel="prefetch" href="/assets/js/6.451e012f.js"><link rel="prefetch" href="/assets/js/60.e6b60343.js"><link rel="prefetch" href="/assets/js/600.e71a0062.js"><link rel="prefetch" href="/assets/js/601.2571a19d.js"><link rel="prefetch" href="/assets/js/602.0f4fa961.js"><link rel="prefetch" href="/assets/js/603.d8387c37.js"><link rel="prefetch" href="/assets/js/604.69433906.js"><link rel="prefetch" href="/assets/js/605.1bc7d87a.js"><link rel="prefetch" href="/assets/js/606.ec419517.js"><link rel="prefetch" href="/assets/js/607.b473fb0b.js"><link rel="prefetch" href="/assets/js/608.a361b48c.js"><link rel="prefetch" href="/assets/js/609.9186f226.js"><link rel="prefetch" href="/assets/js/61.d50a156d.js"><link rel="prefetch" href="/assets/js/610.ff3cf241.js"><link rel="prefetch" href="/assets/js/611.c3c7e648.js"><link rel="prefetch" href="/assets/js/612.2a520ebd.js"><link rel="prefetch" href="/assets/js/613.42936ffc.js"><link rel="prefetch" href="/assets/js/614.3ca0de21.js"><link rel="prefetch" href="/assets/js/615.ecf60a47.js"><link rel="prefetch" href="/assets/js/616.17185e83.js"><link rel="prefetch" href="/assets/js/617.769d4cdf.js"><link rel="prefetch" href="/assets/js/618.015c6376.js"><link rel="prefetch" href="/assets/js/619.3af186d0.js"><link rel="prefetch" href="/assets/js/62.e24b7811.js"><link rel="prefetch" href="/assets/js/620.f8ff3784.js"><link rel="prefetch" href="/assets/js/621.4c21311f.js"><link rel="prefetch" href="/assets/js/622.355178df.js"><link rel="prefetch" href="/assets/js/623.45a30695.js"><link rel="prefetch" href="/assets/js/624.61e89d34.js"><link rel="prefetch" href="/assets/js/625.49e0d1ce.js"><link rel="prefetch" href="/assets/js/626.1b7ae767.js"><link rel="prefetch" href="/assets/js/627.b8c507cf.js"><link rel="prefetch" href="/assets/js/628.c5a43517.js"><link rel="prefetch" href="/assets/js/629.274eb0fd.js"><link rel="prefetch" href="/assets/js/63.b804baab.js"><link rel="prefetch" href="/assets/js/630.69e055ce.js"><link rel="prefetch" href="/assets/js/631.0892fc51.js"><link rel="prefetch" href="/assets/js/632.6a68e9a2.js"><link rel="prefetch" href="/assets/js/633.d536fe74.js"><link rel="prefetch" href="/assets/js/634.24695f39.js"><link rel="prefetch" href="/assets/js/635.3aeede9c.js"><link rel="prefetch" href="/assets/js/636.3628d8a6.js"><link rel="prefetch" href="/assets/js/637.40af5a79.js"><link rel="prefetch" href="/assets/js/638.15e257ae.js"><link rel="prefetch" href="/assets/js/639.31e6597c.js"><link rel="prefetch" href="/assets/js/64.eb5699ff.js"><link rel="prefetch" href="/assets/js/640.a071f6df.js"><link rel="prefetch" href="/assets/js/641.f9edd7bf.js"><link rel="prefetch" href="/assets/js/642.adcb583f.js"><link rel="prefetch" href="/assets/js/643.7c98a990.js"><link rel="prefetch" href="/assets/js/644.fb1213d8.js"><link rel="prefetch" href="/assets/js/645.220a5034.js"><link rel="prefetch" href="/assets/js/646.d66a419b.js"><link rel="prefetch" href="/assets/js/647.12ef89ab.js"><link rel="prefetch" href="/assets/js/648.a3112300.js"><link rel="prefetch" href="/assets/js/649.f457dfa5.js"><link rel="prefetch" href="/assets/js/65.0d8501b5.js"><link rel="prefetch" href="/assets/js/650.cc63d03b.js"><link rel="prefetch" href="/assets/js/651.16d1bbd6.js"><link rel="prefetch" href="/assets/js/652.0f5343f0.js"><link rel="prefetch" href="/assets/js/653.28f7710a.js"><link rel="prefetch" href="/assets/js/654.b343d473.js"><link rel="prefetch" href="/assets/js/655.215fe67b.js"><link rel="prefetch" href="/assets/js/656.79aa1653.js"><link rel="prefetch" href="/assets/js/657.c57f2b5c.js"><link rel="prefetch" href="/assets/js/658.d0aa0b95.js"><link rel="prefetch" href="/assets/js/659.2dfaed93.js"><link rel="prefetch" href="/assets/js/66.8361cc16.js"><link rel="prefetch" href="/assets/js/660.c00b347e.js"><link rel="prefetch" href="/assets/js/661.ecc4f968.js"><link rel="prefetch" href="/assets/js/662.06f83919.js"><link rel="prefetch" href="/assets/js/663.67d8849e.js"><link rel="prefetch" href="/assets/js/664.74dba1a9.js"><link rel="prefetch" href="/assets/js/665.28b450f0.js"><link rel="prefetch" href="/assets/js/666.0f4bb6ba.js"><link rel="prefetch" href="/assets/js/667.586074e3.js"><link rel="prefetch" href="/assets/js/668.b13c0e70.js"><link rel="prefetch" href="/assets/js/669.9d0d4cbc.js"><link rel="prefetch" href="/assets/js/67.37f46ba2.js"><link rel="prefetch" href="/assets/js/670.6b36ca72.js"><link rel="prefetch" href="/assets/js/671.33b2e754.js"><link rel="prefetch" href="/assets/js/672.3b02c287.js"><link rel="prefetch" href="/assets/js/673.3f274929.js"><link rel="prefetch" href="/assets/js/674.7d75584f.js"><link rel="prefetch" href="/assets/js/675.0de52334.js"><link rel="prefetch" href="/assets/js/676.6734133e.js"><link rel="prefetch" href="/assets/js/677.c6f4a973.js"><link rel="prefetch" href="/assets/js/678.1344b6be.js"><link rel="prefetch" href="/assets/js/679.23fed56f.js"><link rel="prefetch" href="/assets/js/68.27dbce5b.js"><link rel="prefetch" href="/assets/js/680.c49329d6.js"><link rel="prefetch" href="/assets/js/681.8df66615.js"><link rel="prefetch" href="/assets/js/682.77b4bff8.js"><link rel="prefetch" href="/assets/js/683.6cf41cf4.js"><link rel="prefetch" href="/assets/js/684.58deecd5.js"><link rel="prefetch" href="/assets/js/685.d2f7480e.js"><link rel="prefetch" href="/assets/js/686.0b77a241.js"><link rel="prefetch" href="/assets/js/687.2cc04b4f.js"><link rel="prefetch" href="/assets/js/688.da24cbae.js"><link rel="prefetch" href="/assets/js/689.a9961f74.js"><link rel="prefetch" href="/assets/js/69.8052a977.js"><link rel="prefetch" href="/assets/js/690.cb736269.js"><link rel="prefetch" href="/assets/js/691.21c13be1.js"><link rel="prefetch" href="/assets/js/692.3ed557d0.js"><link rel="prefetch" href="/assets/js/693.066efe93.js"><link rel="prefetch" href="/assets/js/694.5368f98a.js"><link rel="prefetch" href="/assets/js/695.4fdb93d5.js"><link rel="prefetch" href="/assets/js/696.9c055ac6.js"><link rel="prefetch" href="/assets/js/697.51e0c47c.js"><link rel="prefetch" href="/assets/js/698.08ca1dbd.js"><link rel="prefetch" href="/assets/js/699.ce7e9e2a.js"><link rel="prefetch" href="/assets/js/7.7e21c947.js"><link rel="prefetch" href="/assets/js/70.19faeb78.js"><link rel="prefetch" href="/assets/js/700.3676fa7f.js"><link rel="prefetch" href="/assets/js/701.82db4887.js"><link rel="prefetch" href="/assets/js/702.73425f22.js"><link rel="prefetch" href="/assets/js/703.d9391c74.js"><link rel="prefetch" href="/assets/js/704.d6e275cf.js"><link rel="prefetch" href="/assets/js/705.d2f23969.js"><link rel="prefetch" href="/assets/js/706.1c66dcc1.js"><link rel="prefetch" href="/assets/js/707.0fc5a26a.js"><link rel="prefetch" href="/assets/js/708.97471ee6.js"><link rel="prefetch" href="/assets/js/709.9b4d5665.js"><link rel="prefetch" href="/assets/js/71.d1683810.js"><link rel="prefetch" href="/assets/js/710.75fa8103.js"><link rel="prefetch" href="/assets/js/711.43777b40.js"><link rel="prefetch" href="/assets/js/712.5c583e39.js"><link rel="prefetch" href="/assets/js/713.5aa72111.js"><link rel="prefetch" href="/assets/js/714.e8215702.js"><link rel="prefetch" href="/assets/js/715.46614e7c.js"><link rel="prefetch" href="/assets/js/716.eaac6d69.js"><link rel="prefetch" href="/assets/js/717.c344c042.js"><link rel="prefetch" href="/assets/js/718.437bf0b2.js"><link rel="prefetch" href="/assets/js/719.23aa3deb.js"><link rel="prefetch" href="/assets/js/72.9fa783f0.js"><link rel="prefetch" href="/assets/js/720.9456a449.js"><link rel="prefetch" href="/assets/js/721.67fd324a.js"><link rel="prefetch" href="/assets/js/722.fc5e79ca.js"><link rel="prefetch" href="/assets/js/723.46db8115.js"><link rel="prefetch" href="/assets/js/724.31a11b8c.js"><link rel="prefetch" href="/assets/js/725.49cef603.js"><link rel="prefetch" href="/assets/js/726.7d0a2e7f.js"><link rel="prefetch" href="/assets/js/727.a1de6f02.js"><link rel="prefetch" href="/assets/js/728.7e0a727e.js"><link rel="prefetch" href="/assets/js/729.b6bf04fa.js"><link rel="prefetch" href="/assets/js/73.1ac0ac37.js"><link rel="prefetch" href="/assets/js/730.1c102528.js"><link rel="prefetch" href="/assets/js/731.80403e3d.js"><link rel="prefetch" href="/assets/js/732.cf8b4a6d.js"><link rel="prefetch" href="/assets/js/733.aab88d38.js"><link rel="prefetch" href="/assets/js/734.965a0adc.js"><link rel="prefetch" href="/assets/js/735.f9d33608.js"><link rel="prefetch" href="/assets/js/736.d1621f9e.js"><link rel="prefetch" href="/assets/js/737.a12ea0d3.js"><link rel="prefetch" href="/assets/js/738.96e61512.js"><link rel="prefetch" href="/assets/js/739.9bce4dfe.js"><link rel="prefetch" href="/assets/js/74.1913daec.js"><link rel="prefetch" href="/assets/js/740.c1a0bf7b.js"><link rel="prefetch" href="/assets/js/741.0185115e.js"><link rel="prefetch" href="/assets/js/742.21e99d78.js"><link rel="prefetch" href="/assets/js/743.e5f2407e.js"><link rel="prefetch" href="/assets/js/744.53d4e25a.js"><link rel="prefetch" href="/assets/js/745.9fb6722c.js"><link rel="prefetch" href="/assets/js/746.893e3a2f.js"><link rel="prefetch" href="/assets/js/747.ad94fed4.js"><link rel="prefetch" href="/assets/js/748.3421b09b.js"><link rel="prefetch" href="/assets/js/749.15c364e9.js"><link rel="prefetch" href="/assets/js/75.d63a9540.js"><link rel="prefetch" href="/assets/js/750.4e5379b7.js"><link rel="prefetch" href="/assets/js/751.18b0273f.js"><link rel="prefetch" href="/assets/js/752.24717596.js"><link rel="prefetch" href="/assets/js/753.5868bcc4.js"><link rel="prefetch" href="/assets/js/754.77808a6c.js"><link rel="prefetch" href="/assets/js/755.af7f7a71.js"><link rel="prefetch" href="/assets/js/76.342d837c.js"><link rel="prefetch" href="/assets/js/77.466349c3.js"><link rel="prefetch" href="/assets/js/78.886d05b6.js"><link rel="prefetch" href="/assets/js/79.b478bdab.js"><link rel="prefetch" href="/assets/js/8.9f40767d.js"><link rel="prefetch" href="/assets/js/80.9205cc43.js"><link rel="prefetch" href="/assets/js/81.77f831c9.js"><link rel="prefetch" href="/assets/js/82.650475d1.js"><link rel="prefetch" href="/assets/js/83.aa7e3d4b.js"><link rel="prefetch" href="/assets/js/84.2fc92fb4.js"><link rel="prefetch" href="/assets/js/85.0f633e10.js"><link rel="prefetch" href="/assets/js/86.e862f4bc.js"><link rel="prefetch" href="/assets/js/87.8a869468.js"><link rel="prefetch" href="/assets/js/88.6c584051.js"><link rel="prefetch" href="/assets/js/89.3ab84e02.js"><link rel="prefetch" href="/assets/js/9.7ed864ce.js"><link rel="prefetch" href="/assets/js/90.41e6925d.js"><link rel="prefetch" href="/assets/js/91.55055993.js"><link rel="prefetch" href="/assets/js/92.ced7b439.js"><link rel="prefetch" href="/assets/js/93.41cc8a7f.js"><link rel="prefetch" href="/assets/js/94.6d2b144f.js"><link rel="prefetch" href="/assets/js/95.399a7909.js"><link rel="prefetch" href="/assets/js/96.556f8f9f.js"><link rel="prefetch" href="/assets/js/97.47ecdf46.js"><link rel="prefetch" href="/assets/js/98.fdbe6822.js"><link rel="prefetch" href="/assets/js/99.db8442e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ece31e0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Fanx 知识库" class="logo"> <span class="site-name can-hide">Fanx 知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Web容器 - Tomcat知识体系详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>ORM框架 - MyBatis知识体系详解</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/c46ba2/" class="sidebar-link">♥MyBatis知识体系详解♥</a></li><li><a href="/pages/d87838/" class="sidebar-link">MyBatis详解 - 总体框架设计</a></li><li><a href="/pages/4c0510/" class="sidebar-link">MyBatis详解 - 初始化基本过程</a></li><li><a href="/pages/bab0e9/" class="sidebar-link">MyBatis详解 - 配置解析过程</a></li><li><a href="/pages/2a3116/" class="sidebar-link">MyBatis详解 - 官网配置清单</a></li><li><a href="/pages/0767c2/" class="sidebar-link">MyBatis详解 - Mapper映射文件配置</a></li><li><a href="/pages/d7a044/" class="sidebar-link">MyBatis详解 - sqlSession执行流程</a></li><li><a href="/pages/b20670/" class="sidebar-link">MyBatis详解 - 动态SQL使用与原理</a></li><li><a href="/pages/6bf99e/" class="sidebar-link">MyBatis详解 - 插件机制</a></li><li><a href="/pages/052ff5/" class="sidebar-link">MyBatis详解 - 插件之分页机制</a></li><li><a href="/pages/a1af44/" aria-current="page" class="active sidebar-link">MyBatis详解 - 数据源与连接池</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/f7dbad/" class="sidebar-link">MyBatis详解 - 事务管理机制</a></li><li><a href="/pages/e1272e/" class="sidebar-link">MyBatis详解 - 一级缓存实现机制</a></li><li><a href="/pages/fb8e79/" class="sidebar-link">MyBatis详解 - 二级缓存实现机制</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>分表分库 - ShardingSphere详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>调试源代码常用快捷键</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Mybatis</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Spring源代码</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>开源代码集合</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/categories/?category=%E6%BA%90%E4%BB%A3%E7%A0%81%E5%AD%A6%E4%B9%A0" title="分类" data-v-06225672>源代码学习</a></li><li data-v-06225672><a href="/categories/?category=ORM%E6%A1%86%E6%9E%B6%20-%20MyBatis%E7%9F%A5%E8%AF%86%E4%BD%93%E7%B3%BB%E8%AF%A6%E8%A7%A3" title="分类" data-v-06225672>ORM框架 - MyBatis知识体系详解</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/FanXGit" target="_blank" title="作者" class="beLink" data-v-06225672>fanx</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-08-07</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">MyBatis详解 - 数据源与连接池<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="mybatis详解-数据源与连接池"><a href="#mybatis详解-数据源与连接池" class="header-anchor">#</a> MyBatis详解 - 数据源与连接池</h1> <p>===========================================</p> <blockquote><p>本文主要介绍MyBatis数据源和连接池相关的内容。@pdai</p></blockquote> <ul><li><a href="#mybatis%E8%AF%A6%E8%A7%A3---%E6%95%B0%E6%8D%AE%E6%BA%90%E4%B8%8E%E8%BF%9E%E6%8E%A5%E6%B1%A0">MyBatis详解 - 数据源与连接池</a> <ul><li><a href="#mybatis%E6%95%B0%E6%8D%AE%E6%BA%90datasource%E5%88%86%E7%B1%BB">MyBatis数据源DataSource分类</a></li> <li><a href="#%E5%AE%98%E7%BD%91datasource%E9%85%8D%E7%BD%AE%E5%86%85%E5%AE%B9%E6%B8%85%E5%8D%95">官网DataSource配置内容清单</a> <ul><li><a href="#unpooled">UNPOOLED</a></li> <li><a href="#pooled">POOLED</a></li> <li><a href="#jndi">JNDI</a></li></ul></li> <li><a href="#%E6%95%B0%E6%8D%AE%E6%BA%90datasource%E7%9A%84%E5%88%9B%E5%BB%BA%E8%BF%87%E7%A8%8B">数据源DataSource的创建过程</a></li> <li><a href="#datasource%E4%BB%80%E4%B9%88%E6%97%B6%E5%80%99%E5%88%9B%E5%BB%BAconnection%E5%AF%B9%E8%B1%A1">DataSource什么时候创建Connection对象</a></li> <li><a href="#%E4%B8%8D%E4%BD%BF%E7%94%A8%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84unpooleddatasource">不使用连接池的UnpooledDataSource</a></li> <li><a href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E4%BD%BF%E7%94%A8%E8%BF%9E%E6%8E%A5%E6%B1%A0">为什么要使用连接池</a></li> <li><a href="#%E4%BD%BF%E7%94%A8%E4%BA%86%E8%BF%9E%E6%8E%A5%E6%B1%A0%E7%9A%84pooleddatasource">使用了连接池的PooledDataSource</a></li> <li><a href="#jndi%E7%B1%BB%E5%9E%8B%E7%9A%84%E6%95%B0%E6%8D%AE%E6%BA%90datasource">JNDI类型的数据源DataSource</a></li></ul></li></ul> <h1 id="mybatis数据源datasource分类"><a href="#mybatis数据源datasource分类" class="header-anchor">#</a> MyBatis数据源DataSource分类</h1> <hr> <p>MyBatis把数据源DataSource分为三种：</p> <ul><li>UNPOOLED 不使用连接池的数据源</li> <li>POOLED 使用连接池的数据源</li> <li>JNDI 使用JNDI实现的数据源</li></ul> <p>相应地，MyBatis内部分别定义了实现了java.sql.DataSource接口的UnpooledDataSource，PooledDataSource类来表示UNPOOLED、POOLED类型的数据源。</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>对于JNDI类型的数据源DataSource，则是通过JNDI上下文中取值。</p> <h1 id="官网datasource配置内容清单"><a href="#官网datasource配置内容清单" class="header-anchor">#</a> 官网DataSource配置内容清单</h1> <hr> <p>dataSource 元素使用标准的 JDBC 数据源接口来配置 JDBC 连接对象的资源。</p> <p>大多数 MyBatis 应用程序会按示例中的例子来配置数据源。虽然数据源配置是可选的，但如果要启用延迟加载特性，就必须配置数据源。 有三种内建的数据源类型（也就是 <code>type=&quot;[UNPOOLED|POOLED|JNDI]&quot;</code>）：</p> <h3 id="unpooled"><a href="#unpooled" class="header-anchor">#</a> UNPOOLED</h3> <p>这个数据源的实现会每次请求时打开和关闭连接。虽然有点慢，但对那些数据库连接可用性要求不高的简单应用程序来说，是一个很好的选择。 性能表现则依赖于使用的数据库，对某些数据库来说，使用连接池并不重要，这个配置就很适合这种情形。UNPOOLED 类型的数据源仅仅需要配置以下 5 种属性：</p> <ul><li>driver – 这是 JDBC 驱动的 Java 类全限定名（并不是 JDBC 驱动中可能包含的数据源类）。</li> <li>url – 这是数据库的 JDBC URL 地址。</li> <li>username – 登录数据库的用户名。</li> <li>password – 登录数据库的密码。</li> <li>defaultTransactionIsolationLevel – 默认的连接事务隔离级别。</li> <li>defaultNetworkTimeout – 等待数据库操作完成的默认网络超时时间（单位：毫秒）。查看 java.sql.Connection#setNetworkTimeout() 的 API 文档以获取更多信息。</li></ul> <p>作为可选项，你也可以传递属性给数据库驱动。只需在属性名加上“driver.”前缀即可，例如：</p> <ul><li>driver.encoding=UTF8</li></ul> <p>这将通过 DriverManager.getConnection(url, driverProperties) 方法传递值为 UTF8 的 encoding 属性给数据库驱动。</p> <h3 id="pooled"><a href="#pooled" class="header-anchor">#</a> POOLED</h3> <p>这种数据源的实现利用“池”的概念将 JDBC 连接对象组织起来，避免了创建新的连接实例时所必需的初始化和认证时间。 这种处理方式很流行，能使并发 Web 应用快速响应请求。</p> <p>除了上述提到 UNPOOLED 下的属性外，还有更多属性用来配置 POOLED 的数据源：</p> <ul><li>poolMaximumActiveConnections – 在任意时间可存在的活动（正在使用）连接数量，默认值：10</li> <li>poolMaximumIdleConnections – 任意时间可能存在的空闲连接数。</li> <li>poolMaximumCheckoutTime – 在被强制返回之前，池中连接被检出（checked out）时间，默认值：20000 毫秒（即 20 秒）</li> <li>poolTimeToWait – 这是一个底层设置，如果获取连接花费了相当长的时间，连接池会打印状态日志并重新尝试获取一个连接（避免在误配置的情况下一直失败且不打印日志），默认值：20000 毫秒（即 20 秒）。</li> <li>poolMaximumLocalBadConnectionTolerance – 这是一个关于坏连接容忍度的底层设置， 作用于每一个尝试从缓存池获取连接的线程。 如果这个线程获取到的是一个坏的连接，那么这个数据源允许这个线程尝试重新获取一个新的连接，但是这个重新尝试的次数不应该超过 poolMaximumIdleConnections 与 poolMaximumLocalBadConnectionTolerance 之和。 默认值：3（新增于 3.4.5）</li> <li>poolPingQuery – 发送到数据库的侦测查询，用来检验连接是否正常工作并准备接受请求。默认是“NO PING QUERY SET”，这会导致多数数据库驱动出错时返回恰当的错误消息。</li> <li>poolPingEnabled – 是否启用侦测查询。若开启，需要设置 poolPingQuery 属性为一个可执行的 SQL 语句（最好是一个速度非常快的 SQL 语句），默认值：false。</li> <li>poolPingConnectionsNotUsedFor – 配置 poolPingQuery 的频率。可以被设置为和数据库连接超时时间一样，来避免不必要的侦测，默认值：0（即所有连接每一时刻都被侦测 — 当然仅当 poolPingEnabled 为 true 时适用）。</li></ul> <h3 id="jndi"><a href="#jndi" class="header-anchor">#</a> JNDI</h3> <p>这个数据源实现是为了能在如 EJB 或应用服务器这类容器中使用，容器可以集中或在外部配置数据源，然后放置一个 JNDI 上下文的数据源引用。这种数据源配置只需要两个属性：</p> <ul><li>initial_context – 这个属性用来在 InitialContext 中寻找上下文（即，initialContext.lookup(initial_context)）。这是个可选属性，如果忽略，那么将会直接从 InitialContext 中寻找 data_source 属性。</li> <li>data_source – 这是引用数据源实例位置的上下文路径。提供了 initial_context 配置时会在其返回的上下文中进行查找，没有提供时则直接在 InitialContext 中查找。</li></ul> <p>和其他数据源配置类似，可以通过添加前缀“env.”直接把属性传递给 InitialContext。比如：</p> <ul><li>env.encoding=UTF8</li></ul> <p>这就会在 InitialContext 实例化时往它的构造方法传递值为 UTF8 的 encoding 属性。</p> <p>你可以通过实现接口 org.apache.ibatis.datasource.DataSourceFactory 来使用第三方数据源实现：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public interface DataSourceFactory {
  void setProperties(Properties props);
  DataSource getDataSource();
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory 可被用作父类来构建新的数据源适配器，比如下面这段插入 C3P0 数据源所必需的代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import org.apache.ibatis.datasource.unpooled.UnpooledDataSourceFactory;
import com.mchange.v2.c3p0.ComboPooledDataSource;

public class C3P0DataSourceFactory extends UnpooledDataSourceFactory {

  public C3P0DataSourceFactory() {
    this.dataSource = new ComboPooledDataSource();
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>为了令其工作，记得在配置文件中为每个希望 MyBatis 调用的 setter 方法增加对应的属性。 下面是一个可以连接至 PostgreSQL 数据库的例子：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dataSource type=&quot;org.myproject.C3P0DataSourceFactory&quot;&gt;
  &lt;property name=&quot;driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;
  &lt;property name=&quot;url&quot; value=&quot;jdbc:postgresql:mydb&quot;/&gt;
  &lt;property name=&quot;username&quot; value=&quot;postgres&quot;/&gt;
  &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/dataSource&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h1 id="数据源datasource的创建过程"><a href="#数据源datasource的创建过程" class="header-anchor">#</a> 数据源DataSource的创建过程</h1> <hr> <p>MyBatis数据源DataSource对象的创建发生在MyBatis初始化的过程中。下面让我们一步步地了解MyBatis是如何创建数据源DataSource的。</p> <p>在mybatis的XML配置文件中，使用<code>&lt;dataSource&gt;</code>元素来配置数据源：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>&lt;dataSource type=&quot;org.myproject.C3P0DataSourceFactory&quot;&gt;
  &lt;property name=&quot;driver&quot; value=&quot;org.postgresql.Driver&quot;/&gt;
  &lt;property name=&quot;url&quot; value=&quot;jdbc:postgresql:mydb&quot;/&gt;
  &lt;property name=&quot;username&quot; value=&quot;postgres&quot;/&gt;
  &lt;property name=&quot;password&quot; value=&quot;root&quot;/&gt;
&lt;/dataSource&gt;
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>MyBatis在初始化时，解析此文件，根据<code>&lt;dataSource&gt;</code>的type属性来创建相应类型的的数据源DataSource，即：</p> <ul><li>type=”POOLED” ：MyBatis会创建PooledDataSource实例</li> <li>type=”UNPOOLED” ：MyBatis会创建UnpooledDataSource实例</li> <li>type=”JNDI” ：MyBatis会从JNDI服务上查找DataSource实例，然后返回使用</li></ul> <p>顺便说一下，MyBatis是通过工厂模式来创建数据源DataSource对象的，MyBatis定义了抽象的工厂接口:org.apache.ibatis.datasource.DataSourceFactory,通过其getDataSource()方法返回数据源DataSource：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public interface DataSourceFactory { 
    void setProperties(Properties props);  
    // 生产DataSource  
    DataSource getDataSource();  
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>上述三种不同类型的type，则有对应的以下dataSource工厂：</p> <ul><li>POOLED PooledDataSourceFactory</li> <li>UNPOOLED UnpooledDataSourceFactory</li> <li>JNDI JndiDataSourceFactory</li></ul> <p>其类图如下所示：</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>MyBatis创建了DataSource实例后，会将其放到Configuration对象内的Environment对象中，供以后使用。</p> <h1 id="datasource什么时候创建connection对象"><a href="#datasource什么时候创建connection对象" class="header-anchor">#</a> DataSource什么时候创建Connection对象</h1> <hr> <p>当我们需要创建SqlSession对象并需要执行SQL语句时，这时候MyBatis才会去调用dataSource对象来创建java.sql.Connection对象。也就是说，java.sql.Connection对象的创建一直延迟到执行SQL语句的时候。</p> <p>比如，我们有如下方法执行一个简单的SQL语句：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>String resource = &quot;mybatis-config.xml&quot;;  
InputStream inputStream = Resources.getResourceAsStream(resource);  
SqlSessionFactory sqlSessionFactory = new SqlSessionFactoryBuilder().build(inputStream);  
SqlSession sqlSession = sqlSessionFactory.openSession();  
sqlSession.selectList(&quot;SELECT * FROM STUDENTS&quot;);
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>前4句都不会导致java.sql.Connection对象的创建，只有当第5句sqlSession.selectList(&quot;SELECT * FROM STUDENTS&quot;)，才会触发MyBatis在底层执行下面这个方法来创建java.sql.Connection对象：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>protected void openConnection() throws SQLException {  
    if (log.isDebugEnabled()) {  
        log.debug(&quot;Opening JDBC Connection&quot;);  
    }  
    connection = dataSource.getConnection();  
    if (level != null) {  
        connection.setTransactionIsolation(level.getLevel());  
    }  
    setDesiredAutoCommit(autoCommmit);  
}  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h1 id="不使用连接池的unpooleddatasource"><a href="#不使用连接池的unpooleddatasource" class="header-anchor">#</a> 不使用连接池的UnpooledDataSource</h1> <hr> <p>当 <code>&lt;dataSource&gt;</code>的type属性被配置成了”UNPOOLED”，MyBatis首先会实例化一个UnpooledDataSourceFactory工厂实例，然后通过.getDataSource()方法返回一个UnpooledDataSource实例对象引用，我们假定为dataSource。</p> <p>使用UnpooledDataSource的getConnection(),每调用一次就会产生一个新的Connection实例对象。</p> <p>UnPooledDataSource的getConnection()方法实现如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* 
 * UnpooledDataSource的getConnection()实现 
 */  
public Connection getConnection() throws SQLException  
{  
    return doGetConnection(username, password);  
}  
  
private Connection doGetConnection(String username, String password) throws SQLException  
{  
    //封装username和password成properties  
    Properties props = new Properties();  
    if (driverProperties != null)  
    {  
        props.putAll(driverProperties);  
    }  
    if (username != null)  
    {  
        props.setProperty(&quot;user&quot;, username);  
    }  
    if (password != null)  
    {  
        props.setProperty(&quot;password&quot;, password);  
    }  
    return doGetConnection(props);  
}  
  
/* 
 *  获取数据连接 
 */  
private Connection doGetConnection(Properties properties) throws SQLException  
{  
    //1.初始化驱动  
    initializeDriver();  
    //2.从DriverManager中获取连接，获取新的Connection对象  
    Connection connection = DriverManager.getConnection(url, properties);  
    //3.配置connection属性  
    configureConnection(connection);  
    return connection;  
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>如上代码所示，UnpooledDataSource会做以下事情：</p> <ul><li><strong>初始化驱动</strong>：判断driver驱动是否已经加载到内存中，如果还没有加载，则会动态地加载driver类，并实例化一个Driver对象，使用DriverManager.registerDriver()方法将其注册到内存中，以供后续使用。</li> <li><strong>创建Connection对象</strong>：使用DriverManager.getConnection()方法创建连接。</li> <li><strong>配置Connection对象</strong>：设置是否自动提交autoCommit和隔离级别isolationLevel。</li> <li><strong>返回Connection对象</strong>。</li></ul> <p>上述的序列图如下所示：</p> <p><img src="/assets/img/mybatis-y-datasource-4.c75b3fe1.png" alt=""></p> <p>总结：从上述的代码中可以看到，我们每调用一次getConnection()方法，都会通过DriverManager.getConnection()返回新的java.sql.Connection实例。</p> <h1 id="为什么要使用连接池"><a href="#为什么要使用连接池" class="header-anchor">#</a> 为什么要使用连接池</h1> <hr> <ul><li><strong>创建一个java.sql.Connection实例对象的代价</strong></li></ul> <p>首先让我们来看一下创建一个java.sql.Connection对象的资源消耗。我们通过连接Oracle数据库，创建创建Connection对象，来看创建一个Connection对象、执行SQL语句各消耗多长时间。代码如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public static void main(String[] args) throws Exception  
{  
 
   String sql = &quot;select * from hr.employees where employee_id &lt; ? and employee_id &gt;= ?&quot;;  
   PreparedStatement st = null;  
   ResultSet rs = null;  
 
   long beforeTimeOffset = -1L; //创建Connection对象前时间  
   long afterTimeOffset = -1L; //创建Connection对象后时间  
   long executeTimeOffset = -1L; //创建Connection对象后时间  
 
   Connection con = null;  
   Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);  
 
   beforeTimeOffset = new Date().getTime();  
   System.out.println(&quot;before:\t&quot; + beforeTimeOffset);  
 
   con = DriverManager.getConnection(&quot;jdbc:oracle:thin:@127.0.0.1:1521:xe&quot;, &quot;louluan&quot;, &quot;123456&quot;);  
 
   afterTimeOffset = new Date().getTime();  
   System.out.println(&quot;after:\t\t&quot; + afterTimeOffset);  
   System.out.println(&quot;Create Costs:\t\t&quot; + (afterTimeOffset - beforeTimeOffset) + &quot; ms&quot;);  
 
   st = con.prepareStatement(sql);  
   //设置参数  
   st.setInt(1, 101);  
   st.setInt(2, 0);  
   //查询，得出结果集  
   rs = st.executeQuery();  
   executeTimeOffset = new Date().getTime();  
   System.out.println(&quot;Exec Costs:\t\t&quot; + (executeTimeOffset - afterTimeOffset) + &quot; ms&quot;);  
 
}  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br></div></div><p>上述程序的执行结果为：</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATUAAABSCAMAAAACR7NgAAAAVFBMVEURABH///+goKC4ZhERAEOU2/3ckEMRAG2UOhERZrn825Zutv8ROpRDABJtABPs//C5///6tnD//7lDkNy5/9vc/9zc/7nH2/+d27G5Zl9ttrmUZpSG9H54AAAE8UlEQVR4nO2bi3KbMBBF5WDzMNiYkjZp+///2X1JiIRQWDQZJbN3xg0rJCEOSKCL6k6m/XLwezLtlDuZ9gupOdNeGTWNjJpGRO18KWaJ58upcKaPtUhtHI5W2wj2ri+dqx6nvo6jH3fKgn+nCAtI1PUnCjlxijhrrtTa8lil58v1peCNlxL+KV2D58vR6921cFWa6w0zcCQFJKoehet+1pJYvd5c9+suBb4xtVDjWEJVeMoUU4QCAOdL7fMSjtAEiKrn2uFvSoTcUYFsqP1+UC+AHnIqXYtdATd/3GkXnAelw/XfWi2fb3e9Aadm4AvBkfNBi1VKFAHCaLzeLrPE6vkeFciGGvCBToQXGFsKLa8e0EJIol2SvpeaVDUyNYlwmCp4yML6OAqYOYKnEY1gMUpfICdqfI4NvfmW1EjpNrTLp28X98iBz5epSUQQrjeqn8N21kNb7qEEyCeGcbDN5GabU5MBd6JWM7XdAzEWgzsGNWBp6OgS4V7A0k0Q5kMYRAGQJCI012VIDdo14lgGrfxzn3oojto03FH67nGNLwBuC3cc0AYat/DBCvVJJAUkwuPQIeVqllxjmV0PfTrFL0otv1bx02B6ZdrcaL7LCuGEpeVFi4Z6PlTFz59RjsIFZN9IgSTS8NDXvkA+1Ew7ZdQ0MmoaGTWNjJpGRk0jo6bRjJq5kRs1o3bcjfRK4kpyNPpJcG6upJdMfw4rkSspORF3jq5kamqpXMngG4wINjdXUrpEy99IvQlJhqRywpzGlYxdkQxdyacb9SG518SEJEPyCLWjrqTfR3dcfq6ktx68rcPj75HOmsaVjPfl50risw1Hn7kZdpTacVdS9mHTMnQlsZlj1EPZhGSj8Mi45g65kmGfDHz5uZJwE/C9Bn0Vmt2zK6illsaV9JE0wVzJry6jppFR08ioaWTUNDJqGhk1jYyaRkINXyG3WZLbc26Q/9ZPTsvkXmYvpkZOarM0yXs7GV3MqZ2x+mWQbVjJ0eTi1m6gRhPPZb0Bspzz2Dy/FmrBvcxfYfbOZzAtjOTeg9shxUVrsmTxDM8VKRNt7Z+2Vs93XpwZ3EtK/NvTuphp3poztWlhpDiVkUsZU/NLKcnEoZ28tZ+amD9gbowRNbh4DQyfUCnXmze1eGEkXeTIpYypea+/evRijvHWbsnnFLLV4nut9j9lvZ9ATT5tuHhhpDiVkTnmTyeiRsR6XlBJW3sP76F5M1Ju6Yiart7PoOZGbFdTxgsjxamMXErKLzn9Usqu8It3eWtfD5VlkNUTWd3RBYqodUWGjwh5X2vInI4XRnqncnIpWZwzPA1aijATbe2j5pdBNvS6FrmX8b3WJnw/TEzNtEtGTSOjppFR0+iLUOtdVjJqGhk1jYyaRuHb+5qxkNSJnKmRb+w0z11xJfOkVvz31FI5kfM6ZE2l4ynvx67k16OW3olcqGUcVl3JjKnRsqJB/hu3C1ZkeifyPTWccK65ktmOa7QoT1bFknPmu2R6J/I9NXJYVlzJnHsoOYDiQU6mWnIn8j01NvZWXMn8qTGkiVpqJ3KBGt1Qa65kztTacsRPK+RB4p9KPP2UTuQitbAM/CNXMttxra/JTx38p93JI0zqRM6Z8RJJqWHFlbS5gUZGTSOjppFR08iofQMZNY2MmkZGTSOjppFR08ioaWTUNDJqGhk1jYyaQv8ACAhXmszPwooAAAAASUVORK5CYII=" alt=""></p> <p>从此结果可以清楚地看出，创建一个Connection对象，用了250 毫秒；而执行SQL的时间用了170毫秒。</p> <p>创建一个Connection对象用了250毫秒！这个时间对计算机来说可以说是一个非常奢侈的！</p> <p>这仅仅是一个Connection对象就有这么大的代价，设想一下另外一种情况：如果我们在Web应用程序中，为用户的每一个请求就操作一次数据库，当有10000个在线用户并发操作的话，对计算机而言，仅仅创建Connection对象不包括做业务的时间就要损耗10000×250ms= 250 0000 ms = 2500 s = 41.6667 min,竟然要41分钟！！！如果对高用户群体使用这样的系统，简直就是开玩笑！</p> <ul><li><strong>问题分析</strong>：</li></ul> <p>创建一个java.sql.Connection对象的代价是如此巨大，是因为创建一个Connection对象的过程，在底层就相当于和数据库建立的通信连接，在建立通信连接的过程，消耗了这么多的时间，而往往我们建立连接后（即创建Connection对象后），就执行一个简单的SQL语句，然后就要抛弃掉，这是一个非常大的资源浪费！</p> <ul><li><strong>解决方案</strong>：</li></ul> <p>对于需要频繁地跟数据库交互的应用程序，可以在创建了Connection对象，并操作完数据库后，可以不释放掉资源，而是将它放到内存中，当下次需要操作数据库时，可以直接从内存中取出Connection对象，不需要再创建了，这样就极大地节省了创建Connection对象的资源消耗。由于内存也是有限和宝贵的，这又对我们对内存中的Connection对象怎么有效地维护提出了很高的要求。我们将在内存中存放Connection对象的容器称之为连接池（Connection Pool）。下面让我们来看一下MyBatis的线程池是怎样实现的。</p> <h1 id="使用了连接池的pooleddatasource"><a href="#使用了连接池的pooleddatasource" class="header-anchor">#</a> 使用了连接池的PooledDataSource</h1> <hr> <p>同样地，我们也是使用PooledDataSource的getConnection()方法来返回Connection对象。现在让我们看一下它的基本原理：</p> <p>PooledDataSource将java.sql.Connection对象包裹成PooledConnection对象放到了PoolState类型的容器中维护。 MyBatis将连接池中的PooledConnection分为两种状态：空闲状态（idle）和活动状态(active)，这两种状态的PooledConnection对象分别被存储到PoolState容器内的idleConnections和activeConnections两个List集合中：</p> <ul><li><p><strong>idleConnections</strong>: 空闲(idle)状态PooledConnection对象被放置到此集合中，表示当前闲置的没有被使用的PooledConnection集合，调用PooledDataSource的getConnection()方法时，会优先从此集合中取PooledConnection对象。当用完一个java.sql.Connection对象时，MyBatis会将其包裹成PooledConnection对象放到此集合中。</p></li> <li><p><strong>activeConnections</strong>: 活动(active)状态的PooledConnection对象被放置到名为activeConnections的ArrayList中，表示当前正在被使用的PooledConnection集合，调用PooledDataSource的getConnection()方法时，会优先从idleConnections集合中取PooledConnection对象,如果没有，则看此集合是否已满，如果未满，PooledDataSource会创建出一个PooledConnection，添加到此集合中，并返回。</p></li></ul> <p><strong>PoolState连接池的大致结构</strong>如下所示：</p> <p><img src="data:image/png;base64,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" alt=""></p> <ul><li><strong>获取java.sql.Connection对象的过程</strong></li></ul> <p>下面让我们看一下PooledDataSource 的getConnection()方法获取Connection对象的实现：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public Connection getConnection() throws SQLException {  
    return popConnection(dataSource.getUsername(), dataSource.getPassword()).getProxyConnection();  
}  
 
public Connection getConnection(String username, String password) throws SQLException {  
    return popConnection(username, password).getProxyConnection();  
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>上述的popConnection()方法，会从连接池中返回一个可用的PooledConnection对象，然后再调用getProxyConnection()方法最终返回Conection对象。（至于为什么会有getProxyConnection(),请关注下一节）。</p> <p>现在让我们看一下popConnection()方法到底做了什么：</p> <ul><li>先看是否有空闲(idle)状态下的PooledConnection对象，如果有，就直接返回一个可用的PooledConnection对象；否则进行第2步。</li> <li>查看活动状态的PooledConnection池activeConnections是否已满；如果没有满，则创建一个新的PooledConnection对象，然后放到activeConnections池中，然后返回此PooledConnection对象；否则进行第三步；</li> <li>看最先进入activeConnections池中的PooledConnection对象是否已经过期：如果已经过期，从activeConnections池中移除此对象，然后创建一个新的PooledConnection对象，添加到activeConnections中，然后将此对象返回；否则进行第4步。</li> <li>线程等待，循环2步</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>/* 
 * 传递一个用户名和密码，从连接池中返回可用的PooledConnection 
 */  
private PooledConnection popConnection(String username, String password) throws SQLException  
{  
   boolean countedWait = false;  
   PooledConnection conn = null;  
   long t = System.currentTimeMillis();  
   int localBadConnectionCount = 0;  
 
   while (conn == null)  
   {  
       synchronized (state)  
       {  
           if (state.idleConnections.size() &gt; 0)  
           {  
               // 连接池中有空闲连接，取出第一个  
               conn = state.idleConnections.remove(0);  
               if (log.isDebugEnabled())  
               {  
                   log.debug(&quot;Checked out connection &quot; + conn.getRealHashCode() + &quot; from pool.&quot;);  
               }  
           }  
           else  
           {  
               // 连接池中没有空闲连接，则取当前正在使用的连接数小于最大限定值，  
               if (state.activeConnections.size() &lt; poolMaximumActiveConnections)  
               {  
                   // 创建一个新的connection对象  
                   conn = new PooledConnection(dataSource.getConnection(), this);  
                   @SuppressWarnings(&quot;unused&quot;)  
                   //used in logging, if enabled  
                   Connection realConn = conn.getRealConnection();  
                   if (log.isDebugEnabled())  
                   {  
                       log.debug(&quot;Created connection &quot; + conn.getRealHashCode() + &quot;.&quot;);  
                   }  
               }  
               else  
               {  
                   // Cannot create new connection 当活动连接池已满，不能创建时，取出活动连接池的第一个，即最先进入连接池的PooledConnection对象  
                   // 计算它的校验时间，如果校验时间大于连接池规定的最大校验时间，则认为它已经过期了，利用这个PoolConnection内部的realConnection重新生成一个PooledConnection  
                   //  
                   PooledConnection oldestActiveConnection = state.activeConnections.get(0);  
                   long longestCheckoutTime = oldestActiveConnection.getCheckoutTime();  
                   if (longestCheckoutTime &gt; poolMaximumCheckoutTime)  
                   {  
                       // Can claim overdue connection  
                       state.claimedOverdueConnectionCount++;  
                       state.accumulatedCheckoutTimeOfOverdueConnections += longestCheckoutTime;  
                       state.accumulatedCheckoutTime += longestCheckoutTime;  
                       state.activeConnections.remove(oldestActiveConnection);  
                       if (!oldestActiveConnection.getRealConnection().getAutoCommit())  
                       {  
                           oldestActiveConnection.getRealConnection().rollback();  
                       }  
                       conn = new PooledConnection(oldestActiveConnection.getRealConnection(), this);  
                       oldestActiveConnection.invalidate();  
                       if (log.isDebugEnabled())  
                       {  
                           log.debug(&quot;Claimed overdue connection &quot; + conn.getRealHashCode() + &quot;.&quot;);  
                       }  
                   }  
                   else  
                   {  
 
                       //如果不能释放，则必须等待有  
                       // Must wait  
                       try  
                       {  
                           if (!countedWait)  
                           {  
                               state.hadToWaitCount++;  
                               countedWait = true;  
                           }  
                           if (log.isDebugEnabled())  
                           {  
                               log.debug(&quot;Waiting as long as &quot; + poolTimeToWait + &quot; milliseconds for connection.&quot;);  
                           }  
                           long wt = System.currentTimeMillis();  
                           state.wait(poolTimeToWait);  
                           state.accumulatedWaitTime += System.currentTimeMillis() - wt;  
                       }  
                       catch (InterruptedException e)  
                       {  
                           break;  
                       }  
                   }  
               }  
           }  
 
           //如果获取PooledConnection成功，则更新其信息  
 
           if (conn != null)  
           {  
               if (conn.isValid())  
               {  
                   if (!conn.getRealConnection().getAutoCommit())  
                   {  
                       conn.getRealConnection().rollback();  
                   }  
                   conn.setConnectionTypeCode(assembleConnectionTypeCode(dataSource.getUrl(), username, password));  
                   conn.setCheckoutTimestamp(System.currentTimeMillis());  
                   conn.setLastUsedTimestamp(System.currentTimeMillis());  
                   state.activeConnections.add(conn);  
                   state.requestCount++;  
                   state.accumulatedRequestTime += System.currentTimeMillis() - t;  
               }  
               else  
               {  
                   if (log.isDebugEnabled())  
                   {  
                       log.debug(&quot;A bad connection (&quot; + conn.getRealHashCode() + &quot;) was returned from the pool, getting another connection.&quot;);  
                   }  
                   state.badConnectionCount++;  
                   localBadConnectionCount++;  
                   conn = null;  
                   if (localBadConnectionCount &gt; (poolMaximumIdleConnections + 3))  
                   {  
                       if (log.isDebugEnabled())  
                       {  
                           log.debug(&quot;PooledDataSource: Could not get a good connection to the database.&quot;);  
                       }  
                       throw new SQLException(&quot;PooledDataSource: Could not get a good connection to the database.&quot;);  
                   }  
               }  
           }  
       }  
 
   }  
 
   if (conn == null)  
   {  
       if (log.isDebugEnabled())  
       {  
           log.debug(&quot;PooledDataSource: Unknown severe error condition.  The connection pool returned a null connection.&quot;);  
       }  
       throw new SQLException(&quot;PooledDataSource: Unknown severe error condition.  The connection pool returned a null connection.&quot;);  
   }  
 
   return conn;  
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br></div></div><p>对应的处理流程图如下所示：</p> <p><img src="/assets/img/mybatis-y-datasource-7.d0087ab5.png" alt=""></p> <p>如上所示,对于PooledDataSource的getConnection()方法内，先是调用类PooledDataSource的popConnection()方法返回了一个PooledConnection对象，然后调用了PooledConnection的getProxyConnection()来返回Connection对象。</p> <ul><li><strong>java.sql.Connection对象的回收</strong></li></ul> <p>当我们的程序中使用完Connection对象时，如果不使用数据库连接池，我们一般会调用 connection.close()方法，关闭connection连接，释放资源。如下所示：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>private void test() throws ClassNotFoundException, SQLException  
{  
   String sql = &quot;select * from hr.employees where employee_id &lt; ? and employee_id &gt;= ?&quot;;  
   PreparedStatement st = null;  
   ResultSet rs = null;  
 
   Connection con = null;  
   Class.forName(&quot;oracle.jdbc.driver.OracleDriver&quot;);  
   try  
   {  
       con = DriverManager.getConnection(&quot;jdbc:oracle:thin:@127.0.0.1:1521:xe&quot;, &quot;louluan&quot;, &quot;123456&quot;);  
       st = con.prepareStatement(sql);  
       //设置参数  
       st.setInt(1, 101);  
       st.setInt(2, 0);  
       //查询，得出结果集  
       rs = st.executeQuery();  
       //取数据，省略  
       //关闭，释放资源  
       con.close();  
   }  
   catch (SQLException e)  
   {  
       con.close();  
       e.printStackTrace();  
   }  
}  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><p>调用过close()方法的Connection对象所持有的资源会被全部释放掉，Connection对象也就不能再使用。</p> <p><strong>那么，如果我们使用了连接池，我们在用完了Connection对象时，需要将它放在连接池中，该怎样做呢</strong>？</p> <p>为了和一般的使用Conneciton对象的方式保持一致，我们希望当Connection使用完后，调用.close()方法，而实际上Connection资源并没有被释放，而实际上被添加到了连接池中。这样可以做到吗？答案是可以。上述的要求从另外一个角度来描述就是：能否提供一种机制，让我们知道Connection对象调用了什么方法，从而根据不同的方法自定义相应的处理机制。恰好代理机制就可以完成上述要求.</p> <p><strong>怎样实现Connection对象调用了close()方法，而实际是将其添加到连接池中</strong>：</p> <p>这是要使用代理模式，为真正的Connection对象创建一个代理对象，代理对象所有的方法都是调用相应的真正Connection对象的方法实现。当代理对象执行close()方法时，要特殊处理，不调用真正Connection对象的close()方法，而是将Connection对象添加到连接池中。</p> <p>MyBatis的PooledDataSource的PoolState内部维护的对象是PooledConnection类型的对象，而PooledConnection则是对真正的数据库连接java.sql.Connection实例对象的包裹器。</p> <p>PooledConnection对象内持有一个真正的数据库连接java.sql.Connection实例对象和一个java.sql.Connection的代理，其部分定义如下：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>class PooledConnection implements InvocationHandler {  
   
    //......  
    //所创建它的datasource引用  
    private PooledDataSource dataSource;  
    //真正的Connection对象  
    private Connection realConnection;  
    //代理自己的代理Connection  
    private Connection proxyConnection;  
   
    //......  
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>PooledConenction实现了InvocationHandler接口，并且，proxyConnection对象也是根据这个它来生成的代理对象：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public PooledConnection(Connection connection, PooledDataSource dataSource) {  
   this.hashCode = connection.hashCode();  
   this.realConnection = connection;  
   this.dataSource = dataSource;  
   this.createdTimestamp = System.currentTimeMillis();  
   this.lastUsedTimestamp = System.currentTimeMillis();  
   this.valid = true;  
   this.proxyConnection = (Connection) Proxy.newProxyInstance(Connection.class.getClassLoader(), IFACES, this);  
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>实际上，我们调用PooledDataSource的getConnection()方法返回的就是这个proxyConnection对象。当我们调用此proxyConnection对象上的任何方法时，都会调用PooledConnection对象内invoke()方法。</p> <p>让我们看一下PooledConnection类中的invoke()方法定义：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {  
    String methodName = method.getName();  
    //当调用关闭的时候，回收此Connection到PooledDataSource中  
    if (CLOSE.hashCode() == methodName.hashCode() &amp;&amp; CLOSE.equals(methodName)) {  
        dataSource.pushConnection(this);  
        return null;  
    } else {  
        try {  
            if (!Object.class.equals(method.getDeclaringClass())) {  
                checkConnection();  
            }  
            return method.invoke(realConnection, args);  
        } catch (Throwable t) {  
            throw ExceptionUtil.unwrapThrowable(t);  
        }  
    }  
}  
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>从上述代码可以看到，当我们使用了pooledDataSource.getConnection()返回的Connection对象的close()方法时，不会调用真正Connection的close()方法，而是将此Connection对象放到连接池中。</p> <h1 id="jndi类型的数据源datasource"><a href="#jndi类型的数据源datasource" class="header-anchor">#</a> JNDI类型的数据源DataSource</h1> <hr> <p>对于JNDI类型的数据源DataSource的获取就比较简单，MyBatis定义了一个JndiDataSourceFactory工厂来创建通过JNDI形式生成的DataSource。下面让我们看一下JndiDataSourceFactory的关键代码：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>if (properties.containsKey(INITIAL_CONTEXT) &amp;&amp; properties.containsKey(DATA_SOURCE))  
{  
    //从JNDI上下文中找到DataSource并返回  
    Context ctx = (Context) initCtx.lookup(properties.getProperty(INITIAL_CONTEXT));  
    dataSource = (DataSource) ctx.lookup(properties.getProperty(DATA_SOURCE));  
}  
else if (properties.containsKey(DATA_SOURCE))  
{  
    //从JNDI上下文中找到DataSource并返回  
    dataSource = (DataSource) initCtx.lookup(properties.getProperty(DATA_SOURCE));  
} 
```)</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://fanxgit.github.io/fanxNotes/edit/master/docs/源代码学习/02.ORM框架 - MyBatis知识体系详解/11.MyBatis详解 - 数据源与连接池.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">8/17/2023, 5:04:28 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/052ff5/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">MyBatis详解 - 插件之分页机制</div></a> <a href="/pages/f7dbad/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">MyBatis详解 - 事务管理机制</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/052ff5/" class="prev">MyBatis详解 - 插件之分页机制</a></span> <span class="next"><a href="/pages/f7dbad/">MyBatis详解 - 事务管理机制</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/797621/"><div>
            VuePress+GithubPages教程
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/016620/"><div>
            java打jar包整理
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b23a10/"><div>
            多线程问题总结
            <!----></div></a> <span class="date">11-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.38fd400a.js" defer></script><script src="/assets/js/3.e11db813.js" defer></script><script src="/assets/js/205.411987d7.js" defer></script>
  </body>
</html>
