<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JUC工具类-Semaphore详解 | Fanx 知识库</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.svg">[object Object]
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.6ece31e0.css" as="style"><link rel="preload" href="/assets/js/app.38fd400a.js" as="script"><link rel="preload" href="/assets/js/3.e11db813.js" as="script"><link rel="preload" href="/assets/js/72.9fa783f0.js" as="script"><link rel="prefetch" href="/assets/js/10.939e2dd4.js"><link rel="prefetch" href="/assets/js/100.4a08f581.js"><link rel="prefetch" href="/assets/js/101.45cd45c9.js"><link rel="prefetch" href="/assets/js/102.ac1359d1.js"><link rel="prefetch" href="/assets/js/103.22344102.js"><link rel="prefetch" href="/assets/js/104.5071cdfd.js"><link rel="prefetch" href="/assets/js/105.7767c121.js"><link rel="prefetch" href="/assets/js/106.809b79f1.js"><link rel="prefetch" href="/assets/js/107.62fd626a.js"><link rel="prefetch" href="/assets/js/108.0583fdc1.js"><link rel="prefetch" href="/assets/js/109.fa127771.js"><link rel="prefetch" href="/assets/js/11.6463adc8.js"><link rel="prefetch" href="/assets/js/110.5cf9f09c.js"><link rel="prefetch" href="/assets/js/111.9d963667.js"><link rel="prefetch" href="/assets/js/112.bc2b8a6e.js"><link rel="prefetch" href="/assets/js/113.2ae29573.js"><link rel="prefetch" href="/assets/js/114.0b2cedfa.js"><link rel="prefetch" href="/assets/js/115.652e433e.js"><link rel="prefetch" href="/assets/js/116.bcc5d64a.js"><link rel="prefetch" href="/assets/js/117.30b02d0d.js"><link rel="prefetch" href="/assets/js/118.87f4f927.js"><link rel="prefetch" href="/assets/js/119.05839492.js"><link rel="prefetch" href="/assets/js/12.a17960e5.js"><link rel="prefetch" href="/assets/js/120.3d772c9c.js"><link rel="prefetch" href="/assets/js/121.bd8fcebf.js"><link rel="prefetch" href="/assets/js/122.e58d2205.js"><link rel="prefetch" href="/assets/js/123.f2c2826d.js"><link rel="prefetch" href="/assets/js/124.12d9ff87.js"><link rel="prefetch" href="/assets/js/125.c7e4bf1c.js"><link rel="prefetch" href="/assets/js/126.71c358fb.js"><link rel="prefetch" href="/assets/js/127.fb1922e5.js"><link rel="prefetch" href="/assets/js/128.25cbf771.js"><link rel="prefetch" href="/assets/js/129.50047ea3.js"><link rel="prefetch" href="/assets/js/13.727ebfda.js"><link rel="prefetch" href="/assets/js/130.a77cfa28.js"><link rel="prefetch" href="/assets/js/131.1618c1f5.js"><link rel="prefetch" href="/assets/js/132.4073573b.js"><link rel="prefetch" href="/assets/js/133.f6e4882f.js"><link rel="prefetch" href="/assets/js/134.1de81973.js"><link rel="prefetch" href="/assets/js/135.43148a0c.js"><link rel="prefetch" href="/assets/js/136.12b3ef34.js"><link rel="prefetch" href="/assets/js/137.accefc34.js"><link rel="prefetch" href="/assets/js/138.8d3115ff.js"><link rel="prefetch" href="/assets/js/139.6e492e2b.js"><link rel="prefetch" href="/assets/js/14.bc6d3062.js"><link rel="prefetch" href="/assets/js/140.3d98f006.js"><link rel="prefetch" href="/assets/js/141.542d08af.js"><link rel="prefetch" href="/assets/js/142.c91a19a2.js"><link rel="prefetch" href="/assets/js/143.0c681ed2.js"><link rel="prefetch" href="/assets/js/144.62e9c646.js"><link rel="prefetch" href="/assets/js/145.ebc34777.js"><link rel="prefetch" href="/assets/js/146.d94a04a7.js"><link rel="prefetch" href="/assets/js/147.b45158de.js"><link rel="prefetch" href="/assets/js/148.5dfa6740.js"><link rel="prefetch" href="/assets/js/149.cb6f2cb0.js"><link rel="prefetch" href="/assets/js/15.a9468bf1.js"><link rel="prefetch" href="/assets/js/150.9f58dbc6.js"><link rel="prefetch" href="/assets/js/151.0a1c07e3.js"><link rel="prefetch" href="/assets/js/152.eafe4843.js"><link rel="prefetch" href="/assets/js/153.fb94cab5.js"><link rel="prefetch" href="/assets/js/154.07f7a11d.js"><link rel="prefetch" href="/assets/js/155.7f6da40b.js"><link rel="prefetch" href="/assets/js/156.2f007ca1.js"><link rel="prefetch" href="/assets/js/157.a35b5249.js"><link rel="prefetch" href="/assets/js/158.540f7a5a.js"><link rel="prefetch" href="/assets/js/159.f62e0315.js"><link rel="prefetch" href="/assets/js/16.ace3b806.js"><link rel="prefetch" href="/assets/js/160.e043c758.js"><link rel="prefetch" href="/assets/js/161.d90141bf.js"><link rel="prefetch" href="/assets/js/162.ddcdbfb9.js"><link rel="prefetch" href="/assets/js/163.f1ba395e.js"><link rel="prefetch" href="/assets/js/164.9f398973.js"><link rel="prefetch" href="/assets/js/165.0db3da51.js"><link rel="prefetch" href="/assets/js/166.b5305797.js"><link rel="prefetch" href="/assets/js/167.e7b2f76b.js"><link rel="prefetch" href="/assets/js/168.a2ecf883.js"><link rel="prefetch" href="/assets/js/169.88bd4d26.js"><link rel="prefetch" href="/assets/js/17.60481837.js"><link rel="prefetch" href="/assets/js/170.fb1699e2.js"><link rel="prefetch" href="/assets/js/171.47268bef.js"><link rel="prefetch" href="/assets/js/172.79002327.js"><link rel="prefetch" href="/assets/js/173.3b1813fb.js"><link rel="prefetch" href="/assets/js/174.362811a9.js"><link rel="prefetch" href="/assets/js/175.bb48bcd7.js"><link rel="prefetch" href="/assets/js/176.97bbf32c.js"><link rel="prefetch" href="/assets/js/177.0717ff7a.js"><link rel="prefetch" href="/assets/js/178.75bff3b7.js"><link rel="prefetch" href="/assets/js/179.3e7db0a2.js"><link rel="prefetch" href="/assets/js/18.dd3c5709.js"><link rel="prefetch" href="/assets/js/180.c81da8dd.js"><link rel="prefetch" href="/assets/js/181.142d6d1c.js"><link rel="prefetch" href="/assets/js/182.fb312040.js"><link rel="prefetch" href="/assets/js/183.3684267e.js"><link rel="prefetch" href="/assets/js/184.ec2a13bc.js"><link rel="prefetch" href="/assets/js/185.a7acace4.js"><link rel="prefetch" href="/assets/js/186.7df28551.js"><link rel="prefetch" href="/assets/js/187.347e9348.js"><link rel="prefetch" href="/assets/js/188.07356026.js"><link rel="prefetch" href="/assets/js/189.0816176d.js"><link rel="prefetch" href="/assets/js/19.cc2d4ad1.js"><link rel="prefetch" href="/assets/js/190.fd5dd8cc.js"><link rel="prefetch" href="/assets/js/191.a938967e.js"><link rel="prefetch" href="/assets/js/192.859b71a1.js"><link rel="prefetch" href="/assets/js/193.adcf2ec3.js"><link rel="prefetch" href="/assets/js/194.69d1169c.js"><link rel="prefetch" href="/assets/js/195.ad7cbcc4.js"><link rel="prefetch" href="/assets/js/196.b65138da.js"><link rel="prefetch" href="/assets/js/197.b4fca73b.js"><link rel="prefetch" href="/assets/js/198.2494a23f.js"><link rel="prefetch" href="/assets/js/199.404b9ce1.js"><link rel="prefetch" href="/assets/js/2.938bab56.js"><link rel="prefetch" href="/assets/js/20.361e2bf6.js"><link rel="prefetch" href="/assets/js/200.42b54eae.js"><link rel="prefetch" href="/assets/js/201.ab495eb8.js"><link rel="prefetch" href="/assets/js/202.2cbc5c9a.js"><link rel="prefetch" href="/assets/js/203.abf3fde5.js"><link rel="prefetch" href="/assets/js/204.4fdd4cfb.js"><link rel="prefetch" href="/assets/js/205.411987d7.js"><link rel="prefetch" href="/assets/js/206.dbcab3ae.js"><link rel="prefetch" href="/assets/js/207.f1429354.js"><link rel="prefetch" href="/assets/js/208.f763286c.js"><link rel="prefetch" href="/assets/js/209.c1edbca5.js"><link rel="prefetch" href="/assets/js/21.ae1e88a3.js"><link rel="prefetch" href="/assets/js/210.b2a1501d.js"><link rel="prefetch" href="/assets/js/211.fe1fd5f7.js"><link rel="prefetch" href="/assets/js/212.0fd39a8f.js"><link rel="prefetch" href="/assets/js/213.bb3fc163.js"><link rel="prefetch" href="/assets/js/214.c42e1ef3.js"><link rel="prefetch" href="/assets/js/215.4f0fa915.js"><link rel="prefetch" href="/assets/js/216.07c485c9.js"><link rel="prefetch" href="/assets/js/217.ada25e7a.js"><link rel="prefetch" href="/assets/js/218.2f761d3c.js"><link rel="prefetch" href="/assets/js/219.32d1a663.js"><link rel="prefetch" href="/assets/js/22.0b09d67f.js"><link rel="prefetch" href="/assets/js/220.36c56cf4.js"><link rel="prefetch" href="/assets/js/221.3e0431e2.js"><link rel="prefetch" href="/assets/js/222.90aa0ff7.js"><link rel="prefetch" href="/assets/js/223.5966d7df.js"><link rel="prefetch" href="/assets/js/224.7e2329e1.js"><link rel="prefetch" href="/assets/js/225.2ed3675d.js"><link rel="prefetch" href="/assets/js/226.fa3cef02.js"><link rel="prefetch" href="/assets/js/227.07bf7bca.js"><link rel="prefetch" href="/assets/js/228.9ac2589a.js"><link rel="prefetch" href="/assets/js/229.b980e141.js"><link rel="prefetch" href="/assets/js/23.31ed5c2f.js"><link rel="prefetch" href="/assets/js/230.2c32e874.js"><link rel="prefetch" href="/assets/js/231.723e20cb.js"><link rel="prefetch" href="/assets/js/232.1f94511c.js"><link rel="prefetch" href="/assets/js/233.2d477f71.js"><link rel="prefetch" href="/assets/js/234.10141c75.js"><link rel="prefetch" href="/assets/js/235.a328b127.js"><link rel="prefetch" href="/assets/js/236.42419c3b.js"><link rel="prefetch" href="/assets/js/237.648ca44e.js"><link rel="prefetch" href="/assets/js/238.4b363b75.js"><link rel="prefetch" href="/assets/js/239.fe711a73.js"><link rel="prefetch" href="/assets/js/24.fe75e3fa.js"><link rel="prefetch" href="/assets/js/240.6baa12bf.js"><link rel="prefetch" href="/assets/js/241.6f375dc4.js"><link rel="prefetch" href="/assets/js/242.aee8e39d.js"><link rel="prefetch" href="/assets/js/243.bfc7f6e1.js"><link rel="prefetch" href="/assets/js/244.c73a14a7.js"><link rel="prefetch" href="/assets/js/245.a2352aa1.js"><link rel="prefetch" href="/assets/js/246.b12c3ae6.js"><link rel="prefetch" href="/assets/js/247.2f768275.js"><link rel="prefetch" href="/assets/js/248.3f79dfb1.js"><link rel="prefetch" href="/assets/js/249.7fd0cb75.js"><link rel="prefetch" href="/assets/js/25.f2e379df.js"><link rel="prefetch" href="/assets/js/250.df3f1d0a.js"><link rel="prefetch" href="/assets/js/251.a3865750.js"><link rel="prefetch" href="/assets/js/252.d62542df.js"><link rel="prefetch" href="/assets/js/253.59b2f200.js"><link rel="prefetch" href="/assets/js/254.522d17b5.js"><link rel="prefetch" href="/assets/js/255.0f95a196.js"><link rel="prefetch" href="/assets/js/256.31b37cbe.js"><link rel="prefetch" href="/assets/js/257.ff22ad12.js"><link rel="prefetch" href="/assets/js/258.15205e0b.js"><link rel="prefetch" href="/assets/js/259.f3b7c5aa.js"><link rel="prefetch" href="/assets/js/26.45264b04.js"><link rel="prefetch" href="/assets/js/260.fec3c7aa.js"><link rel="prefetch" href="/assets/js/261.d965ee56.js"><link rel="prefetch" href="/assets/js/262.76a7105b.js"><link rel="prefetch" href="/assets/js/263.e684cc46.js"><link rel="prefetch" href="/assets/js/264.59297da0.js"><link rel="prefetch" href="/assets/js/265.66182ed2.js"><link rel="prefetch" href="/assets/js/266.eec50d90.js"><link rel="prefetch" href="/assets/js/267.c85bce12.js"><link rel="prefetch" href="/assets/js/268.ef544f0c.js"><link rel="prefetch" href="/assets/js/269.8cfb5c6a.js"><link rel="prefetch" href="/assets/js/27.4e065810.js"><link rel="prefetch" href="/assets/js/270.b66cab3c.js"><link rel="prefetch" href="/assets/js/271.c1b7d136.js"><link rel="prefetch" href="/assets/js/272.0d7950c3.js"><link rel="prefetch" href="/assets/js/273.06349cca.js"><link rel="prefetch" href="/assets/js/274.9b442c09.js"><link rel="prefetch" href="/assets/js/275.11082d81.js"><link rel="prefetch" href="/assets/js/276.ce0abe31.js"><link rel="prefetch" href="/assets/js/277.4b7fcc53.js"><link rel="prefetch" href="/assets/js/278.129d0397.js"><link rel="prefetch" href="/assets/js/279.5c021f7c.js"><link rel="prefetch" href="/assets/js/28.126ecd33.js"><link rel="prefetch" href="/assets/js/280.d183c9e3.js"><link rel="prefetch" href="/assets/js/281.0df67750.js"><link rel="prefetch" href="/assets/js/282.8fdd2372.js"><link rel="prefetch" href="/assets/js/283.dae956df.js"><link rel="prefetch" href="/assets/js/284.c5dc7189.js"><link rel="prefetch" href="/assets/js/285.7f5a7367.js"><link rel="prefetch" href="/assets/js/286.d9bfcef5.js"><link rel="prefetch" href="/assets/js/287.4fa6a5c5.js"><link rel="prefetch" href="/assets/js/288.57904d2d.js"><link rel="prefetch" href="/assets/js/289.b96d7c2f.js"><link rel="prefetch" href="/assets/js/29.8f5db82a.js"><link rel="prefetch" href="/assets/js/290.8dda9646.js"><link rel="prefetch" href="/assets/js/291.ab433493.js"><link rel="prefetch" href="/assets/js/292.e2d59796.js"><link rel="prefetch" href="/assets/js/293.30f9fcc4.js"><link rel="prefetch" href="/assets/js/294.158492dc.js"><link rel="prefetch" href="/assets/js/295.33e3a53d.js"><link rel="prefetch" href="/assets/js/296.49d7a2de.js"><link rel="prefetch" href="/assets/js/297.1b7572ac.js"><link rel="prefetch" href="/assets/js/298.00e4586a.js"><link rel="prefetch" href="/assets/js/299.d8fb6ff9.js"><link rel="prefetch" href="/assets/js/30.ef97cb8e.js"><link rel="prefetch" href="/assets/js/300.90e9dadf.js"><link rel="prefetch" href="/assets/js/301.d5592ea1.js"><link rel="prefetch" href="/assets/js/302.b08dc1ea.js"><link rel="prefetch" href="/assets/js/303.bef541c8.js"><link rel="prefetch" href="/assets/js/304.be3f7081.js"><link rel="prefetch" href="/assets/js/305.13718421.js"><link rel="prefetch" href="/assets/js/306.41685aa2.js"><link rel="prefetch" href="/assets/js/307.6d569102.js"><link rel="prefetch" href="/assets/js/308.aaabab89.js"><link rel="prefetch" href="/assets/js/309.910ecc42.js"><link rel="prefetch" href="/assets/js/31.795b3334.js"><link rel="prefetch" href="/assets/js/310.104b7753.js"><link rel="prefetch" href="/assets/js/311.45f4a7da.js"><link rel="prefetch" href="/assets/js/312.180c7e45.js"><link rel="prefetch" href="/assets/js/313.87d3a801.js"><link rel="prefetch" href="/assets/js/314.7739b1ef.js"><link rel="prefetch" href="/assets/js/315.54a1fac0.js"><link rel="prefetch" href="/assets/js/316.a978a787.js"><link rel="prefetch" href="/assets/js/317.84f65f2c.js"><link rel="prefetch" href="/assets/js/318.7f8caff8.js"><link rel="prefetch" href="/assets/js/319.0b5276f3.js"><link rel="prefetch" href="/assets/js/32.e65c7229.js"><link rel="prefetch" href="/assets/js/320.ba90589a.js"><link rel="prefetch" href="/assets/js/321.b6810c5a.js"><link rel="prefetch" href="/assets/js/322.2eaa727d.js"><link rel="prefetch" href="/assets/js/323.17573ee3.js"><link rel="prefetch" href="/assets/js/324.806fd6ca.js"><link rel="prefetch" href="/assets/js/325.4cd65079.js"><link rel="prefetch" href="/assets/js/326.fe0e2e22.js"><link rel="prefetch" href="/assets/js/327.a64d0209.js"><link rel="prefetch" href="/assets/js/328.aca1c89a.js"><link rel="prefetch" href="/assets/js/329.53ccf1dd.js"><link rel="prefetch" href="/assets/js/33.9a57aab8.js"><link rel="prefetch" href="/assets/js/330.92822a09.js"><link rel="prefetch" href="/assets/js/331.6b82baff.js"><link rel="prefetch" href="/assets/js/332.fc20f585.js"><link rel="prefetch" href="/assets/js/333.005ba8e3.js"><link rel="prefetch" href="/assets/js/334.9d3309b8.js"><link rel="prefetch" href="/assets/js/335.0e938f19.js"><link rel="prefetch" href="/assets/js/336.01fe9903.js"><link rel="prefetch" href="/assets/js/337.e207d67c.js"><link rel="prefetch" href="/assets/js/338.bfcf6bc8.js"><link rel="prefetch" href="/assets/js/339.a502aa64.js"><link rel="prefetch" href="/assets/js/34.3835d35c.js"><link rel="prefetch" href="/assets/js/340.3888b147.js"><link rel="prefetch" href="/assets/js/341.20297f95.js"><link rel="prefetch" href="/assets/js/342.9cd149e9.js"><link rel="prefetch" href="/assets/js/343.faac8369.js"><link rel="prefetch" href="/assets/js/344.da8cd079.js"><link rel="prefetch" href="/assets/js/345.78303b88.js"><link rel="prefetch" href="/assets/js/346.d8eaca82.js"><link rel="prefetch" href="/assets/js/347.edd389a1.js"><link rel="prefetch" href="/assets/js/348.21ee9617.js"><link rel="prefetch" href="/assets/js/349.0251471a.js"><link rel="prefetch" href="/assets/js/35.76dc7096.js"><link rel="prefetch" href="/assets/js/350.710b7d30.js"><link rel="prefetch" href="/assets/js/351.535f8d60.js"><link rel="prefetch" href="/assets/js/352.c66fe42e.js"><link rel="prefetch" href="/assets/js/353.ebbcd333.js"><link rel="prefetch" href="/assets/js/354.7cbba2f1.js"><link rel="prefetch" href="/assets/js/355.0106db16.js"><link rel="prefetch" href="/assets/js/356.7debf350.js"><link rel="prefetch" href="/assets/js/357.a43eb887.js"><link rel="prefetch" href="/assets/js/358.28e5d2ed.js"><link rel="prefetch" href="/assets/js/359.956fc3b8.js"><link rel="prefetch" href="/assets/js/36.fc54452c.js"><link rel="prefetch" href="/assets/js/360.13fb600a.js"><link rel="prefetch" href="/assets/js/361.d100f85b.js"><link rel="prefetch" href="/assets/js/362.35277df2.js"><link rel="prefetch" href="/assets/js/363.d993a7fc.js"><link rel="prefetch" href="/assets/js/364.0168c2b0.js"><link rel="prefetch" href="/assets/js/365.bc8af0bb.js"><link rel="prefetch" href="/assets/js/366.2645dc0d.js"><link rel="prefetch" href="/assets/js/367.87368acb.js"><link rel="prefetch" href="/assets/js/368.0b7d41fc.js"><link rel="prefetch" href="/assets/js/369.4bf3f46e.js"><link rel="prefetch" href="/assets/js/37.5a47cee9.js"><link rel="prefetch" href="/assets/js/370.ea5f965e.js"><link rel="prefetch" href="/assets/js/371.1af764ef.js"><link rel="prefetch" href="/assets/js/372.bf6c68e2.js"><link rel="prefetch" href="/assets/js/373.1a605cc8.js"><link rel="prefetch" href="/assets/js/374.34a41a4a.js"><link rel="prefetch" href="/assets/js/375.1d2d3776.js"><link rel="prefetch" href="/assets/js/376.4b7b0b10.js"><link rel="prefetch" href="/assets/js/377.b3d9748a.js"><link rel="prefetch" href="/assets/js/378.7f00fa88.js"><link rel="prefetch" href="/assets/js/379.adcd298a.js"><link rel="prefetch" href="/assets/js/38.6614c565.js"><link rel="prefetch" href="/assets/js/380.6d08bb56.js"><link rel="prefetch" href="/assets/js/381.164bb4e3.js"><link rel="prefetch" href="/assets/js/382.f71f0ca4.js"><link rel="prefetch" href="/assets/js/383.01ba70ad.js"><link rel="prefetch" href="/assets/js/384.22b98cde.js"><link rel="prefetch" href="/assets/js/385.5f1298a9.js"><link rel="prefetch" href="/assets/js/386.01a912bc.js"><link rel="prefetch" href="/assets/js/387.3db4713f.js"><link rel="prefetch" href="/assets/js/388.4cde7d0f.js"><link rel="prefetch" href="/assets/js/389.d96bafad.js"><link rel="prefetch" href="/assets/js/39.1a09ed15.js"><link rel="prefetch" href="/assets/js/390.343bbc06.js"><link rel="prefetch" href="/assets/js/391.68b3e72a.js"><link rel="prefetch" href="/assets/js/392.f4f15e43.js"><link rel="prefetch" href="/assets/js/393.82475934.js"><link rel="prefetch" href="/assets/js/394.3101ea10.js"><link rel="prefetch" href="/assets/js/395.34083342.js"><link rel="prefetch" href="/assets/js/396.780d6efe.js"><link rel="prefetch" href="/assets/js/397.cb686f39.js"><link rel="prefetch" href="/assets/js/398.c4ad669f.js"><link rel="prefetch" href="/assets/js/399.ee8d28ad.js"><link rel="prefetch" href="/assets/js/4.c1dcb1a7.js"><link rel="prefetch" href="/assets/js/40.4216f4f9.js"><link rel="prefetch" href="/assets/js/400.23d48a38.js"><link rel="prefetch" href="/assets/js/401.319d7a68.js"><link rel="prefetch" href="/assets/js/402.25b27bd0.js"><link rel="prefetch" href="/assets/js/403.9a898a40.js"><link rel="prefetch" href="/assets/js/404.e3b49b79.js"><link rel="prefetch" href="/assets/js/405.7695b9f1.js"><link rel="prefetch" href="/assets/js/406.edb801f7.js"><link rel="prefetch" href="/assets/js/407.03c3f725.js"><link rel="prefetch" href="/assets/js/408.4345ef1f.js"><link rel="prefetch" href="/assets/js/409.77c34447.js"><link rel="prefetch" href="/assets/js/41.f035663a.js"><link rel="prefetch" href="/assets/js/410.7f6c0744.js"><link rel="prefetch" href="/assets/js/411.cb19323e.js"><link rel="prefetch" href="/assets/js/412.4b16959d.js"><link rel="prefetch" href="/assets/js/413.ff4f1ca2.js"><link rel="prefetch" href="/assets/js/414.b1ca1298.js"><link rel="prefetch" href="/assets/js/415.c2111593.js"><link rel="prefetch" href="/assets/js/416.a6d18039.js"><link rel="prefetch" href="/assets/js/417.dc36c66d.js"><link rel="prefetch" href="/assets/js/418.e7eba879.js"><link rel="prefetch" href="/assets/js/419.57673b9e.js"><link rel="prefetch" href="/assets/js/42.9c8cf569.js"><link rel="prefetch" href="/assets/js/420.ccd41fe0.js"><link rel="prefetch" href="/assets/js/421.ea69f0b0.js"><link rel="prefetch" href="/assets/js/422.093448e2.js"><link rel="prefetch" href="/assets/js/423.ae003f31.js"><link rel="prefetch" href="/assets/js/424.f670cd2b.js"><link rel="prefetch" href="/assets/js/425.6e814335.js"><link rel="prefetch" href="/assets/js/426.faf45206.js"><link rel="prefetch" href="/assets/js/427.cf6be942.js"><link rel="prefetch" href="/assets/js/428.9ff6199c.js"><link rel="prefetch" href="/assets/js/429.b6ef4678.js"><link rel="prefetch" href="/assets/js/43.717fe06b.js"><link rel="prefetch" href="/assets/js/430.e9575d07.js"><link rel="prefetch" href="/assets/js/431.8bf26a3e.js"><link rel="prefetch" href="/assets/js/432.5eaa2162.js"><link rel="prefetch" href="/assets/js/433.6dab12a1.js"><link rel="prefetch" href="/assets/js/434.fca918e8.js"><link rel="prefetch" href="/assets/js/435.4c8f9ad9.js"><link rel="prefetch" href="/assets/js/436.0f0de1a8.js"><link rel="prefetch" href="/assets/js/437.2221ab9f.js"><link rel="prefetch" href="/assets/js/438.37f28cfb.js"><link rel="prefetch" href="/assets/js/439.1e3f3611.js"><link rel="prefetch" href="/assets/js/44.705dc411.js"><link rel="prefetch" href="/assets/js/440.28ab35e8.js"><link rel="prefetch" href="/assets/js/441.8d006af8.js"><link rel="prefetch" href="/assets/js/442.2618a6e3.js"><link rel="prefetch" href="/assets/js/443.a7723674.js"><link rel="prefetch" href="/assets/js/444.18f23e7c.js"><link rel="prefetch" href="/assets/js/445.f4807c5a.js"><link rel="prefetch" href="/assets/js/446.77a5afc2.js"><link rel="prefetch" href="/assets/js/447.7f653483.js"><link rel="prefetch" href="/assets/js/448.1143c566.js"><link rel="prefetch" href="/assets/js/449.b788a288.js"><link rel="prefetch" href="/assets/js/45.6a225373.js"><link rel="prefetch" href="/assets/js/450.b6463ba3.js"><link rel="prefetch" href="/assets/js/451.fd4d46b9.js"><link rel="prefetch" href="/assets/js/452.e8de4fc2.js"><link rel="prefetch" href="/assets/js/453.4125e5e6.js"><link rel="prefetch" href="/assets/js/454.30af5d0a.js"><link rel="prefetch" href="/assets/js/455.9c919e58.js"><link rel="prefetch" href="/assets/js/456.22dbfa8f.js"><link rel="prefetch" href="/assets/js/457.e9c5248a.js"><link rel="prefetch" href="/assets/js/458.c0a9cf1d.js"><link rel="prefetch" href="/assets/js/459.b5e96042.js"><link rel="prefetch" href="/assets/js/46.515d085a.js"><link rel="prefetch" href="/assets/js/460.b4097efb.js"><link rel="prefetch" href="/assets/js/461.5d545741.js"><link rel="prefetch" href="/assets/js/462.402d4cdd.js"><link rel="prefetch" href="/assets/js/463.e6d6ea07.js"><link rel="prefetch" href="/assets/js/464.df817445.js"><link rel="prefetch" href="/assets/js/465.18a6bc2b.js"><link rel="prefetch" href="/assets/js/466.da313c0c.js"><link rel="prefetch" href="/assets/js/467.41294182.js"><link rel="prefetch" href="/assets/js/468.41c59467.js"><link rel="prefetch" href="/assets/js/469.d55da13c.js"><link rel="prefetch" href="/assets/js/47.a41193df.js"><link rel="prefetch" href="/assets/js/470.7457a92e.js"><link rel="prefetch" href="/assets/js/471.ed739bdf.js"><link rel="prefetch" href="/assets/js/472.83882459.js"><link rel="prefetch" href="/assets/js/473.fe2df51c.js"><link rel="prefetch" href="/assets/js/474.d40797b8.js"><link rel="prefetch" href="/assets/js/475.a00992a2.js"><link rel="prefetch" href="/assets/js/476.c7687189.js"><link rel="prefetch" href="/assets/js/477.fd4fd227.js"><link rel="prefetch" href="/assets/js/478.1ae08c3b.js"><link rel="prefetch" href="/assets/js/479.04a246c6.js"><link rel="prefetch" href="/assets/js/48.fe693306.js"><link rel="prefetch" href="/assets/js/480.36acb4ff.js"><link rel="prefetch" href="/assets/js/481.05d3129e.js"><link rel="prefetch" href="/assets/js/482.1741a02c.js"><link rel="prefetch" href="/assets/js/483.44cf2d25.js"><link rel="prefetch" href="/assets/js/484.9c14e5c6.js"><link rel="prefetch" href="/assets/js/485.ea0c1de1.js"><link rel="prefetch" href="/assets/js/486.8c683697.js"><link rel="prefetch" href="/assets/js/487.8b1eb604.js"><link rel="prefetch" href="/assets/js/488.ae16fca6.js"><link rel="prefetch" href="/assets/js/489.7f674a0d.js"><link rel="prefetch" href="/assets/js/49.a7d05a3d.js"><link rel="prefetch" href="/assets/js/490.52983854.js"><link rel="prefetch" href="/assets/js/491.968e7af4.js"><link rel="prefetch" href="/assets/js/492.e7f58bac.js"><link rel="prefetch" href="/assets/js/493.55afbb68.js"><link rel="prefetch" href="/assets/js/494.ac17d05b.js"><link rel="prefetch" href="/assets/js/495.d1ca2a12.js"><link rel="prefetch" href="/assets/js/496.d6841a0e.js"><link rel="prefetch" href="/assets/js/497.99431b4b.js"><link rel="prefetch" href="/assets/js/498.cacac1d8.js"><link rel="prefetch" href="/assets/js/499.c6b7fab0.js"><link rel="prefetch" href="/assets/js/5.f74a04c4.js"><link rel="prefetch" href="/assets/js/50.f59b29ea.js"><link rel="prefetch" href="/assets/js/500.abba24c7.js"><link rel="prefetch" href="/assets/js/501.e9496674.js"><link rel="prefetch" href="/assets/js/502.3ece0e86.js"><link rel="prefetch" href="/assets/js/503.974421d1.js"><link rel="prefetch" href="/assets/js/504.6e8d8539.js"><link rel="prefetch" href="/assets/js/505.b8161483.js"><link rel="prefetch" href="/assets/js/506.a6a6f2de.js"><link rel="prefetch" href="/assets/js/507.9c6955ee.js"><link rel="prefetch" href="/assets/js/508.223e145d.js"><link rel="prefetch" href="/assets/js/509.553e6f2c.js"><link rel="prefetch" href="/assets/js/51.428c5495.js"><link rel="prefetch" href="/assets/js/510.46e2eab7.js"><link rel="prefetch" href="/assets/js/511.24962b3f.js"><link rel="prefetch" href="/assets/js/512.a29fe236.js"><link rel="prefetch" href="/assets/js/513.8729b339.js"><link rel="prefetch" href="/assets/js/514.41199019.js"><link rel="prefetch" href="/assets/js/515.b1a71e99.js"><link rel="prefetch" href="/assets/js/516.001e3634.js"><link rel="prefetch" href="/assets/js/517.4de05581.js"><link rel="prefetch" href="/assets/js/518.57697c31.js"><link rel="prefetch" href="/assets/js/519.e962365e.js"><link rel="prefetch" href="/assets/js/52.c97c3911.js"><link rel="prefetch" href="/assets/js/520.e7775961.js"><link rel="prefetch" href="/assets/js/521.05b0ce57.js"><link rel="prefetch" href="/assets/js/522.49f7412e.js"><link rel="prefetch" href="/assets/js/523.b3d821b2.js"><link rel="prefetch" href="/assets/js/524.ab2395b7.js"><link rel="prefetch" href="/assets/js/525.25559bb4.js"><link rel="prefetch" href="/assets/js/526.23111d2a.js"><link rel="prefetch" href="/assets/js/527.c61f6e86.js"><link rel="prefetch" href="/assets/js/528.032fa7b6.js"><link rel="prefetch" href="/assets/js/529.3953f346.js"><link rel="prefetch" href="/assets/js/53.77f22b1a.js"><link rel="prefetch" href="/assets/js/530.b882066e.js"><link rel="prefetch" href="/assets/js/531.62dddf23.js"><link rel="prefetch" href="/assets/js/532.1826fe1a.js"><link rel="prefetch" href="/assets/js/533.a2e014bb.js"><link rel="prefetch" href="/assets/js/534.d5d89c00.js"><link rel="prefetch" href="/assets/js/535.4e5d7739.js"><link rel="prefetch" href="/assets/js/536.f2c700db.js"><link rel="prefetch" href="/assets/js/537.80aa278c.js"><link rel="prefetch" href="/assets/js/538.95e2f471.js"><link rel="prefetch" href="/assets/js/539.4e4ecfe8.js"><link rel="prefetch" href="/assets/js/54.d85b2f2e.js"><link rel="prefetch" href="/assets/js/540.00bd44e5.js"><link rel="prefetch" href="/assets/js/541.d740df14.js"><link rel="prefetch" href="/assets/js/542.5aadeaee.js"><link rel="prefetch" href="/assets/js/543.d42c9d9a.js"><link rel="prefetch" href="/assets/js/544.29704685.js"><link rel="prefetch" href="/assets/js/545.7fdb1a83.js"><link rel="prefetch" href="/assets/js/546.6b5655ea.js"><link rel="prefetch" href="/assets/js/547.c98e27c4.js"><link rel="prefetch" href="/assets/js/548.8edec06f.js"><link rel="prefetch" href="/assets/js/549.33b8eae3.js"><link rel="prefetch" href="/assets/js/55.80a4fa71.js"><link rel="prefetch" href="/assets/js/550.cb706b0e.js"><link rel="prefetch" href="/assets/js/551.79598cc6.js"><link rel="prefetch" href="/assets/js/552.69aa5f8b.js"><link rel="prefetch" href="/assets/js/553.7ccb8831.js"><link rel="prefetch" href="/assets/js/554.954013b2.js"><link rel="prefetch" href="/assets/js/555.960d7f8b.js"><link rel="prefetch" href="/assets/js/556.5c054c14.js"><link rel="prefetch" href="/assets/js/557.890045ea.js"><link rel="prefetch" href="/assets/js/558.f72f6668.js"><link rel="prefetch" href="/assets/js/559.452d8ff3.js"><link rel="prefetch" href="/assets/js/56.009b0340.js"><link rel="prefetch" href="/assets/js/560.1656e33f.js"><link rel="prefetch" href="/assets/js/561.bb4650eb.js"><link rel="prefetch" href="/assets/js/562.7322fd81.js"><link rel="prefetch" href="/assets/js/563.a34a68ea.js"><link rel="prefetch" href="/assets/js/564.6da92e18.js"><link rel="prefetch" href="/assets/js/565.01d288e5.js"><link rel="prefetch" href="/assets/js/566.6a3459a1.js"><link rel="prefetch" href="/assets/js/567.e3eb8e54.js"><link rel="prefetch" href="/assets/js/568.f95e0fba.js"><link rel="prefetch" href="/assets/js/569.a42d134c.js"><link rel="prefetch" href="/assets/js/57.25e8dd1c.js"><link rel="prefetch" href="/assets/js/570.87887d15.js"><link rel="prefetch" href="/assets/js/571.ce4b478b.js"><link rel="prefetch" href="/assets/js/572.634418a6.js"><link rel="prefetch" href="/assets/js/573.cd4cf02b.js"><link rel="prefetch" href="/assets/js/574.8bf073fa.js"><link rel="prefetch" href="/assets/js/575.c194dddb.js"><link rel="prefetch" href="/assets/js/576.7750193f.js"><link rel="prefetch" href="/assets/js/577.5daa388a.js"><link rel="prefetch" href="/assets/js/578.54bb0029.js"><link rel="prefetch" href="/assets/js/579.92f58c76.js"><link rel="prefetch" href="/assets/js/58.9c1eb9e5.js"><link rel="prefetch" href="/assets/js/580.0e543efb.js"><link rel="prefetch" href="/assets/js/581.4e0b0b47.js"><link rel="prefetch" href="/assets/js/582.8c172f83.js"><link rel="prefetch" href="/assets/js/583.c91c43e0.js"><link rel="prefetch" href="/assets/js/584.ca68d52b.js"><link rel="prefetch" href="/assets/js/585.663b17d3.js"><link rel="prefetch" href="/assets/js/586.9494847d.js"><link rel="prefetch" href="/assets/js/587.f3805773.js"><link rel="prefetch" href="/assets/js/588.8ae14be1.js"><link rel="prefetch" href="/assets/js/589.b4af88be.js"><link rel="prefetch" href="/assets/js/59.2a730e41.js"><link rel="prefetch" href="/assets/js/590.fb77fea8.js"><link rel="prefetch" href="/assets/js/591.a3aaa57c.js"><link rel="prefetch" href="/assets/js/592.54ec5f32.js"><link rel="prefetch" href="/assets/js/593.96eab5cb.js"><link rel="prefetch" href="/assets/js/594.e356725c.js"><link rel="prefetch" href="/assets/js/595.0a2c4ad4.js"><link rel="prefetch" href="/assets/js/596.2c075cd8.js"><link rel="prefetch" href="/assets/js/597.e904811b.js"><link rel="prefetch" href="/assets/js/598.f6ca8b71.js"><link rel="prefetch" href="/assets/js/599.ae3d12c4.js"><link rel="prefetch" href="/assets/js/6.451e012f.js"><link rel="prefetch" href="/assets/js/60.e6b60343.js"><link rel="prefetch" href="/assets/js/600.e71a0062.js"><link rel="prefetch" href="/assets/js/601.2571a19d.js"><link rel="prefetch" href="/assets/js/602.0f4fa961.js"><link rel="prefetch" href="/assets/js/603.d8387c37.js"><link rel="prefetch" href="/assets/js/604.69433906.js"><link rel="prefetch" href="/assets/js/605.1bc7d87a.js"><link rel="prefetch" href="/assets/js/606.ec419517.js"><link rel="prefetch" href="/assets/js/607.b473fb0b.js"><link rel="prefetch" href="/assets/js/608.a361b48c.js"><link rel="prefetch" href="/assets/js/609.9186f226.js"><link rel="prefetch" href="/assets/js/61.d50a156d.js"><link rel="prefetch" href="/assets/js/610.ff3cf241.js"><link rel="prefetch" href="/assets/js/611.c3c7e648.js"><link rel="prefetch" href="/assets/js/612.2a520ebd.js"><link rel="prefetch" href="/assets/js/613.42936ffc.js"><link rel="prefetch" href="/assets/js/614.3ca0de21.js"><link rel="prefetch" href="/assets/js/615.ecf60a47.js"><link rel="prefetch" href="/assets/js/616.17185e83.js"><link rel="prefetch" href="/assets/js/617.769d4cdf.js"><link rel="prefetch" href="/assets/js/618.015c6376.js"><link rel="prefetch" href="/assets/js/619.3af186d0.js"><link rel="prefetch" href="/assets/js/62.e24b7811.js"><link rel="prefetch" href="/assets/js/620.f8ff3784.js"><link rel="prefetch" href="/assets/js/621.4c21311f.js"><link rel="prefetch" href="/assets/js/622.355178df.js"><link rel="prefetch" href="/assets/js/623.45a30695.js"><link rel="prefetch" href="/assets/js/624.61e89d34.js"><link rel="prefetch" href="/assets/js/625.49e0d1ce.js"><link rel="prefetch" href="/assets/js/626.1b7ae767.js"><link rel="prefetch" href="/assets/js/627.b8c507cf.js"><link rel="prefetch" href="/assets/js/628.c5a43517.js"><link rel="prefetch" href="/assets/js/629.274eb0fd.js"><link rel="prefetch" href="/assets/js/63.b804baab.js"><link rel="prefetch" href="/assets/js/630.69e055ce.js"><link rel="prefetch" href="/assets/js/631.0892fc51.js"><link rel="prefetch" href="/assets/js/632.6a68e9a2.js"><link rel="prefetch" href="/assets/js/633.d536fe74.js"><link rel="prefetch" href="/assets/js/634.24695f39.js"><link rel="prefetch" href="/assets/js/635.3aeede9c.js"><link rel="prefetch" href="/assets/js/636.3628d8a6.js"><link rel="prefetch" href="/assets/js/637.40af5a79.js"><link rel="prefetch" href="/assets/js/638.15e257ae.js"><link rel="prefetch" href="/assets/js/639.31e6597c.js"><link rel="prefetch" href="/assets/js/64.eb5699ff.js"><link rel="prefetch" href="/assets/js/640.a071f6df.js"><link rel="prefetch" href="/assets/js/641.f9edd7bf.js"><link rel="prefetch" href="/assets/js/642.adcb583f.js"><link rel="prefetch" href="/assets/js/643.7c98a990.js"><link rel="prefetch" href="/assets/js/644.fb1213d8.js"><link rel="prefetch" href="/assets/js/645.220a5034.js"><link rel="prefetch" href="/assets/js/646.d66a419b.js"><link rel="prefetch" href="/assets/js/647.12ef89ab.js"><link rel="prefetch" href="/assets/js/648.a3112300.js"><link rel="prefetch" href="/assets/js/649.f457dfa5.js"><link rel="prefetch" href="/assets/js/65.0d8501b5.js"><link rel="prefetch" href="/assets/js/650.cc63d03b.js"><link rel="prefetch" href="/assets/js/651.16d1bbd6.js"><link rel="prefetch" href="/assets/js/652.0f5343f0.js"><link rel="prefetch" href="/assets/js/653.28f7710a.js"><link rel="prefetch" href="/assets/js/654.b343d473.js"><link rel="prefetch" href="/assets/js/655.215fe67b.js"><link rel="prefetch" href="/assets/js/656.79aa1653.js"><link rel="prefetch" href="/assets/js/657.c57f2b5c.js"><link rel="prefetch" href="/assets/js/658.d0aa0b95.js"><link rel="prefetch" href="/assets/js/659.2dfaed93.js"><link rel="prefetch" href="/assets/js/66.8361cc16.js"><link rel="prefetch" href="/assets/js/660.c00b347e.js"><link rel="prefetch" href="/assets/js/661.ecc4f968.js"><link rel="prefetch" href="/assets/js/662.06f83919.js"><link rel="prefetch" href="/assets/js/663.67d8849e.js"><link rel="prefetch" href="/assets/js/664.74dba1a9.js"><link rel="prefetch" href="/assets/js/665.28b450f0.js"><link rel="prefetch" href="/assets/js/666.0f4bb6ba.js"><link rel="prefetch" href="/assets/js/667.586074e3.js"><link rel="prefetch" href="/assets/js/668.b13c0e70.js"><link rel="prefetch" href="/assets/js/669.9d0d4cbc.js"><link rel="prefetch" href="/assets/js/67.37f46ba2.js"><link rel="prefetch" href="/assets/js/670.6b36ca72.js"><link rel="prefetch" href="/assets/js/671.33b2e754.js"><link rel="prefetch" href="/assets/js/672.3b02c287.js"><link rel="prefetch" href="/assets/js/673.3f274929.js"><link rel="prefetch" href="/assets/js/674.7d75584f.js"><link rel="prefetch" href="/assets/js/675.0de52334.js"><link rel="prefetch" href="/assets/js/676.6734133e.js"><link rel="prefetch" href="/assets/js/677.c6f4a973.js"><link rel="prefetch" href="/assets/js/678.1344b6be.js"><link rel="prefetch" href="/assets/js/679.23fed56f.js"><link rel="prefetch" href="/assets/js/68.27dbce5b.js"><link rel="prefetch" href="/assets/js/680.c49329d6.js"><link rel="prefetch" href="/assets/js/681.8df66615.js"><link rel="prefetch" href="/assets/js/682.77b4bff8.js"><link rel="prefetch" href="/assets/js/683.6cf41cf4.js"><link rel="prefetch" href="/assets/js/684.58deecd5.js"><link rel="prefetch" href="/assets/js/685.d2f7480e.js"><link rel="prefetch" href="/assets/js/686.0b77a241.js"><link rel="prefetch" href="/assets/js/687.2cc04b4f.js"><link rel="prefetch" href="/assets/js/688.da24cbae.js"><link rel="prefetch" href="/assets/js/689.a9961f74.js"><link rel="prefetch" href="/assets/js/69.8052a977.js"><link rel="prefetch" href="/assets/js/690.cb736269.js"><link rel="prefetch" href="/assets/js/691.21c13be1.js"><link rel="prefetch" href="/assets/js/692.3ed557d0.js"><link rel="prefetch" href="/assets/js/693.066efe93.js"><link rel="prefetch" href="/assets/js/694.5368f98a.js"><link rel="prefetch" href="/assets/js/695.4fdb93d5.js"><link rel="prefetch" href="/assets/js/696.9c055ac6.js"><link rel="prefetch" href="/assets/js/697.51e0c47c.js"><link rel="prefetch" href="/assets/js/698.08ca1dbd.js"><link rel="prefetch" href="/assets/js/699.ce7e9e2a.js"><link rel="prefetch" href="/assets/js/7.7e21c947.js"><link rel="prefetch" href="/assets/js/70.19faeb78.js"><link rel="prefetch" href="/assets/js/700.3676fa7f.js"><link rel="prefetch" href="/assets/js/701.82db4887.js"><link rel="prefetch" href="/assets/js/702.73425f22.js"><link rel="prefetch" href="/assets/js/703.d9391c74.js"><link rel="prefetch" href="/assets/js/704.d6e275cf.js"><link rel="prefetch" href="/assets/js/705.d2f23969.js"><link rel="prefetch" href="/assets/js/706.1c66dcc1.js"><link rel="prefetch" href="/assets/js/707.0fc5a26a.js"><link rel="prefetch" href="/assets/js/708.97471ee6.js"><link rel="prefetch" href="/assets/js/709.9b4d5665.js"><link rel="prefetch" href="/assets/js/71.d1683810.js"><link rel="prefetch" href="/assets/js/710.75fa8103.js"><link rel="prefetch" href="/assets/js/711.43777b40.js"><link rel="prefetch" href="/assets/js/712.5c583e39.js"><link rel="prefetch" href="/assets/js/713.5aa72111.js"><link rel="prefetch" href="/assets/js/714.e8215702.js"><link rel="prefetch" href="/assets/js/715.46614e7c.js"><link rel="prefetch" href="/assets/js/716.eaac6d69.js"><link rel="prefetch" href="/assets/js/717.c344c042.js"><link rel="prefetch" href="/assets/js/718.437bf0b2.js"><link rel="prefetch" href="/assets/js/719.23aa3deb.js"><link rel="prefetch" href="/assets/js/720.9456a449.js"><link rel="prefetch" href="/assets/js/721.67fd324a.js"><link rel="prefetch" href="/assets/js/722.fc5e79ca.js"><link rel="prefetch" href="/assets/js/723.46db8115.js"><link rel="prefetch" href="/assets/js/724.31a11b8c.js"><link rel="prefetch" href="/assets/js/725.49cef603.js"><link rel="prefetch" href="/assets/js/726.7d0a2e7f.js"><link rel="prefetch" href="/assets/js/727.a1de6f02.js"><link rel="prefetch" href="/assets/js/728.7e0a727e.js"><link rel="prefetch" href="/assets/js/729.b6bf04fa.js"><link rel="prefetch" href="/assets/js/73.1ac0ac37.js"><link rel="prefetch" href="/assets/js/730.1c102528.js"><link rel="prefetch" href="/assets/js/731.80403e3d.js"><link rel="prefetch" href="/assets/js/732.cf8b4a6d.js"><link rel="prefetch" href="/assets/js/733.aab88d38.js"><link rel="prefetch" href="/assets/js/734.965a0adc.js"><link rel="prefetch" href="/assets/js/735.f9d33608.js"><link rel="prefetch" href="/assets/js/736.d1621f9e.js"><link rel="prefetch" href="/assets/js/737.a12ea0d3.js"><link rel="prefetch" href="/assets/js/738.96e61512.js"><link rel="prefetch" href="/assets/js/739.9bce4dfe.js"><link rel="prefetch" href="/assets/js/74.1913daec.js"><link rel="prefetch" href="/assets/js/740.c1a0bf7b.js"><link rel="prefetch" href="/assets/js/741.0185115e.js"><link rel="prefetch" href="/assets/js/742.21e99d78.js"><link rel="prefetch" href="/assets/js/743.e5f2407e.js"><link rel="prefetch" href="/assets/js/744.53d4e25a.js"><link rel="prefetch" href="/assets/js/745.9fb6722c.js"><link rel="prefetch" href="/assets/js/746.893e3a2f.js"><link rel="prefetch" href="/assets/js/747.ad94fed4.js"><link rel="prefetch" href="/assets/js/748.3421b09b.js"><link rel="prefetch" href="/assets/js/749.15c364e9.js"><link rel="prefetch" href="/assets/js/75.d63a9540.js"><link rel="prefetch" href="/assets/js/750.4e5379b7.js"><link rel="prefetch" href="/assets/js/751.18b0273f.js"><link rel="prefetch" href="/assets/js/752.24717596.js"><link rel="prefetch" href="/assets/js/753.5868bcc4.js"><link rel="prefetch" href="/assets/js/754.77808a6c.js"><link rel="prefetch" href="/assets/js/755.af7f7a71.js"><link rel="prefetch" href="/assets/js/76.342d837c.js"><link rel="prefetch" href="/assets/js/77.466349c3.js"><link rel="prefetch" href="/assets/js/78.886d05b6.js"><link rel="prefetch" href="/assets/js/79.b478bdab.js"><link rel="prefetch" href="/assets/js/8.9f40767d.js"><link rel="prefetch" href="/assets/js/80.9205cc43.js"><link rel="prefetch" href="/assets/js/81.77f831c9.js"><link rel="prefetch" href="/assets/js/82.650475d1.js"><link rel="prefetch" href="/assets/js/83.aa7e3d4b.js"><link rel="prefetch" href="/assets/js/84.2fc92fb4.js"><link rel="prefetch" href="/assets/js/85.0f633e10.js"><link rel="prefetch" href="/assets/js/86.e862f4bc.js"><link rel="prefetch" href="/assets/js/87.8a869468.js"><link rel="prefetch" href="/assets/js/88.6c584051.js"><link rel="prefetch" href="/assets/js/89.3ab84e02.js"><link rel="prefetch" href="/assets/js/9.7ed864ce.js"><link rel="prefetch" href="/assets/js/90.41e6925d.js"><link rel="prefetch" href="/assets/js/91.55055993.js"><link rel="prefetch" href="/assets/js/92.ced7b439.js"><link rel="prefetch" href="/assets/js/93.41cc8a7f.js"><link rel="prefetch" href="/assets/js/94.6d2b144f.js"><link rel="prefetch" href="/assets/js/95.399a7909.js"><link rel="prefetch" href="/assets/js/96.556f8f9f.js"><link rel="prefetch" href="/assets/js/97.47ecdf46.js"><link rel="prefetch" href="/assets/js/98.fdbe6822.js"><link rel="prefetch" href="/assets/js/99.db8442e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ece31e0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Fanx 知识库" class="logo"> <span class="site-name can-hide">Fanx 知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>集合框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java多线程与并发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f2d7db/" class="sidebar-link">Java并发知识体系详解</a></li><li><a href="/pages/e49d07/" class="sidebar-link">Java 并发 - 理论基础</a></li><li><a href="/pages/0e4c2e/" class="sidebar-link">Java 并发 - 线程基础</a></li><li><a href="/pages/03aac1/" class="sidebar-link">Java并发 - Java中所有的锁</a></li><li><a href="/pages/b1fa07/" class="sidebar-link">关键字-synchronized详解</a></li><li><a href="/pages/e8097b/" class="sidebar-link">关键字-volatile详解</a></li><li><a href="/pages/44d29e/" class="sidebar-link">关键字-final详解</a></li><li><a href="/pages/52b863/" class="sidebar-link">JUC - 类汇总和学习指南</a></li><li><a href="/pages/60879f/" class="sidebar-link">JUC原子类-CAS, Unsafe和原子类详解</a></li><li><a href="/pages/3f52bd/" class="sidebar-link">JUC锁-LockSupport详解</a></li><li><a href="/pages/620379/" class="sidebar-link">JUC锁-锁核心类AQS详解</a></li><li><a href="/pages/e5e4ff/" class="sidebar-link">JUC锁-ReentrantLock详解</a></li><li><a href="/pages/926698/" class="sidebar-link">JUC锁-ReentrantReadWriteLock详解</a></li><li><a href="/pages/e33954/" class="sidebar-link">JUC集合-ConcurrentHashMap详解</a></li><li><a href="/pages/ccc6d9/" class="sidebar-link">JUC集合-CopyOnWriteArrayList详解</a></li><li><a href="/pages/3e2c89/" class="sidebar-link">JUC集合-ConcurrentLinkedQueue详解</a></li><li><a href="/pages/24b41a/" class="sidebar-link">JUC集合-BlockingQueue详解</a></li><li><a href="/pages/bcf3da/" class="sidebar-link">JUC线程池-FutureTask详解</a></li><li><a href="/pages/1fce0f/" class="sidebar-link">JUC线程池-ThreadPoolExecutor详解</a></li><li><a href="/pages/85bf53/" class="sidebar-link">JUC线程池-ScheduledThreadPoolExecutor详解</a></li><li><a href="/pages/688f62/" class="sidebar-link">JUC线程池-ForkJoin框架详解</a></li><li><a href="/pages/ee399a/" class="sidebar-link">JUC工具类-CountDownLatch详解</a></li><li><a href="/pages/cf70b6/" class="sidebar-link">JUC工具类-CyclicBarrier详解</a></li><li><a href="/pages/725172/" aria-current="page" class="active sidebar-link">JUC工具类-Semaphore详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/725172/#juc工具类-semaphore详解" class="sidebar-link">JUC工具类: Semaphore详解</a></li><li class="sidebar-sub-header level2"><a href="/pages/725172/#带着bat大厂的面试问题去理解" class="sidebar-link">带着BAT大厂的面试问题去理解</a></li><li class="sidebar-sub-header level2"><a href="/pages/725172/#semaphore源码分析" class="sidebar-link">Semaphore源码分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的继承关系" class="sidebar-link">类的继承关系</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的内部类" class="sidebar-link">类的内部类</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的内部类-sync类" class="sidebar-link">类的内部类 - Sync类</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的内部类-nonfairsync类" class="sidebar-link">类的内部类 - NonfairSync类</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的内部类-fairsync类" class="sidebar-link">类的内部类 - FairSync类</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的属性" class="sidebar-link">类的属性</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#类的构造函数" class="sidebar-link">类的构造函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#核心函数分析-acquire函数" class="sidebar-link">核心函数分析 - acquire函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#核心函数分析-release函数" class="sidebar-link">核心函数分析 - release函数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/725172/#semaphore示例" class="sidebar-link">Semaphore示例</a></li><li class="sidebar-sub-header level2"><a href="/pages/725172/#更深入理解" class="sidebar-link">更深入理解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/725172/#单独使用semaphore是不会使用到aqs的条件队列的" class="sidebar-link">单独使用Semaphore是不会使用到AQS的条件队列的</a></li><li class="sidebar-sub-header level3"><a href="/pages/725172/#场景问题" class="sidebar-link">场景问题</a></li><li class="sidebar-sub-header level4"><a href="/pages/725172/#semaphore初始化有10个令牌-11个线程同时各调用1次acquire方法-会发生什么" class="sidebar-link">semaphore初始化有10个令牌，11个线程同时各调用1次acquire方法，会发生什么?</a></li><li class="sidebar-sub-header level4"><a href="/pages/725172/#semaphore初始化有10个令牌-一个线程重复调用11次acquire方法-会发生什么" class="sidebar-link">semaphore初始化有10个令牌，一个线程重复调用11次acquire方法，会发生什么?</a></li><li class="sidebar-sub-header level4"><a href="/pages/725172/#semaphore初始化有1个令牌-1个线程调用一次acquire方法-然后调用两次release方法-之后另外一个线程调用acquire-2-方法-此线程能够获取到足够的令牌并继续运行吗" class="sidebar-link">semaphore初始化有1个令牌，1个线程调用一次acquire方法，然后调用两次release方法，之后另外一个线程调用acquire(2)方法，此线程能够获取到足够的令牌并继续运行吗?</a></li><li class="sidebar-sub-header level4"><a href="/pages/725172/#semaphore初始化有2个令牌-一个线程调用1次release方法-然后一次性获取3个令牌-会获取到吗" class="sidebar-link">semaphore初始化有2个令牌，一个线程调用1次release方法，然后一次性获取3个令牌，会获取到吗?</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/725172/#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/pages/9e2bd7/" class="sidebar-link">JUC工具类-Phaser详解</a></li><li><a href="/pages/0baf76/" class="sidebar-link">JUC工具类-Exchanger详解</a></li><li><a href="/pages/d277df/" class="sidebar-link">Java 并发 - ThreadLocal详解</a></li><li><a href="/pages/b23a10/" class="sidebar-link">多线程问题总结</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java IO-NIO-AIO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java8 特性详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java8各版本特性概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java其它相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/web/#Java" data-v-06225672>Java</a></li><li data-v-06225672><a href="/web/#Java多线程与并发" data-v-06225672>Java多线程与并发</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/FanXGit" target="_blank" title="作者" class="beLink" data-v-06225672>fanx</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-07-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">JUC工具类-Semaphore详解<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="juc工具类-semaphore详解"><a href="#juc工具类-semaphore详解" class="header-anchor">#</a> JUC工具类: Semaphore详解</h2> <p>============================================</p> <blockquote><p>Semaphore底层是基于AbstractQueuedSynchronizer来实现的。Semaphore称为计数信号量，它允许n个任务同时访问某个资源，可以将信号量看做是在向外分发使用资源的许可证，只有成功获取许可证，才能使用资源。@pdai</p></blockquote> <ul><li><a href="#juc%E5%B7%A5%E5%85%B7%E7%B1%BB-semaphore%E8%AF%A6%E8%A7%A3">JUC工具类: Semaphore详解</a> <ul><li><a href="#%E5%B8%A6%E7%9D%80bat%E5%A4%A7%E5%8E%82%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%8E%BB%E7%90%86%E8%A7%A3">带着BAT大厂的面试问题去理解</a></li> <li><a href="#semaphore%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">Semaphore源码分析</a> <ul><li><a href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB">类的继承关系</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB">类的内部类</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB---sync%E7%B1%BB">类的内部类 - Sync类</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB---nonfairsync%E7%B1%BB">类的内部类 - NonfairSync类</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E5%86%85%E9%83%A8%E7%B1%BB---fairsync%E7%B1%BB">类的内部类 - FairSync类</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E5%B1%9E%E6%80%A7">类的属性</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">类的构造函数</a></li> <li><a href="#%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0%E5%88%86%E6%9E%90---acquire%E5%87%BD%E6%95%B0">核心函数分析 - acquire函数</a></li> <li><a href="#%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0%E5%88%86%E6%9E%90---release%E5%87%BD%E6%95%B0">核心函数分析 - release函数</a></li></ul></li> <li><a href="#semaphore%E7%A4%BA%E4%BE%8B">Semaphore示例</a></li> <li><a href="#%E6%9B%B4%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3">更深入理解</a> <ul><li><a href="#%E5%8D%95%E7%8B%AC%E4%BD%BF%E7%94%A8semaphore%E6%98%AF%E4%B8%8D%E4%BC%9A%E4%BD%BF%E7%94%A8%E5%88%B0aqs%E7%9A%84%E6%9D%A1%E4%BB%B6%E9%98%9F%E5%88%97%E7%9A%84">单独使用Semaphore是不会使用到AQS的条件队列的</a></li> <li><a href="#%E5%9C%BA%E6%99%AF%E9%97%AE%E9%A2%98">场景问题</a> <ul><li><a href="#semaphore%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9C%8910%E4%B8%AA%E4%BB%A4%E7%89%8C11%E4%B8%AA%E7%BA%BF%E7%A8%8B%E5%90%8C%E6%97%B6%E5%90%84%E8%B0%83%E7%94%A81%E6%AC%A1acquire%E6%96%B9%E6%B3%95%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88">semaphore初始化有10个令牌，11个线程同时各调用1次acquire方法，会发生什么?</a></li> <li><a href="#semaphore%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9C%8910%E4%B8%AA%E4%BB%A4%E7%89%8C%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E9%87%8D%E5%A4%8D%E8%B0%83%E7%94%A811%E6%AC%A1acquire%E6%96%B9%E6%B3%95%E4%BC%9A%E5%8F%91%E7%94%9F%E4%BB%80%E4%B9%88">semaphore初始化有10个令牌，一个线程重复调用11次acquire方法，会发生什么?</a></li> <li><a href="#semaphore%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9C%891%E4%B8%AA%E4%BB%A4%E7%89%8C1%E4%B8%AA%E7%BA%BF%E7%A8%8B%E8%B0%83%E7%94%A8%E4%B8%80%E6%AC%A1acquire%E6%96%B9%E6%B3%95%E7%84%B6%E5%90%8E%E8%B0%83%E7%94%A8%E4%B8%A4%E6%AC%A1release%E6%96%B9%E6%B3%95%E4%B9%8B%E5%90%8E%E5%8F%A6%E5%A4%96%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E8%B0%83%E7%94%A8acquire2%E6%96%B9%E6%B3%95%E6%AD%A4%E7%BA%BF%E7%A8%8B%E8%83%BD%E5%A4%9F%E8%8E%B7%E5%8F%96%E5%88%B0%E8%B6%B3%E5%A4%9F%E7%9A%84%E4%BB%A4%E7%89%8C%E5%B9%B6%E7%BB%A7%E7%BB%AD%E8%BF%90%E8%A1%8C%E5%90%97">semaphore初始化有1个令牌，1个线程调用一次acquire方法，然后调用两次release方法，之后另外一个线程调用acquire(2)方法，此线程能够获取到足够的令牌并继续运行吗?</a></li> <li><a href="#semaphore%E5%88%9D%E5%A7%8B%E5%8C%96%E6%9C%892%E4%B8%AA%E4%BB%A4%E7%89%8C%E4%B8%80%E4%B8%AA%E7%BA%BF%E7%A8%8B%E8%B0%83%E7%94%A81%E6%AC%A1release%E6%96%B9%E6%B3%95%E7%84%B6%E5%90%8E%E4%B8%80%E6%AC%A1%E6%80%A7%E8%8E%B7%E5%8F%963%E4%B8%AA%E4%BB%A4%E7%89%8C%E4%BC%9A%E8%8E%B7%E5%8F%96%E5%88%B0%E5%90%97">semaphore初始化有2个令牌，一个线程调用1次release方法，然后一次性获取3个令牌，会获取到吗?</a></li></ul></li></ul></li> <li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">参考文章</a></li></ul></li></ul> <h2 id="带着bat大厂的面试问题去理解"><a href="#带着bat大厂的面试问题去理解" class="header-anchor">#</a> 带着BAT大厂的面试问题去理解</h2> <hr> <p>提示</p> <p>请带着这些问题继续后文，会很大程度上帮助你更好的理解相关知识点。@pdai</p> <ul><li>什么是Semaphore?</li> <li>Semaphore内部原理?</li> <li>Semaphore常用方法有哪些? 如何实现线程同步和互斥的?</li> <li>Semaphore适合用在什么场景?</li> <li>单独使用Semaphore是不会使用到AQS的条件队列?</li> <li>Semaphore中申请令牌(acquire)、释放令牌(release)的实现?</li> <li>Semaphore初始化有10个令牌，11个线程同时各调用1次acquire方法，会发生什么?</li> <li>Semaphore初始化有10个令牌，一个线程重复调用11次acquire方法，会发生什么?</li> <li>Semaphore初始化有1个令牌，1个线程调用一次acquire方法，然后调用两次release方法，之后另外一个线程调用acquire(2)方法，此线程能够获取到足够的令牌并继续运行吗?</li> <li>Semaphore初始化有2个令牌，一个线程调用1次release方法，然后一次性获取3个令牌，会获取到吗?</li></ul> <h2 id="semaphore源码分析"><a href="#semaphore源码分析" class="header-anchor">#</a> Semaphore源码分析</h2> <hr> <h3 id="类的继承关系"><a href="#类的继承关系" class="header-anchor">#</a> 类的继承关系</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class Semaphore implements java.io.Serializable {} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>说明: Semaphore实现了Serializable接口，即可以进行序列化。</p> <h3 id="类的内部类"><a href="#类的内部类" class="header-anchor">#</a> 类的内部类</h3> <p>Semaphore总共有三个内部类，并且三个内部类是紧密相关的，下面先看三个类的关系。</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>说明: Semaphore与ReentrantLock的内部类的结构相同，类内部总共存在Sync、NonfairSync、FairSync三个类，NonfairSync与FairSync类继承自Sync类，Sync类继承自AbstractQueuedSynchronizer抽象类。下面逐个进行分析。</p> <h3 id="类的内部类-sync类"><a href="#类的内部类-sync类" class="header-anchor">#</a> 类的内部类 - Sync类</h3> <p>Sync类的源码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>// 内部类，继承自AQS
abstract static class Sync extends AbstractQueuedSynchronizer {
    // 版本号
    private static final long serialVersionUID = 1192457210091910933L;
    
    // 构造函数
    Sync(int permits) {
        // 设置状态数
        setState(permits);
    }
    
    // 获取许可
    final int getPermits() {
        return getState();
    }

    // 共享模式下非公平策略获取
    final int nonfairTryAcquireShared(int acquires) {
        for (;;) { // 无限循环
            // 获取许可数
            int available = getState();
            // 剩余的许可
            int remaining = available - acquires;
            if (remaining &lt; 0 ||
                compareAndSetState(available, remaining)) // 许可小于0或者比较并且设置状态成功
                return remaining;
        }
    }
    
    // 共享模式下进行释放
    protected final boolean tryReleaseShared(int releases) {
        for (;;) { // 无限循环
            // 获取许可
            int current = getState();
            // 可用的许可
            int next = current + releases;
            if (next &lt; current) // overflow
                throw new Error(&quot;Maximum permit count exceeded&quot;);
            if (compareAndSetState(current, next)) // 比较并进行设置成功
                return true;
        }
    }

    // 根据指定的缩减量减小可用许可的数目
    final void reducePermits(int reductions) {
        for (;;) { // 无限循环
            // 获取许可
            int current = getState();
            // 可用的许可
            int next = current - reductions;
            if (next &gt; current) // underflow
                throw new Error(&quot;Permit count underflow&quot;);
            if (compareAndSetState(current, next)) // 比较并进行设置成功
                return;
        }
    }

    // 获取并返回立即可用的所有许可
    final int drainPermits() {
        for (;;) { // 无限循环
            // 获取许可
            int current = getState();
            if (current == 0 || compareAndSetState(current, 0)) // 许可为0或者比较并设置成功
                return current;
        }
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br></div></div><p>说明: Sync类的属性相对简单，只有一个版本号，Sync类存在如下方法和作用如下。</p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="类的内部类-nonfairsync类"><a href="#类的内部类-nonfairsync类" class="header-anchor">#</a> 类的内部类 - NonfairSync类</h3> <p>NonfairSync类继承了Sync类，表示采用非公平策略获取资源，其只有一个tryAcquireShared方法，重写了AQS的该方法，其源码如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>static final class NonfairSync extends Sync {
    // 版本号
    private static final long serialVersionUID = -2694183684443567898L;
    
    // 构造函数
    NonfairSync(int permits) {
        super(permits);
    }
    // 共享模式下获取
    protected int tryAcquireShared(int acquires) {
        return nonfairTryAcquireShared(acquires);
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>说明: 从tryAcquireShared方法的源码可知，其会调用父类Sync的nonfairTryAcquireShared方法，表示按照非公平策略进行资源的获取。</p> <h3 id="类的内部类-fairsync类"><a href="#类的内部类-fairsync类" class="header-anchor">#</a> 类的内部类 - FairSync类</h3> <p>FairSync类继承了Sync类，表示采用公平策略获取资源，其只有一个tryAcquireShared方法，重写了AQS的该方法，其源码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>protected int tryAcquireShared(int acquires) {
    for (;;) { // 无限循环
        if (hasQueuedPredecessors()) // 同步队列中存在其他节点
            return -1;
        // 获取许可
        int available = getState();
        // 剩余的许可
        int remaining = available - acquires;
        if (remaining &lt; 0 ||
            compareAndSetState(available, remaining)) // 剩余的许可小于0或者比较设置成功
            return remaining;
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>说明: 从tryAcquireShared方法的源码可知，它使用公平策略来获取资源，它会判断同步队列中是否存在其他的等待节点。</p> <h3 id="类的属性"><a href="#类的属性" class="header-anchor">#</a> 类的属性</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class Semaphore implements java.io.Serializable {
    // 版本号
    private static final long serialVersionUID = -3222578661600680210L;
    // 属性
    private final Sync sync;
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>说明: Semaphore自身只有两个属性，最重要的是sync属性，基于Semaphore对象的操作绝大多数都转移到了对sync的操作。</p> <h3 id="类的构造函数"><a href="#类的构造函数" class="header-anchor">#</a> 类的构造函数</h3> <ul><li>Semaphore(int)型构造函数</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public Semaphore(int permits) {
    sync = new NonfairSync(permits);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>说明: 该构造函数会创建具有给定的许可数和非公平的公平设置的Semaphore。</p> <ul><li>Semaphore(int, boolean)型构造函数</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public Semaphore(int permits, boolean fair) {
    sync = fair ? new FairSync(permits) : new NonfairSync(permits);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>说明: 该构造函数会创建具有给定的许可数和给定的公平设置的Semaphore。</p> <h3 id="核心函数分析-acquire函数"><a href="#核心函数分析-acquire函数" class="header-anchor">#</a> 核心函数分析 - acquire函数</h3> <p>此方法从信号量获取一个(多个)许可，在提供一个许可前一直将线程阻塞，或者线程被中断，其源码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void acquire() throws InterruptedException {
    sync.acquireSharedInterruptibly(1);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>说明: 该方法中将会调用Sync对象的acquireSharedInterruptibly(从AQS继承而来的方法)方法，而acquireSharedInterruptibly方法在上一篇CountDownLatch中已经进行了分析，在此不再累赘。</p> <p>最终可以获取大致的方法调用序列(假设使用非公平策略)。如下图所示。</p> <p><img src="/assets/img/thread_java-thread-x-semaphore-3.e2ef63e3.png" alt=""></p> <p>说明: 上图只是给出了大体会调用到的方法，和具体的示例可能会有些差别，之后会根据具体的示例进行分析。</p> <h3 id="核心函数分析-release函数"><a href="#核心函数分析-release函数" class="header-anchor">#</a> 核心函数分析 - release函数</h3> <p>此方法释放一个(多个)许可，将其返回给信号量，源码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public void release() {
    sync.releaseShared(1);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>说明: 该方法中将会调用Sync对象的releaseShared(从AQS继承而来的方法)方法，而releaseShared方法在上一篇CountDownLatch中已经进行了分析，在此不再累赘。</p> <p>最终可以获取大致的方法调用序列(假设使用非公平策略)。如下图所示:</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>说明: 上图只是给出了大体会调用到的方法，和具体的示例可能会有些差别，之后会根据具体的示例进行分析。</p> <h2 id="semaphore示例"><a href="#semaphore示例" class="header-anchor">#</a> Semaphore示例</h2> <hr> <p>下面给出了一个使用Semaphore的示例。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import java.util.concurrent.Semaphore;

class MyThread extends Thread {
    private Semaphore semaphore;
    
    public MyThread(String name, Semaphore semaphore) {
        super(name);
        this.semaphore = semaphore;
    }
    
    public void run() {        
        int count = 3;
        System.out.println(Thread.currentThread().getName() + &quot; trying to acquire&quot;);
        try {
            semaphore.acquire(count);
            System.out.println(Thread.currentThread().getName() + &quot; acquire successfully&quot;);
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            semaphore.release(count);
            System.out.println(Thread.currentThread().getName() + &quot; release successfully&quot;);
        }
    }
}

public class SemaphoreDemo {
    public final static int SEM_SIZE = 10;
    
    public static void main(String[] args) {
        Semaphore semaphore = new Semaphore(SEM_SIZE);
        MyThread t1 = new MyThread(&quot;t1&quot;, semaphore);
        MyThread t2 = new MyThread(&quot;t2&quot;, semaphore);
        t1.start();
        t2.start();
        int permits = 5;
        System.out.println(Thread.currentThread().getName() + &quot; trying to acquire&quot;);
        try {
            semaphore.acquire(permits);
            System.out.println(Thread.currentThread().getName() + &quot; acquire successfully&quot;);
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        } finally {
            semaphore.release();
            System.out.println(Thread.currentThread().getName() + &quot; release successfully&quot;);
        }      
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br></div></div><p>运行结果(某一次):</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>main trying to acquire
main acquire successfully
t1 trying to acquire
t1 acquire successfully
t2 trying to acquire
t1 release successfully
main release successfully
t2 acquire successfully
t2 release successfully 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>说明: 首先，生成一个信号量，信号量有10个许可，然后，main，t1，t2三个线程获取许可运行，根据结果，可能存在如下的一种时序。</p> <p><img src="/assets/img/thread_java-thread-x-semaphore-5.b08b9bd1.png" alt=""></p> <p>说明: 如上图所示，首先，main线程执行acquire操作，并且成功获得许可，之后t1线程执行acquire操作，成功获得许可，之后t2执行acquire操作，由于此时许可数量不够，t2线程将会阻塞，直到许可可用。之后t1线程释放许可，main线程释放许可，此时的许可数量可以满足t2线程的要求，所以，此时t2线程会成功获得许可运行，t2运行完成后释放许可。下面进行详细分析。</p> <ul><li>main线程执行semaphore.acquire操作。主要的函数调用如下图所示。</li></ul> <p><img src="data:image/png;base64,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" alt=""></p> <p>说明: 此时，可以看到只是AQS的state变为了5，main线程并没有被阻塞，可以继续运行。</p> <ul><li>t1线程执行semaphore.acquire操作。主要的函数调用如下图所示。</li></ul> <p><img src="data:image/png;base64,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" alt=""></p> <p>说明: 此时，可以看到只是AQS的state变为了2，t1线程并没有被阻塞，可以继续运行。</p> <ul><li>t2线程执行semaphore.acquire操作。主要的函数调用如下图所示。</li></ul> <p><img src="/assets/img/thread_java-thread-x-semaphore-8.5c1ceb30.png" alt=""></p> <p>说明: 此时，t2线程获取许可不会成功，之后会导致其被禁止运行，值得注意的是，AQS的state还是为2。</p> <ul><li>t1执行semaphore.release操作。主要的函数调用如下图所示。</li></ul> <p><img src="/assets/img/thread_java-thread-x-semaphore-9.d9ea0e13.png" alt=""></p> <p>说明: 此时，t2线程将会被unpark，并且AQS的state为5，t2获取cpu资源后可以继续运行。</p> <ul><li>main线程执行semaphore.release操作。主要的函数调用如下图所示。</li></ul> <p><img src="/assets/img/thread_java-thread-x-semaphore-10.ded9db0c.png" alt=""></p> <p>说明: 此时，t2线程还会被unpark，但是不会产生影响，此时，只要t2线程获得CPU资源就可以运行了。此时，AQS的state为10。</p> <ul><li>t2获取CPU资源，继续运行，此时t2需要恢复现场，回到parkAndCheckInterrupt函数中，也是在should继续运行。主要的函数调用如下图所示。</li></ul> <p><img src="/assets/img/thread_java-thread-x-semaphore-11.ddb433bf.png" alt=""></p> <p>说明: 此时，可以看到，Sync queue中只有一个结点，头节点与尾节点都指向该结点，在setHeadAndPropagate的函数中会设置头节点并且会unpark队列中的其他结点。</p> <ul><li>t2线程执行semaphore.release操作。主要的函数调用如下图所示。</li></ul> <p><img src="/assets/img/thread_java-thread-x-semaphore-12.4b1aa631.png" alt=""></p> <p>说明: t2线程经过release后，此时信号量的许可又变为10个了，此时Sync queue中的结点还是没有变化。</p> <h2 id="更深入理解"><a href="#更深入理解" class="header-anchor">#</a> 更深入理解</h2> <hr> <h3 id="单独使用semaphore是不会使用到aqs的条件队列的"><a href="#单独使用semaphore是不会使用到aqs的条件队列的" class="header-anchor">#</a> 单独使用Semaphore是不会使用到AQS的条件队列的</h3> <p>不同于CyclicBarrier和ReentrantLock，单独使用Semaphore是不会使用到AQS的条件队列的，其实，只有进行await操作才会进入条件队列，其他的都是在同步队列中，只是当前线程会被park。</p> <h3 id="场景问题"><a href="#场景问题" class="header-anchor">#</a> 场景问题</h3> <h4 id="semaphore初始化有10个令牌-11个线程同时各调用1次acquire方法-会发生什么"><a href="#semaphore初始化有10个令牌-11个线程同时各调用1次acquire方法-会发生什么" class="header-anchor">#</a> semaphore初始化有10个令牌，11个线程同时各调用1次acquire方法，会发生什么?</h4> <p>答案：拿不到令牌的线程阻塞，不会继续往下运行。</p> <h4 id="semaphore初始化有10个令牌-一个线程重复调用11次acquire方法-会发生什么"><a href="#semaphore初始化有10个令牌-一个线程重复调用11次acquire方法-会发生什么" class="header-anchor">#</a> semaphore初始化有10个令牌，一个线程重复调用11次acquire方法，会发生什么?</h4> <p>答案：线程阻塞，不会继续往下运行。可能你会考虑类似于锁的重入的问题，很好，但是，令牌没有重入的概念。你只要调用一次acquire方法，就需要有一个令牌才能继续运行。</p> <h4 id="semaphore初始化有1个令牌-1个线程调用一次acquire方法-然后调用两次release方法-之后另外一个线程调用acquire-2-方法-此线程能够获取到足够的令牌并继续运行吗"><a href="#semaphore初始化有1个令牌-1个线程调用一次acquire方法-然后调用两次release方法-之后另外一个线程调用acquire-2-方法-此线程能够获取到足够的令牌并继续运行吗" class="header-anchor">#</a> semaphore初始化有1个令牌，1个线程调用一次acquire方法，然后调用两次release方法，之后另外一个线程调用acquire(2)方法，此线程能够获取到足够的令牌并继续运行吗?</h4> <p>答案：能，原因是release方法会添加令牌，并不会以初始化的大小为准。</p> <h4 id="semaphore初始化有2个令牌-一个线程调用1次release方法-然后一次性获取3个令牌-会获取到吗"><a href="#semaphore初始化有2个令牌-一个线程调用1次release方法-然后一次性获取3个令牌-会获取到吗" class="header-anchor">#</a> semaphore初始化有2个令牌，一个线程调用1次release方法，然后一次性获取3个令牌，会获取到吗?</h4> <p>答案：能，原因是release会添加令牌，并不会以初始化的大小为准。Semaphore中release方法的调用并没有限制要在acquire后调用。</p> <p>具体示例如下，如果不相信的话，可以运行一下下面的demo，在做实验之前，笔者也认为应该是不允许的。。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class TestSemaphore2 {
    public static void main(String[] args) {
        int permitsNum = 2;
        final Semaphore semaphore = new Semaphore(permitsNum);
        try {
            System.out.println(&quot;availablePermits:&quot;+semaphore.availablePermits()+&quot;,semaphore.tryAcquire(3,1, TimeUnit.SECONDS):&quot;+semaphore.tryAcquire(3,1, TimeUnit.SECONDS));
            semaphore.release();
            System.out.println(&quot;availablePermits:&quot;+semaphore.availablePermits()+&quot;,semaphore.tryAcquire(3,1, TimeUnit.SECONDS):&quot;+semaphore.tryAcquire(3,1, TimeUnit.SECONDS));
        }catch (Exception e) {

        }
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <hr> <ul><li>文章主要参考自leesf的https://www.cnblogs.com/leesf456/p/5414778.html，在此基础上做了增改。</li> <li>https://blog.csdn.net/u010412719/article/details/94986327</li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://fanxgit.github.io/fanxNotes/edit/master/docs/Java/03.Java多线程与并发/25.JUC工具类-Semaphore详解.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/30/2023, 10:42:56 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/cf70b6/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JUC工具类-CyclicBarrier详解</div></a> <a href="/pages/9e2bd7/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">JUC工具类-Phaser详解</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/cf70b6/" class="prev">JUC工具类-CyclicBarrier详解</a></span> <span class="next"><a href="/pages/9e2bd7/">JUC工具类-Phaser详解</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/797621/"><div>
            VuePress+GithubPages教程
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/016620/"><div>
            java打jar包整理
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b23a10/"><div>
            多线程问题总结
            <!----></div></a> <span class="date">11-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.38fd400a.js" defer></script><script src="/assets/js/3.e11db813.js" defer></script><script src="/assets/js/72.9fa783f0.js" defer></script>
  </body>
</html>
