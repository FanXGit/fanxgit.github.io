<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JUC工具类-CyclicBarrier详解 | Fanx 知识库</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/img/logo.svg">[object Object]
    <meta name="description" content="">
    
    <link rel="preload" href="/assets/css/0.styles.6ece31e0.css" as="style"><link rel="preload" href="/assets/js/app.38fd400a.js" as="script"><link rel="preload" href="/assets/js/3.e11db813.js" as="script"><link rel="preload" href="/assets/js/130.a77cfa28.js" as="script"><link rel="prefetch" href="/assets/js/10.939e2dd4.js"><link rel="prefetch" href="/assets/js/100.4a08f581.js"><link rel="prefetch" href="/assets/js/101.45cd45c9.js"><link rel="prefetch" href="/assets/js/102.ac1359d1.js"><link rel="prefetch" href="/assets/js/103.22344102.js"><link rel="prefetch" href="/assets/js/104.5071cdfd.js"><link rel="prefetch" href="/assets/js/105.7767c121.js"><link rel="prefetch" href="/assets/js/106.809b79f1.js"><link rel="prefetch" href="/assets/js/107.62fd626a.js"><link rel="prefetch" href="/assets/js/108.0583fdc1.js"><link rel="prefetch" href="/assets/js/109.fa127771.js"><link rel="prefetch" href="/assets/js/11.6463adc8.js"><link rel="prefetch" href="/assets/js/110.5cf9f09c.js"><link rel="prefetch" href="/assets/js/111.9d963667.js"><link rel="prefetch" href="/assets/js/112.bc2b8a6e.js"><link rel="prefetch" href="/assets/js/113.2ae29573.js"><link rel="prefetch" href="/assets/js/114.0b2cedfa.js"><link rel="prefetch" href="/assets/js/115.652e433e.js"><link rel="prefetch" href="/assets/js/116.bcc5d64a.js"><link rel="prefetch" href="/assets/js/117.30b02d0d.js"><link rel="prefetch" href="/assets/js/118.87f4f927.js"><link rel="prefetch" href="/assets/js/119.05839492.js"><link rel="prefetch" href="/assets/js/12.a17960e5.js"><link rel="prefetch" href="/assets/js/120.3d772c9c.js"><link rel="prefetch" href="/assets/js/121.bd8fcebf.js"><link rel="prefetch" href="/assets/js/122.e58d2205.js"><link rel="prefetch" href="/assets/js/123.f2c2826d.js"><link rel="prefetch" href="/assets/js/124.12d9ff87.js"><link rel="prefetch" href="/assets/js/125.c7e4bf1c.js"><link rel="prefetch" href="/assets/js/126.71c358fb.js"><link rel="prefetch" href="/assets/js/127.fb1922e5.js"><link rel="prefetch" href="/assets/js/128.25cbf771.js"><link rel="prefetch" href="/assets/js/129.50047ea3.js"><link rel="prefetch" href="/assets/js/13.727ebfda.js"><link rel="prefetch" href="/assets/js/131.1618c1f5.js"><link rel="prefetch" href="/assets/js/132.4073573b.js"><link rel="prefetch" href="/assets/js/133.f6e4882f.js"><link rel="prefetch" href="/assets/js/134.1de81973.js"><link rel="prefetch" href="/assets/js/135.43148a0c.js"><link rel="prefetch" href="/assets/js/136.12b3ef34.js"><link rel="prefetch" href="/assets/js/137.accefc34.js"><link rel="prefetch" href="/assets/js/138.8d3115ff.js"><link rel="prefetch" href="/assets/js/139.6e492e2b.js"><link rel="prefetch" href="/assets/js/14.bc6d3062.js"><link rel="prefetch" href="/assets/js/140.3d98f006.js"><link rel="prefetch" href="/assets/js/141.542d08af.js"><link rel="prefetch" href="/assets/js/142.c91a19a2.js"><link rel="prefetch" href="/assets/js/143.0c681ed2.js"><link rel="prefetch" href="/assets/js/144.62e9c646.js"><link rel="prefetch" href="/assets/js/145.ebc34777.js"><link rel="prefetch" href="/assets/js/146.d94a04a7.js"><link rel="prefetch" href="/assets/js/147.b45158de.js"><link rel="prefetch" href="/assets/js/148.5dfa6740.js"><link rel="prefetch" href="/assets/js/149.cb6f2cb0.js"><link rel="prefetch" href="/assets/js/15.a9468bf1.js"><link rel="prefetch" href="/assets/js/150.9f58dbc6.js"><link rel="prefetch" href="/assets/js/151.0a1c07e3.js"><link rel="prefetch" href="/assets/js/152.eafe4843.js"><link rel="prefetch" href="/assets/js/153.fb94cab5.js"><link rel="prefetch" href="/assets/js/154.07f7a11d.js"><link rel="prefetch" href="/assets/js/155.7f6da40b.js"><link rel="prefetch" href="/assets/js/156.2f007ca1.js"><link rel="prefetch" href="/assets/js/157.a35b5249.js"><link rel="prefetch" href="/assets/js/158.540f7a5a.js"><link rel="prefetch" href="/assets/js/159.f62e0315.js"><link rel="prefetch" href="/assets/js/16.ace3b806.js"><link rel="prefetch" href="/assets/js/160.e043c758.js"><link rel="prefetch" href="/assets/js/161.d90141bf.js"><link rel="prefetch" href="/assets/js/162.ddcdbfb9.js"><link rel="prefetch" href="/assets/js/163.f1ba395e.js"><link rel="prefetch" href="/assets/js/164.9f398973.js"><link rel="prefetch" href="/assets/js/165.0db3da51.js"><link rel="prefetch" href="/assets/js/166.b5305797.js"><link rel="prefetch" href="/assets/js/167.e7b2f76b.js"><link rel="prefetch" href="/assets/js/168.a2ecf883.js"><link rel="prefetch" href="/assets/js/169.88bd4d26.js"><link rel="prefetch" href="/assets/js/17.60481837.js"><link rel="prefetch" href="/assets/js/170.fb1699e2.js"><link rel="prefetch" href="/assets/js/171.47268bef.js"><link rel="prefetch" href="/assets/js/172.79002327.js"><link rel="prefetch" href="/assets/js/173.3b1813fb.js"><link rel="prefetch" href="/assets/js/174.362811a9.js"><link rel="prefetch" href="/assets/js/175.bb48bcd7.js"><link rel="prefetch" href="/assets/js/176.97bbf32c.js"><link rel="prefetch" href="/assets/js/177.0717ff7a.js"><link rel="prefetch" href="/assets/js/178.75bff3b7.js"><link rel="prefetch" href="/assets/js/179.3e7db0a2.js"><link rel="prefetch" href="/assets/js/18.dd3c5709.js"><link rel="prefetch" href="/assets/js/180.c81da8dd.js"><link rel="prefetch" href="/assets/js/181.142d6d1c.js"><link rel="prefetch" href="/assets/js/182.fb312040.js"><link rel="prefetch" href="/assets/js/183.3684267e.js"><link rel="prefetch" href="/assets/js/184.ec2a13bc.js"><link rel="prefetch" href="/assets/js/185.a7acace4.js"><link rel="prefetch" href="/assets/js/186.7df28551.js"><link rel="prefetch" href="/assets/js/187.347e9348.js"><link rel="prefetch" href="/assets/js/188.07356026.js"><link rel="prefetch" href="/assets/js/189.0816176d.js"><link rel="prefetch" href="/assets/js/19.cc2d4ad1.js"><link rel="prefetch" href="/assets/js/190.fd5dd8cc.js"><link rel="prefetch" href="/assets/js/191.a938967e.js"><link rel="prefetch" href="/assets/js/192.859b71a1.js"><link rel="prefetch" href="/assets/js/193.adcf2ec3.js"><link rel="prefetch" href="/assets/js/194.69d1169c.js"><link rel="prefetch" href="/assets/js/195.ad7cbcc4.js"><link rel="prefetch" href="/assets/js/196.b65138da.js"><link rel="prefetch" href="/assets/js/197.b4fca73b.js"><link rel="prefetch" href="/assets/js/198.2494a23f.js"><link rel="prefetch" href="/assets/js/199.404b9ce1.js"><link rel="prefetch" href="/assets/js/2.938bab56.js"><link rel="prefetch" href="/assets/js/20.361e2bf6.js"><link rel="prefetch" href="/assets/js/200.42b54eae.js"><link rel="prefetch" href="/assets/js/201.ab495eb8.js"><link rel="prefetch" href="/assets/js/202.2cbc5c9a.js"><link rel="prefetch" href="/assets/js/203.abf3fde5.js"><link rel="prefetch" href="/assets/js/204.4fdd4cfb.js"><link rel="prefetch" href="/assets/js/205.411987d7.js"><link rel="prefetch" href="/assets/js/206.dbcab3ae.js"><link rel="prefetch" href="/assets/js/207.f1429354.js"><link rel="prefetch" href="/assets/js/208.f763286c.js"><link rel="prefetch" href="/assets/js/209.c1edbca5.js"><link rel="prefetch" href="/assets/js/21.ae1e88a3.js"><link rel="prefetch" href="/assets/js/210.b2a1501d.js"><link rel="prefetch" href="/assets/js/211.fe1fd5f7.js"><link rel="prefetch" href="/assets/js/212.0fd39a8f.js"><link rel="prefetch" href="/assets/js/213.bb3fc163.js"><link rel="prefetch" href="/assets/js/214.c42e1ef3.js"><link rel="prefetch" href="/assets/js/215.4f0fa915.js"><link rel="prefetch" href="/assets/js/216.07c485c9.js"><link rel="prefetch" href="/assets/js/217.ada25e7a.js"><link rel="prefetch" href="/assets/js/218.2f761d3c.js"><link rel="prefetch" href="/assets/js/219.32d1a663.js"><link rel="prefetch" href="/assets/js/22.0b09d67f.js"><link rel="prefetch" href="/assets/js/220.36c56cf4.js"><link rel="prefetch" href="/assets/js/221.3e0431e2.js"><link rel="prefetch" href="/assets/js/222.90aa0ff7.js"><link rel="prefetch" href="/assets/js/223.5966d7df.js"><link rel="prefetch" href="/assets/js/224.7e2329e1.js"><link rel="prefetch" href="/assets/js/225.2ed3675d.js"><link rel="prefetch" href="/assets/js/226.fa3cef02.js"><link rel="prefetch" href="/assets/js/227.07bf7bca.js"><link rel="prefetch" href="/assets/js/228.9ac2589a.js"><link rel="prefetch" href="/assets/js/229.b980e141.js"><link rel="prefetch" href="/assets/js/23.31ed5c2f.js"><link rel="prefetch" href="/assets/js/230.2c32e874.js"><link rel="prefetch" href="/assets/js/231.723e20cb.js"><link rel="prefetch" href="/assets/js/232.1f94511c.js"><link rel="prefetch" href="/assets/js/233.2d477f71.js"><link rel="prefetch" href="/assets/js/234.10141c75.js"><link rel="prefetch" href="/assets/js/235.a328b127.js"><link rel="prefetch" href="/assets/js/236.42419c3b.js"><link rel="prefetch" href="/assets/js/237.648ca44e.js"><link rel="prefetch" href="/assets/js/238.4b363b75.js"><link rel="prefetch" href="/assets/js/239.fe711a73.js"><link rel="prefetch" href="/assets/js/24.fe75e3fa.js"><link rel="prefetch" href="/assets/js/240.6baa12bf.js"><link rel="prefetch" href="/assets/js/241.6f375dc4.js"><link rel="prefetch" href="/assets/js/242.aee8e39d.js"><link rel="prefetch" href="/assets/js/243.bfc7f6e1.js"><link rel="prefetch" href="/assets/js/244.c73a14a7.js"><link rel="prefetch" href="/assets/js/245.a2352aa1.js"><link rel="prefetch" href="/assets/js/246.b12c3ae6.js"><link rel="prefetch" href="/assets/js/247.2f768275.js"><link rel="prefetch" href="/assets/js/248.3f79dfb1.js"><link rel="prefetch" href="/assets/js/249.7fd0cb75.js"><link rel="prefetch" href="/assets/js/25.f2e379df.js"><link rel="prefetch" href="/assets/js/250.df3f1d0a.js"><link rel="prefetch" href="/assets/js/251.a3865750.js"><link rel="prefetch" href="/assets/js/252.d62542df.js"><link rel="prefetch" href="/assets/js/253.59b2f200.js"><link rel="prefetch" href="/assets/js/254.522d17b5.js"><link rel="prefetch" href="/assets/js/255.0f95a196.js"><link rel="prefetch" href="/assets/js/256.31b37cbe.js"><link rel="prefetch" href="/assets/js/257.ff22ad12.js"><link rel="prefetch" href="/assets/js/258.15205e0b.js"><link rel="prefetch" href="/assets/js/259.f3b7c5aa.js"><link rel="prefetch" href="/assets/js/26.45264b04.js"><link rel="prefetch" href="/assets/js/260.fec3c7aa.js"><link rel="prefetch" href="/assets/js/261.d965ee56.js"><link rel="prefetch" href="/assets/js/262.76a7105b.js"><link rel="prefetch" href="/assets/js/263.e684cc46.js"><link rel="prefetch" href="/assets/js/264.59297da0.js"><link rel="prefetch" href="/assets/js/265.66182ed2.js"><link rel="prefetch" href="/assets/js/266.eec50d90.js"><link rel="prefetch" href="/assets/js/267.c85bce12.js"><link rel="prefetch" href="/assets/js/268.ef544f0c.js"><link rel="prefetch" href="/assets/js/269.8cfb5c6a.js"><link rel="prefetch" href="/assets/js/27.4e065810.js"><link rel="prefetch" href="/assets/js/270.b66cab3c.js"><link rel="prefetch" href="/assets/js/271.c1b7d136.js"><link rel="prefetch" href="/assets/js/272.0d7950c3.js"><link rel="prefetch" href="/assets/js/273.06349cca.js"><link rel="prefetch" href="/assets/js/274.9b442c09.js"><link rel="prefetch" href="/assets/js/275.11082d81.js"><link rel="prefetch" href="/assets/js/276.ce0abe31.js"><link rel="prefetch" href="/assets/js/277.4b7fcc53.js"><link rel="prefetch" href="/assets/js/278.129d0397.js"><link rel="prefetch" href="/assets/js/279.5c021f7c.js"><link rel="prefetch" href="/assets/js/28.126ecd33.js"><link rel="prefetch" href="/assets/js/280.d183c9e3.js"><link rel="prefetch" href="/assets/js/281.0df67750.js"><link rel="prefetch" href="/assets/js/282.8fdd2372.js"><link rel="prefetch" href="/assets/js/283.dae956df.js"><link rel="prefetch" href="/assets/js/284.c5dc7189.js"><link rel="prefetch" href="/assets/js/285.7f5a7367.js"><link rel="prefetch" href="/assets/js/286.d9bfcef5.js"><link rel="prefetch" href="/assets/js/287.4fa6a5c5.js"><link rel="prefetch" href="/assets/js/288.57904d2d.js"><link rel="prefetch" href="/assets/js/289.b96d7c2f.js"><link rel="prefetch" href="/assets/js/29.8f5db82a.js"><link rel="prefetch" href="/assets/js/290.8dda9646.js"><link rel="prefetch" href="/assets/js/291.ab433493.js"><link rel="prefetch" href="/assets/js/292.e2d59796.js"><link rel="prefetch" href="/assets/js/293.30f9fcc4.js"><link rel="prefetch" href="/assets/js/294.158492dc.js"><link rel="prefetch" href="/assets/js/295.33e3a53d.js"><link rel="prefetch" href="/assets/js/296.49d7a2de.js"><link rel="prefetch" href="/assets/js/297.1b7572ac.js"><link rel="prefetch" href="/assets/js/298.00e4586a.js"><link rel="prefetch" href="/assets/js/299.d8fb6ff9.js"><link rel="prefetch" href="/assets/js/30.ef97cb8e.js"><link rel="prefetch" href="/assets/js/300.90e9dadf.js"><link rel="prefetch" href="/assets/js/301.d5592ea1.js"><link rel="prefetch" href="/assets/js/302.b08dc1ea.js"><link rel="prefetch" href="/assets/js/303.bef541c8.js"><link rel="prefetch" href="/assets/js/304.be3f7081.js"><link rel="prefetch" href="/assets/js/305.13718421.js"><link rel="prefetch" href="/assets/js/306.41685aa2.js"><link rel="prefetch" href="/assets/js/307.6d569102.js"><link rel="prefetch" href="/assets/js/308.aaabab89.js"><link rel="prefetch" href="/assets/js/309.910ecc42.js"><link rel="prefetch" href="/assets/js/31.795b3334.js"><link rel="prefetch" href="/assets/js/310.104b7753.js"><link rel="prefetch" href="/assets/js/311.45f4a7da.js"><link rel="prefetch" href="/assets/js/312.180c7e45.js"><link rel="prefetch" href="/assets/js/313.87d3a801.js"><link rel="prefetch" href="/assets/js/314.7739b1ef.js"><link rel="prefetch" href="/assets/js/315.54a1fac0.js"><link rel="prefetch" href="/assets/js/316.a978a787.js"><link rel="prefetch" href="/assets/js/317.84f65f2c.js"><link rel="prefetch" href="/assets/js/318.7f8caff8.js"><link rel="prefetch" href="/assets/js/319.0b5276f3.js"><link rel="prefetch" href="/assets/js/32.e65c7229.js"><link rel="prefetch" href="/assets/js/320.ba90589a.js"><link rel="prefetch" href="/assets/js/321.b6810c5a.js"><link rel="prefetch" href="/assets/js/322.2eaa727d.js"><link rel="prefetch" href="/assets/js/323.17573ee3.js"><link rel="prefetch" href="/assets/js/324.806fd6ca.js"><link rel="prefetch" href="/assets/js/325.4cd65079.js"><link rel="prefetch" href="/assets/js/326.fe0e2e22.js"><link rel="prefetch" href="/assets/js/327.a64d0209.js"><link rel="prefetch" href="/assets/js/328.aca1c89a.js"><link rel="prefetch" href="/assets/js/329.53ccf1dd.js"><link rel="prefetch" href="/assets/js/33.9a57aab8.js"><link rel="prefetch" href="/assets/js/330.92822a09.js"><link rel="prefetch" href="/assets/js/331.6b82baff.js"><link rel="prefetch" href="/assets/js/332.fc20f585.js"><link rel="prefetch" href="/assets/js/333.005ba8e3.js"><link rel="prefetch" href="/assets/js/334.9d3309b8.js"><link rel="prefetch" href="/assets/js/335.0e938f19.js"><link rel="prefetch" href="/assets/js/336.01fe9903.js"><link rel="prefetch" href="/assets/js/337.e207d67c.js"><link rel="prefetch" href="/assets/js/338.bfcf6bc8.js"><link rel="prefetch" href="/assets/js/339.a502aa64.js"><link rel="prefetch" href="/assets/js/34.3835d35c.js"><link rel="prefetch" href="/assets/js/340.3888b147.js"><link rel="prefetch" href="/assets/js/341.20297f95.js"><link rel="prefetch" href="/assets/js/342.9cd149e9.js"><link rel="prefetch" href="/assets/js/343.faac8369.js"><link rel="prefetch" href="/assets/js/344.da8cd079.js"><link rel="prefetch" href="/assets/js/345.78303b88.js"><link rel="prefetch" href="/assets/js/346.d8eaca82.js"><link rel="prefetch" href="/assets/js/347.edd389a1.js"><link rel="prefetch" href="/assets/js/348.21ee9617.js"><link rel="prefetch" href="/assets/js/349.0251471a.js"><link rel="prefetch" href="/assets/js/35.76dc7096.js"><link rel="prefetch" href="/assets/js/350.710b7d30.js"><link rel="prefetch" href="/assets/js/351.535f8d60.js"><link rel="prefetch" href="/assets/js/352.c66fe42e.js"><link rel="prefetch" href="/assets/js/353.ebbcd333.js"><link rel="prefetch" href="/assets/js/354.7cbba2f1.js"><link rel="prefetch" href="/assets/js/355.0106db16.js"><link rel="prefetch" href="/assets/js/356.7debf350.js"><link rel="prefetch" href="/assets/js/357.a43eb887.js"><link rel="prefetch" href="/assets/js/358.28e5d2ed.js"><link rel="prefetch" href="/assets/js/359.956fc3b8.js"><link rel="prefetch" href="/assets/js/36.fc54452c.js"><link rel="prefetch" href="/assets/js/360.13fb600a.js"><link rel="prefetch" href="/assets/js/361.d100f85b.js"><link rel="prefetch" href="/assets/js/362.35277df2.js"><link rel="prefetch" href="/assets/js/363.d993a7fc.js"><link rel="prefetch" href="/assets/js/364.0168c2b0.js"><link rel="prefetch" href="/assets/js/365.bc8af0bb.js"><link rel="prefetch" href="/assets/js/366.2645dc0d.js"><link rel="prefetch" href="/assets/js/367.87368acb.js"><link rel="prefetch" href="/assets/js/368.0b7d41fc.js"><link rel="prefetch" href="/assets/js/369.4bf3f46e.js"><link rel="prefetch" href="/assets/js/37.5a47cee9.js"><link rel="prefetch" href="/assets/js/370.ea5f965e.js"><link rel="prefetch" href="/assets/js/371.1af764ef.js"><link rel="prefetch" href="/assets/js/372.bf6c68e2.js"><link rel="prefetch" href="/assets/js/373.1a605cc8.js"><link rel="prefetch" href="/assets/js/374.34a41a4a.js"><link rel="prefetch" href="/assets/js/375.1d2d3776.js"><link rel="prefetch" href="/assets/js/376.4b7b0b10.js"><link rel="prefetch" href="/assets/js/377.b3d9748a.js"><link rel="prefetch" href="/assets/js/378.7f00fa88.js"><link rel="prefetch" href="/assets/js/379.adcd298a.js"><link rel="prefetch" href="/assets/js/38.6614c565.js"><link rel="prefetch" href="/assets/js/380.6d08bb56.js"><link rel="prefetch" href="/assets/js/381.164bb4e3.js"><link rel="prefetch" href="/assets/js/382.f71f0ca4.js"><link rel="prefetch" href="/assets/js/383.01ba70ad.js"><link rel="prefetch" href="/assets/js/384.22b98cde.js"><link rel="prefetch" href="/assets/js/385.5f1298a9.js"><link rel="prefetch" href="/assets/js/386.01a912bc.js"><link rel="prefetch" href="/assets/js/387.3db4713f.js"><link rel="prefetch" href="/assets/js/388.4cde7d0f.js"><link rel="prefetch" href="/assets/js/389.d96bafad.js"><link rel="prefetch" href="/assets/js/39.1a09ed15.js"><link rel="prefetch" href="/assets/js/390.343bbc06.js"><link rel="prefetch" href="/assets/js/391.68b3e72a.js"><link rel="prefetch" href="/assets/js/392.f4f15e43.js"><link rel="prefetch" href="/assets/js/393.82475934.js"><link rel="prefetch" href="/assets/js/394.3101ea10.js"><link rel="prefetch" href="/assets/js/395.34083342.js"><link rel="prefetch" href="/assets/js/396.780d6efe.js"><link rel="prefetch" href="/assets/js/397.cb686f39.js"><link rel="prefetch" href="/assets/js/398.c4ad669f.js"><link rel="prefetch" href="/assets/js/399.ee8d28ad.js"><link rel="prefetch" href="/assets/js/4.c1dcb1a7.js"><link rel="prefetch" href="/assets/js/40.4216f4f9.js"><link rel="prefetch" href="/assets/js/400.23d48a38.js"><link rel="prefetch" href="/assets/js/401.319d7a68.js"><link rel="prefetch" href="/assets/js/402.25b27bd0.js"><link rel="prefetch" href="/assets/js/403.9a898a40.js"><link rel="prefetch" href="/assets/js/404.e3b49b79.js"><link rel="prefetch" href="/assets/js/405.7695b9f1.js"><link rel="prefetch" href="/assets/js/406.edb801f7.js"><link rel="prefetch" href="/assets/js/407.03c3f725.js"><link rel="prefetch" href="/assets/js/408.4345ef1f.js"><link rel="prefetch" href="/assets/js/409.77c34447.js"><link rel="prefetch" href="/assets/js/41.f035663a.js"><link rel="prefetch" href="/assets/js/410.7f6c0744.js"><link rel="prefetch" href="/assets/js/411.cb19323e.js"><link rel="prefetch" href="/assets/js/412.4b16959d.js"><link rel="prefetch" href="/assets/js/413.ff4f1ca2.js"><link rel="prefetch" href="/assets/js/414.b1ca1298.js"><link rel="prefetch" href="/assets/js/415.c2111593.js"><link rel="prefetch" href="/assets/js/416.a6d18039.js"><link rel="prefetch" href="/assets/js/417.dc36c66d.js"><link rel="prefetch" href="/assets/js/418.e7eba879.js"><link rel="prefetch" href="/assets/js/419.57673b9e.js"><link rel="prefetch" href="/assets/js/42.9c8cf569.js"><link rel="prefetch" href="/assets/js/420.ccd41fe0.js"><link rel="prefetch" href="/assets/js/421.ea69f0b0.js"><link rel="prefetch" href="/assets/js/422.093448e2.js"><link rel="prefetch" href="/assets/js/423.ae003f31.js"><link rel="prefetch" href="/assets/js/424.f670cd2b.js"><link rel="prefetch" href="/assets/js/425.6e814335.js"><link rel="prefetch" href="/assets/js/426.faf45206.js"><link rel="prefetch" href="/assets/js/427.cf6be942.js"><link rel="prefetch" href="/assets/js/428.9ff6199c.js"><link rel="prefetch" href="/assets/js/429.b6ef4678.js"><link rel="prefetch" href="/assets/js/43.717fe06b.js"><link rel="prefetch" href="/assets/js/430.e9575d07.js"><link rel="prefetch" href="/assets/js/431.8bf26a3e.js"><link rel="prefetch" href="/assets/js/432.5eaa2162.js"><link rel="prefetch" href="/assets/js/433.6dab12a1.js"><link rel="prefetch" href="/assets/js/434.fca918e8.js"><link rel="prefetch" href="/assets/js/435.4c8f9ad9.js"><link rel="prefetch" href="/assets/js/436.0f0de1a8.js"><link rel="prefetch" href="/assets/js/437.2221ab9f.js"><link rel="prefetch" href="/assets/js/438.37f28cfb.js"><link rel="prefetch" href="/assets/js/439.1e3f3611.js"><link rel="prefetch" href="/assets/js/44.705dc411.js"><link rel="prefetch" href="/assets/js/440.28ab35e8.js"><link rel="prefetch" href="/assets/js/441.8d006af8.js"><link rel="prefetch" href="/assets/js/442.2618a6e3.js"><link rel="prefetch" href="/assets/js/443.a7723674.js"><link rel="prefetch" href="/assets/js/444.18f23e7c.js"><link rel="prefetch" href="/assets/js/445.f4807c5a.js"><link rel="prefetch" href="/assets/js/446.77a5afc2.js"><link rel="prefetch" href="/assets/js/447.7f653483.js"><link rel="prefetch" href="/assets/js/448.1143c566.js"><link rel="prefetch" href="/assets/js/449.b788a288.js"><link rel="prefetch" href="/assets/js/45.6a225373.js"><link rel="prefetch" href="/assets/js/450.b6463ba3.js"><link rel="prefetch" href="/assets/js/451.fd4d46b9.js"><link rel="prefetch" href="/assets/js/452.e8de4fc2.js"><link rel="prefetch" href="/assets/js/453.4125e5e6.js"><link rel="prefetch" href="/assets/js/454.30af5d0a.js"><link rel="prefetch" href="/assets/js/455.9c919e58.js"><link rel="prefetch" href="/assets/js/456.22dbfa8f.js"><link rel="prefetch" href="/assets/js/457.e9c5248a.js"><link rel="prefetch" href="/assets/js/458.c0a9cf1d.js"><link rel="prefetch" href="/assets/js/459.b5e96042.js"><link rel="prefetch" href="/assets/js/46.515d085a.js"><link rel="prefetch" href="/assets/js/460.b4097efb.js"><link rel="prefetch" href="/assets/js/461.5d545741.js"><link rel="prefetch" href="/assets/js/462.402d4cdd.js"><link rel="prefetch" href="/assets/js/463.e6d6ea07.js"><link rel="prefetch" href="/assets/js/464.df817445.js"><link rel="prefetch" href="/assets/js/465.18a6bc2b.js"><link rel="prefetch" href="/assets/js/466.da313c0c.js"><link rel="prefetch" href="/assets/js/467.41294182.js"><link rel="prefetch" href="/assets/js/468.41c59467.js"><link rel="prefetch" href="/assets/js/469.d55da13c.js"><link rel="prefetch" href="/assets/js/47.a41193df.js"><link rel="prefetch" href="/assets/js/470.7457a92e.js"><link rel="prefetch" href="/assets/js/471.ed739bdf.js"><link rel="prefetch" href="/assets/js/472.83882459.js"><link rel="prefetch" href="/assets/js/473.fe2df51c.js"><link rel="prefetch" href="/assets/js/474.d40797b8.js"><link rel="prefetch" href="/assets/js/475.a00992a2.js"><link rel="prefetch" href="/assets/js/476.c7687189.js"><link rel="prefetch" href="/assets/js/477.fd4fd227.js"><link rel="prefetch" href="/assets/js/478.1ae08c3b.js"><link rel="prefetch" href="/assets/js/479.04a246c6.js"><link rel="prefetch" href="/assets/js/48.fe693306.js"><link rel="prefetch" href="/assets/js/480.36acb4ff.js"><link rel="prefetch" href="/assets/js/481.05d3129e.js"><link rel="prefetch" href="/assets/js/482.1741a02c.js"><link rel="prefetch" href="/assets/js/483.44cf2d25.js"><link rel="prefetch" href="/assets/js/484.9c14e5c6.js"><link rel="prefetch" href="/assets/js/485.ea0c1de1.js"><link rel="prefetch" href="/assets/js/486.8c683697.js"><link rel="prefetch" href="/assets/js/487.8b1eb604.js"><link rel="prefetch" href="/assets/js/488.ae16fca6.js"><link rel="prefetch" href="/assets/js/489.7f674a0d.js"><link rel="prefetch" href="/assets/js/49.a7d05a3d.js"><link rel="prefetch" href="/assets/js/490.52983854.js"><link rel="prefetch" href="/assets/js/491.968e7af4.js"><link rel="prefetch" href="/assets/js/492.e7f58bac.js"><link rel="prefetch" href="/assets/js/493.55afbb68.js"><link rel="prefetch" href="/assets/js/494.ac17d05b.js"><link rel="prefetch" href="/assets/js/495.d1ca2a12.js"><link rel="prefetch" href="/assets/js/496.d6841a0e.js"><link rel="prefetch" href="/assets/js/497.99431b4b.js"><link rel="prefetch" href="/assets/js/498.cacac1d8.js"><link rel="prefetch" href="/assets/js/499.c6b7fab0.js"><link rel="prefetch" href="/assets/js/5.f74a04c4.js"><link rel="prefetch" href="/assets/js/50.f59b29ea.js"><link rel="prefetch" href="/assets/js/500.abba24c7.js"><link rel="prefetch" href="/assets/js/501.e9496674.js"><link rel="prefetch" href="/assets/js/502.3ece0e86.js"><link rel="prefetch" href="/assets/js/503.974421d1.js"><link rel="prefetch" href="/assets/js/504.6e8d8539.js"><link rel="prefetch" href="/assets/js/505.b8161483.js"><link rel="prefetch" href="/assets/js/506.a6a6f2de.js"><link rel="prefetch" href="/assets/js/507.9c6955ee.js"><link rel="prefetch" href="/assets/js/508.223e145d.js"><link rel="prefetch" href="/assets/js/509.553e6f2c.js"><link rel="prefetch" href="/assets/js/51.428c5495.js"><link rel="prefetch" href="/assets/js/510.46e2eab7.js"><link rel="prefetch" href="/assets/js/511.24962b3f.js"><link rel="prefetch" href="/assets/js/512.a29fe236.js"><link rel="prefetch" href="/assets/js/513.8729b339.js"><link rel="prefetch" href="/assets/js/514.41199019.js"><link rel="prefetch" href="/assets/js/515.b1a71e99.js"><link rel="prefetch" href="/assets/js/516.001e3634.js"><link rel="prefetch" href="/assets/js/517.4de05581.js"><link rel="prefetch" href="/assets/js/518.57697c31.js"><link rel="prefetch" href="/assets/js/519.e962365e.js"><link rel="prefetch" href="/assets/js/52.c97c3911.js"><link rel="prefetch" href="/assets/js/520.e7775961.js"><link rel="prefetch" href="/assets/js/521.05b0ce57.js"><link rel="prefetch" href="/assets/js/522.49f7412e.js"><link rel="prefetch" href="/assets/js/523.b3d821b2.js"><link rel="prefetch" href="/assets/js/524.ab2395b7.js"><link rel="prefetch" href="/assets/js/525.25559bb4.js"><link rel="prefetch" href="/assets/js/526.23111d2a.js"><link rel="prefetch" href="/assets/js/527.c61f6e86.js"><link rel="prefetch" href="/assets/js/528.032fa7b6.js"><link rel="prefetch" href="/assets/js/529.3953f346.js"><link rel="prefetch" href="/assets/js/53.77f22b1a.js"><link rel="prefetch" href="/assets/js/530.b882066e.js"><link rel="prefetch" href="/assets/js/531.62dddf23.js"><link rel="prefetch" href="/assets/js/532.1826fe1a.js"><link rel="prefetch" href="/assets/js/533.a2e014bb.js"><link rel="prefetch" href="/assets/js/534.d5d89c00.js"><link rel="prefetch" href="/assets/js/535.4e5d7739.js"><link rel="prefetch" href="/assets/js/536.f2c700db.js"><link rel="prefetch" href="/assets/js/537.80aa278c.js"><link rel="prefetch" href="/assets/js/538.95e2f471.js"><link rel="prefetch" href="/assets/js/539.4e4ecfe8.js"><link rel="prefetch" href="/assets/js/54.d85b2f2e.js"><link rel="prefetch" href="/assets/js/540.00bd44e5.js"><link rel="prefetch" href="/assets/js/541.d740df14.js"><link rel="prefetch" href="/assets/js/542.5aadeaee.js"><link rel="prefetch" href="/assets/js/543.d42c9d9a.js"><link rel="prefetch" href="/assets/js/544.29704685.js"><link rel="prefetch" href="/assets/js/545.7fdb1a83.js"><link rel="prefetch" href="/assets/js/546.6b5655ea.js"><link rel="prefetch" href="/assets/js/547.c98e27c4.js"><link rel="prefetch" href="/assets/js/548.8edec06f.js"><link rel="prefetch" href="/assets/js/549.33b8eae3.js"><link rel="prefetch" href="/assets/js/55.80a4fa71.js"><link rel="prefetch" href="/assets/js/550.cb706b0e.js"><link rel="prefetch" href="/assets/js/551.79598cc6.js"><link rel="prefetch" href="/assets/js/552.69aa5f8b.js"><link rel="prefetch" href="/assets/js/553.7ccb8831.js"><link rel="prefetch" href="/assets/js/554.954013b2.js"><link rel="prefetch" href="/assets/js/555.960d7f8b.js"><link rel="prefetch" href="/assets/js/556.5c054c14.js"><link rel="prefetch" href="/assets/js/557.890045ea.js"><link rel="prefetch" href="/assets/js/558.f72f6668.js"><link rel="prefetch" href="/assets/js/559.452d8ff3.js"><link rel="prefetch" href="/assets/js/56.009b0340.js"><link rel="prefetch" href="/assets/js/560.1656e33f.js"><link rel="prefetch" href="/assets/js/561.bb4650eb.js"><link rel="prefetch" href="/assets/js/562.7322fd81.js"><link rel="prefetch" href="/assets/js/563.a34a68ea.js"><link rel="prefetch" href="/assets/js/564.6da92e18.js"><link rel="prefetch" href="/assets/js/565.01d288e5.js"><link rel="prefetch" href="/assets/js/566.6a3459a1.js"><link rel="prefetch" href="/assets/js/567.e3eb8e54.js"><link rel="prefetch" href="/assets/js/568.f95e0fba.js"><link rel="prefetch" href="/assets/js/569.a42d134c.js"><link rel="prefetch" href="/assets/js/57.25e8dd1c.js"><link rel="prefetch" href="/assets/js/570.87887d15.js"><link rel="prefetch" href="/assets/js/571.ce4b478b.js"><link rel="prefetch" href="/assets/js/572.634418a6.js"><link rel="prefetch" href="/assets/js/573.cd4cf02b.js"><link rel="prefetch" href="/assets/js/574.8bf073fa.js"><link rel="prefetch" href="/assets/js/575.c194dddb.js"><link rel="prefetch" href="/assets/js/576.7750193f.js"><link rel="prefetch" href="/assets/js/577.5daa388a.js"><link rel="prefetch" href="/assets/js/578.54bb0029.js"><link rel="prefetch" href="/assets/js/579.92f58c76.js"><link rel="prefetch" href="/assets/js/58.9c1eb9e5.js"><link rel="prefetch" href="/assets/js/580.0e543efb.js"><link rel="prefetch" href="/assets/js/581.4e0b0b47.js"><link rel="prefetch" href="/assets/js/582.8c172f83.js"><link rel="prefetch" href="/assets/js/583.c91c43e0.js"><link rel="prefetch" href="/assets/js/584.ca68d52b.js"><link rel="prefetch" href="/assets/js/585.663b17d3.js"><link rel="prefetch" href="/assets/js/586.9494847d.js"><link rel="prefetch" href="/assets/js/587.f3805773.js"><link rel="prefetch" href="/assets/js/588.8ae14be1.js"><link rel="prefetch" href="/assets/js/589.b4af88be.js"><link rel="prefetch" href="/assets/js/59.2a730e41.js"><link rel="prefetch" href="/assets/js/590.fb77fea8.js"><link rel="prefetch" href="/assets/js/591.a3aaa57c.js"><link rel="prefetch" href="/assets/js/592.54ec5f32.js"><link rel="prefetch" href="/assets/js/593.96eab5cb.js"><link rel="prefetch" href="/assets/js/594.e356725c.js"><link rel="prefetch" href="/assets/js/595.0a2c4ad4.js"><link rel="prefetch" href="/assets/js/596.2c075cd8.js"><link rel="prefetch" href="/assets/js/597.e904811b.js"><link rel="prefetch" href="/assets/js/598.f6ca8b71.js"><link rel="prefetch" href="/assets/js/599.ae3d12c4.js"><link rel="prefetch" href="/assets/js/6.451e012f.js"><link rel="prefetch" href="/assets/js/60.e6b60343.js"><link rel="prefetch" href="/assets/js/600.e71a0062.js"><link rel="prefetch" href="/assets/js/601.2571a19d.js"><link rel="prefetch" href="/assets/js/602.0f4fa961.js"><link rel="prefetch" href="/assets/js/603.d8387c37.js"><link rel="prefetch" href="/assets/js/604.69433906.js"><link rel="prefetch" href="/assets/js/605.1bc7d87a.js"><link rel="prefetch" href="/assets/js/606.ec419517.js"><link rel="prefetch" href="/assets/js/607.b473fb0b.js"><link rel="prefetch" href="/assets/js/608.a361b48c.js"><link rel="prefetch" href="/assets/js/609.9186f226.js"><link rel="prefetch" href="/assets/js/61.d50a156d.js"><link rel="prefetch" href="/assets/js/610.ff3cf241.js"><link rel="prefetch" href="/assets/js/611.c3c7e648.js"><link rel="prefetch" href="/assets/js/612.2a520ebd.js"><link rel="prefetch" href="/assets/js/613.42936ffc.js"><link rel="prefetch" href="/assets/js/614.3ca0de21.js"><link rel="prefetch" href="/assets/js/615.ecf60a47.js"><link rel="prefetch" href="/assets/js/616.17185e83.js"><link rel="prefetch" href="/assets/js/617.769d4cdf.js"><link rel="prefetch" href="/assets/js/618.015c6376.js"><link rel="prefetch" href="/assets/js/619.3af186d0.js"><link rel="prefetch" href="/assets/js/62.e24b7811.js"><link rel="prefetch" href="/assets/js/620.f8ff3784.js"><link rel="prefetch" href="/assets/js/621.4c21311f.js"><link rel="prefetch" href="/assets/js/622.355178df.js"><link rel="prefetch" href="/assets/js/623.45a30695.js"><link rel="prefetch" href="/assets/js/624.61e89d34.js"><link rel="prefetch" href="/assets/js/625.49e0d1ce.js"><link rel="prefetch" href="/assets/js/626.1b7ae767.js"><link rel="prefetch" href="/assets/js/627.b8c507cf.js"><link rel="prefetch" href="/assets/js/628.c5a43517.js"><link rel="prefetch" href="/assets/js/629.274eb0fd.js"><link rel="prefetch" href="/assets/js/63.b804baab.js"><link rel="prefetch" href="/assets/js/630.69e055ce.js"><link rel="prefetch" href="/assets/js/631.0892fc51.js"><link rel="prefetch" href="/assets/js/632.6a68e9a2.js"><link rel="prefetch" href="/assets/js/633.d536fe74.js"><link rel="prefetch" href="/assets/js/634.24695f39.js"><link rel="prefetch" href="/assets/js/635.3aeede9c.js"><link rel="prefetch" href="/assets/js/636.3628d8a6.js"><link rel="prefetch" href="/assets/js/637.40af5a79.js"><link rel="prefetch" href="/assets/js/638.15e257ae.js"><link rel="prefetch" href="/assets/js/639.31e6597c.js"><link rel="prefetch" href="/assets/js/64.eb5699ff.js"><link rel="prefetch" href="/assets/js/640.a071f6df.js"><link rel="prefetch" href="/assets/js/641.f9edd7bf.js"><link rel="prefetch" href="/assets/js/642.adcb583f.js"><link rel="prefetch" href="/assets/js/643.7c98a990.js"><link rel="prefetch" href="/assets/js/644.fb1213d8.js"><link rel="prefetch" href="/assets/js/645.220a5034.js"><link rel="prefetch" href="/assets/js/646.d66a419b.js"><link rel="prefetch" href="/assets/js/647.12ef89ab.js"><link rel="prefetch" href="/assets/js/648.a3112300.js"><link rel="prefetch" href="/assets/js/649.f457dfa5.js"><link rel="prefetch" href="/assets/js/65.0d8501b5.js"><link rel="prefetch" href="/assets/js/650.cc63d03b.js"><link rel="prefetch" href="/assets/js/651.16d1bbd6.js"><link rel="prefetch" href="/assets/js/652.0f5343f0.js"><link rel="prefetch" href="/assets/js/653.28f7710a.js"><link rel="prefetch" href="/assets/js/654.b343d473.js"><link rel="prefetch" href="/assets/js/655.215fe67b.js"><link rel="prefetch" href="/assets/js/656.79aa1653.js"><link rel="prefetch" href="/assets/js/657.c57f2b5c.js"><link rel="prefetch" href="/assets/js/658.d0aa0b95.js"><link rel="prefetch" href="/assets/js/659.2dfaed93.js"><link rel="prefetch" href="/assets/js/66.8361cc16.js"><link rel="prefetch" href="/assets/js/660.c00b347e.js"><link rel="prefetch" href="/assets/js/661.ecc4f968.js"><link rel="prefetch" href="/assets/js/662.06f83919.js"><link rel="prefetch" href="/assets/js/663.67d8849e.js"><link rel="prefetch" href="/assets/js/664.74dba1a9.js"><link rel="prefetch" href="/assets/js/665.28b450f0.js"><link rel="prefetch" href="/assets/js/666.0f4bb6ba.js"><link rel="prefetch" href="/assets/js/667.586074e3.js"><link rel="prefetch" href="/assets/js/668.b13c0e70.js"><link rel="prefetch" href="/assets/js/669.9d0d4cbc.js"><link rel="prefetch" href="/assets/js/67.37f46ba2.js"><link rel="prefetch" href="/assets/js/670.6b36ca72.js"><link rel="prefetch" href="/assets/js/671.33b2e754.js"><link rel="prefetch" href="/assets/js/672.3b02c287.js"><link rel="prefetch" href="/assets/js/673.3f274929.js"><link rel="prefetch" href="/assets/js/674.7d75584f.js"><link rel="prefetch" href="/assets/js/675.0de52334.js"><link rel="prefetch" href="/assets/js/676.6734133e.js"><link rel="prefetch" href="/assets/js/677.c6f4a973.js"><link rel="prefetch" href="/assets/js/678.1344b6be.js"><link rel="prefetch" href="/assets/js/679.23fed56f.js"><link rel="prefetch" href="/assets/js/68.27dbce5b.js"><link rel="prefetch" href="/assets/js/680.c49329d6.js"><link rel="prefetch" href="/assets/js/681.8df66615.js"><link rel="prefetch" href="/assets/js/682.77b4bff8.js"><link rel="prefetch" href="/assets/js/683.6cf41cf4.js"><link rel="prefetch" href="/assets/js/684.58deecd5.js"><link rel="prefetch" href="/assets/js/685.d2f7480e.js"><link rel="prefetch" href="/assets/js/686.0b77a241.js"><link rel="prefetch" href="/assets/js/687.2cc04b4f.js"><link rel="prefetch" href="/assets/js/688.da24cbae.js"><link rel="prefetch" href="/assets/js/689.a9961f74.js"><link rel="prefetch" href="/assets/js/69.8052a977.js"><link rel="prefetch" href="/assets/js/690.cb736269.js"><link rel="prefetch" href="/assets/js/691.21c13be1.js"><link rel="prefetch" href="/assets/js/692.3ed557d0.js"><link rel="prefetch" href="/assets/js/693.066efe93.js"><link rel="prefetch" href="/assets/js/694.5368f98a.js"><link rel="prefetch" href="/assets/js/695.4fdb93d5.js"><link rel="prefetch" href="/assets/js/696.9c055ac6.js"><link rel="prefetch" href="/assets/js/697.51e0c47c.js"><link rel="prefetch" href="/assets/js/698.08ca1dbd.js"><link rel="prefetch" href="/assets/js/699.ce7e9e2a.js"><link rel="prefetch" href="/assets/js/7.7e21c947.js"><link rel="prefetch" href="/assets/js/70.19faeb78.js"><link rel="prefetch" href="/assets/js/700.3676fa7f.js"><link rel="prefetch" href="/assets/js/701.82db4887.js"><link rel="prefetch" href="/assets/js/702.73425f22.js"><link rel="prefetch" href="/assets/js/703.d9391c74.js"><link rel="prefetch" href="/assets/js/704.d6e275cf.js"><link rel="prefetch" href="/assets/js/705.d2f23969.js"><link rel="prefetch" href="/assets/js/706.1c66dcc1.js"><link rel="prefetch" href="/assets/js/707.0fc5a26a.js"><link rel="prefetch" href="/assets/js/708.97471ee6.js"><link rel="prefetch" href="/assets/js/709.9b4d5665.js"><link rel="prefetch" href="/assets/js/71.d1683810.js"><link rel="prefetch" href="/assets/js/710.75fa8103.js"><link rel="prefetch" href="/assets/js/711.43777b40.js"><link rel="prefetch" href="/assets/js/712.5c583e39.js"><link rel="prefetch" href="/assets/js/713.5aa72111.js"><link rel="prefetch" href="/assets/js/714.e8215702.js"><link rel="prefetch" href="/assets/js/715.46614e7c.js"><link rel="prefetch" href="/assets/js/716.eaac6d69.js"><link rel="prefetch" href="/assets/js/717.c344c042.js"><link rel="prefetch" href="/assets/js/718.437bf0b2.js"><link rel="prefetch" href="/assets/js/719.23aa3deb.js"><link rel="prefetch" href="/assets/js/72.9fa783f0.js"><link rel="prefetch" href="/assets/js/720.9456a449.js"><link rel="prefetch" href="/assets/js/721.67fd324a.js"><link rel="prefetch" href="/assets/js/722.fc5e79ca.js"><link rel="prefetch" href="/assets/js/723.46db8115.js"><link rel="prefetch" href="/assets/js/724.31a11b8c.js"><link rel="prefetch" href="/assets/js/725.49cef603.js"><link rel="prefetch" href="/assets/js/726.7d0a2e7f.js"><link rel="prefetch" href="/assets/js/727.a1de6f02.js"><link rel="prefetch" href="/assets/js/728.7e0a727e.js"><link rel="prefetch" href="/assets/js/729.b6bf04fa.js"><link rel="prefetch" href="/assets/js/73.1ac0ac37.js"><link rel="prefetch" href="/assets/js/730.1c102528.js"><link rel="prefetch" href="/assets/js/731.80403e3d.js"><link rel="prefetch" href="/assets/js/732.cf8b4a6d.js"><link rel="prefetch" href="/assets/js/733.aab88d38.js"><link rel="prefetch" href="/assets/js/734.965a0adc.js"><link rel="prefetch" href="/assets/js/735.f9d33608.js"><link rel="prefetch" href="/assets/js/736.d1621f9e.js"><link rel="prefetch" href="/assets/js/737.a12ea0d3.js"><link rel="prefetch" href="/assets/js/738.96e61512.js"><link rel="prefetch" href="/assets/js/739.9bce4dfe.js"><link rel="prefetch" href="/assets/js/74.1913daec.js"><link rel="prefetch" href="/assets/js/740.c1a0bf7b.js"><link rel="prefetch" href="/assets/js/741.0185115e.js"><link rel="prefetch" href="/assets/js/742.21e99d78.js"><link rel="prefetch" href="/assets/js/743.e5f2407e.js"><link rel="prefetch" href="/assets/js/744.53d4e25a.js"><link rel="prefetch" href="/assets/js/745.9fb6722c.js"><link rel="prefetch" href="/assets/js/746.893e3a2f.js"><link rel="prefetch" href="/assets/js/747.ad94fed4.js"><link rel="prefetch" href="/assets/js/748.3421b09b.js"><link rel="prefetch" href="/assets/js/749.15c364e9.js"><link rel="prefetch" href="/assets/js/75.d63a9540.js"><link rel="prefetch" href="/assets/js/750.4e5379b7.js"><link rel="prefetch" href="/assets/js/751.18b0273f.js"><link rel="prefetch" href="/assets/js/752.24717596.js"><link rel="prefetch" href="/assets/js/753.5868bcc4.js"><link rel="prefetch" href="/assets/js/754.77808a6c.js"><link rel="prefetch" href="/assets/js/755.af7f7a71.js"><link rel="prefetch" href="/assets/js/76.342d837c.js"><link rel="prefetch" href="/assets/js/77.466349c3.js"><link rel="prefetch" href="/assets/js/78.886d05b6.js"><link rel="prefetch" href="/assets/js/79.b478bdab.js"><link rel="prefetch" href="/assets/js/8.9f40767d.js"><link rel="prefetch" href="/assets/js/80.9205cc43.js"><link rel="prefetch" href="/assets/js/81.77f831c9.js"><link rel="prefetch" href="/assets/js/82.650475d1.js"><link rel="prefetch" href="/assets/js/83.aa7e3d4b.js"><link rel="prefetch" href="/assets/js/84.2fc92fb4.js"><link rel="prefetch" href="/assets/js/85.0f633e10.js"><link rel="prefetch" href="/assets/js/86.e862f4bc.js"><link rel="prefetch" href="/assets/js/87.8a869468.js"><link rel="prefetch" href="/assets/js/88.6c584051.js"><link rel="prefetch" href="/assets/js/89.3ab84e02.js"><link rel="prefetch" href="/assets/js/9.7ed864ce.js"><link rel="prefetch" href="/assets/js/90.41e6925d.js"><link rel="prefetch" href="/assets/js/91.55055993.js"><link rel="prefetch" href="/assets/js/92.ced7b439.js"><link rel="prefetch" href="/assets/js/93.41cc8a7f.js"><link rel="prefetch" href="/assets/js/94.6d2b144f.js"><link rel="prefetch" href="/assets/js/95.399a7909.js"><link rel="prefetch" href="/assets/js/96.556f8f9f.js"><link rel="prefetch" href="/assets/js/97.47ecdf46.js"><link rel="prefetch" href="/assets/js/98.fdbe6822.js"><link rel="prefetch" href="/assets/js/99.db8442e4.js">
    <link rel="stylesheet" href="/assets/css/0.styles.6ece31e0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/logo.png" alt="Fanx 知识库" class="logo"> <span class="site-name can-hide">Fanx 知识库</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><!----> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Java" class="dropdown-title"><!----> <span class="title" style="display:;">Java</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/779590/" class="nav-link">Java基础</a></li><li class="dropdown-item"><!----> <a href="/pages/dc7834/" class="nav-link">Java集合框架</a></li><li class="dropdown-item"><!----> <a href="/pages/f2d7db/" class="nav-link">Java多线程并发</a></li><li class="dropdown-item"><!----> <a href="/pages/dbec4d/" class="nav-link">JavaIo&amp;NIO&amp;AIO</a></li><li class="dropdown-item"><!----> <a href="/pages/b908ce/" class="nav-link">JDK相关特性</a></li><li class="dropdown-item"><!----> <a href="/pages/e59bea/" class="nav-link">JVM相关</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><!----> <span class="title" style="display:;">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/f8c059/" class="nav-link">数据库基础知识</a></li><li class="dropdown-item"><!----> <a href="/pages/d192fd/" class="nav-link">Mysql</a></li><li class="dropdown-item"><!----> <a href="/pages/8aa877/" class="nav-link">Redis</a></li><li class="dropdown-item"><!----> <a href="/pages/077e7c/" class="nav-link">MogoDb</a></li><li class="dropdown-item"><!----> <a href="/pages/68281b/" class="nav-link">ElasticSearch</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用框架" class="dropdown-title"><!----> <span class="title" style="display:;">常用框架</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/commonFrameworks/mybatis/" class="nav-link">mybatis</a></li><li class="dropdown-item"><!----> <a href="/pages/8f6500/" class="nav-link">Spring Framework 5基础</a></li><li class="dropdown-item"><!----> <a href="/pages/7c08d4/" class="nav-link">SpringBoot 2.5.x系列</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="源代码学习" class="dropdown-title"><!----> <span class="title" style="display:;">源代码学习</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/23a632/" class="nav-link">mybatis源码学习</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/java/" class="nav-link">java源代码</a></li><li class="dropdown-item"><!----> <a href="/sourceCode/spring/" class="nav-link">Spring源码</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="面试相关" class="dropdown-title"><!----> <span class="title" style="display:;">面试相关</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/2cef48/" class="nav-link">Java 基础</a></li><li class="dropdown-item"><!----> <a href="/pages/ad2692/" class="nav-link">Spring 框架</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="常用的技术工具" class="dropdown-title"><!----> <span class="title" style="display:;">开发工具</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/tool/git/" class="nav-link">Git</a></li><li class="dropdown-item"><!----> <a href="/linux/common/" class="nav-link">linux常用命令实践</a></li><li class="dropdown-item"><!----> <a href="/tool/maven/" class="nav-link">Mavan</a></li><li class="dropdown-item"><!----> <a href="/pages/b25802/" class="nav-link">开发工具详解</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="其它语言" class="dropdown-title"><!----> <span class="title" style="display:;">其它语言</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/fc414d/" class="nav-link">Python基础</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="问题总结" class="dropdown-title"><!----> <span class="title" style="display:;">问题总结</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/question/redis/" class="nav-link">redis</a></li><li class="dropdown-item"><!----> <a href="/pages/4d0fa7/" class="nav-link">团队相关</a></li><li class="dropdown-item"><!----> <a href="/pages/75c3d7/" class="nav-link">fanx</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="算法" class="dropdown-title"><!----> <span class="title" style="display:;">算法</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/pages/caf303/" class="nav-link">数据结构基础</a></li><li class="dropdown-item"><!----> <a href="/pages/395e23/" class="nav-link">常见排序算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fa3dd3/" class="nav-link">算法思想</a></li><li class="dropdown-item"><!----> <a href="/pages/79d342/" class="nav-link">一些领域算法</a></li><li class="dropdown-item"><!----> <a href="/pages/fdb54d/" class="nav-link">其它算法相关</a></li></ul></div></div> <a href="https://fanxgit.github.io/fanxNotes/" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>集合框架</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Java多线程与并发</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f2d7db/" class="sidebar-link">Java并发知识体系详解</a></li><li><a href="/pages/e49d07/" class="sidebar-link">Java 并发 - 理论基础</a></li><li><a href="/pages/0e4c2e/" class="sidebar-link">Java 并发 - 线程基础</a></li><li><a href="/pages/03aac1/" class="sidebar-link">Java并发 - Java中所有的锁</a></li><li><a href="/pages/b1fa07/" class="sidebar-link">关键字-synchronized详解</a></li><li><a href="/pages/e8097b/" class="sidebar-link">关键字-volatile详解</a></li><li><a href="/pages/44d29e/" class="sidebar-link">关键字-final详解</a></li><li><a href="/pages/52b863/" class="sidebar-link">JUC - 类汇总和学习指南</a></li><li><a href="/pages/60879f/" class="sidebar-link">JUC原子类-CAS, Unsafe和原子类详解</a></li><li><a href="/pages/3f52bd/" class="sidebar-link">JUC锁-LockSupport详解</a></li><li><a href="/pages/620379/" class="sidebar-link">JUC锁-锁核心类AQS详解</a></li><li><a href="/pages/e5e4ff/" class="sidebar-link">JUC锁-ReentrantLock详解</a></li><li><a href="/pages/926698/" class="sidebar-link">JUC锁-ReentrantReadWriteLock详解</a></li><li><a href="/pages/e33954/" class="sidebar-link">JUC集合-ConcurrentHashMap详解</a></li><li><a href="/pages/ccc6d9/" class="sidebar-link">JUC集合-CopyOnWriteArrayList详解</a></li><li><a href="/pages/3e2c89/" class="sidebar-link">JUC集合-ConcurrentLinkedQueue详解</a></li><li><a href="/pages/24b41a/" class="sidebar-link">JUC集合-BlockingQueue详解</a></li><li><a href="/pages/bcf3da/" class="sidebar-link">JUC线程池-FutureTask详解</a></li><li><a href="/pages/1fce0f/" class="sidebar-link">JUC线程池-ThreadPoolExecutor详解</a></li><li><a href="/pages/85bf53/" class="sidebar-link">JUC线程池-ScheduledThreadPoolExecutor详解</a></li><li><a href="/pages/688f62/" class="sidebar-link">JUC线程池-ForkJoin框架详解</a></li><li><a href="/pages/ee399a/" class="sidebar-link">JUC工具类-CountDownLatch详解</a></li><li><a href="/pages/cf70b6/" aria-current="page" class="active sidebar-link">JUC工具类-CyclicBarrier详解</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#juc工具类-cyclicbarrier详解" class="sidebar-link">JUC工具类: CyclicBarrier详解</a></li><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#带着bat大厂的面试问题去理解" class="sidebar-link">带着BAT大厂的面试问题去理解</a></li><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#cyclicbarrier简介" class="sidebar-link">CyclicBarrier简介</a></li><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#cyclicbarrier源码分析" class="sidebar-link">CyclicBarrier源码分析</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/pages/cf70b6/#类的继承关系" class="sidebar-link">类的继承关系</a></li><li class="sidebar-sub-header level3"><a href="/pages/cf70b6/#类的属性" class="sidebar-link">类的属性</a></li><li class="sidebar-sub-header level3"><a href="/pages/cf70b6/#类的构造函数" class="sidebar-link">类的构造函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/cf70b6/#核心函数-dowait函数" class="sidebar-link">核心函数 - dowait函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/cf70b6/#核心函数-nextgeneration函数" class="sidebar-link">核心函数 - nextGeneration函数</a></li><li class="sidebar-sub-header level3"><a href="/pages/cf70b6/#breakbarrier函数" class="sidebar-link">breakBarrier函数</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#cyclicbarrier示例" class="sidebar-link">CyclicBarrier示例</a></li><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#和countdonwlatch再对比" class="sidebar-link">和CountDonwLatch再对比</a></li><li class="sidebar-sub-header level2"><a href="/pages/cf70b6/#" class="sidebar-link"></a></li></ul></li><li><a href="/pages/725172/" class="sidebar-link">JUC工具类-Semaphore详解</a></li><li><a href="/pages/9e2bd7/" class="sidebar-link">JUC工具类-Phaser详解</a></li><li><a href="/pages/0baf76/" class="sidebar-link">JUC工具类-Exchanger详解</a></li><li><a href="/pages/d277df/" class="sidebar-link">Java 并发 - ThreadLocal详解</a></li><li><a href="/pages/b23a10/" class="sidebar-link">多线程问题总结</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java IO-NIO-AIO</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java8 特性详解</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java8各版本特性概述</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JVM相关</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java其它相关</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-06225672><div class="articleInfo" data-v-06225672><ul class="breadcrumbs" data-v-06225672><li data-v-06225672><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-06225672></a></li> <li data-v-06225672><a href="/web/#Java" data-v-06225672>Java</a></li><li data-v-06225672><a href="/web/#Java多线程与并发" data-v-06225672>Java多线程与并发</a></li></ul> <div class="info" data-v-06225672><div title="作者" class="author iconfont icon-touxiang" data-v-06225672><a href="https://github.com/FanXGit" target="_blank" title="作者" class="beLink" data-v-06225672>fanx</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-06225672><a href="javascript:;" data-v-06225672>2023-07-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">JUC工具类-CyclicBarrier详解<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="juc工具类-cyclicbarrier详解"><a href="#juc工具类-cyclicbarrier详解" class="header-anchor">#</a> JUC工具类: CyclicBarrier详解</h2> <p>====================================================</p> <blockquote><p>CyclicBarrier底层是基于ReentrantLock和AbstractQueuedSynchronizer来实现的, 在理解的时候最好和CountDownLatch放在一起理解(相见本文分析)。@pdai</p></blockquote> <ul><li><a href="#juc%E5%B7%A5%E5%85%B7%E7%B1%BB-cyclicbarrier%E8%AF%A6%E8%A7%A3">JUC工具类: CyclicBarrier详解</a> <ul><li><a href="#%E5%B8%A6%E7%9D%80bat%E5%A4%A7%E5%8E%82%E7%9A%84%E9%9D%A2%E8%AF%95%E9%97%AE%E9%A2%98%E5%8E%BB%E7%90%86%E8%A7%A3">带着BAT大厂的面试问题去理解</a></li> <li><a href="#cyclicbarrier%E7%AE%80%E4%BB%8B">CyclicBarrier简介</a></li> <li><a href="#cyclicbarrier%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">CyclicBarrier源码分析</a> <ul><li><a href="#%E7%B1%BB%E7%9A%84%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB">类的继承关系</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E5%B1%9E%E6%80%A7">类的属性</a></li> <li><a href="#%E7%B1%BB%E7%9A%84%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">类的构造函数</a></li> <li><a href="#%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0---dowait%E5%87%BD%E6%95%B0">核心函数 - dowait函数</a></li> <li><a href="#%E6%A0%B8%E5%BF%83%E5%87%BD%E6%95%B0---nextgeneration%E5%87%BD%E6%95%B0">核心函数 - nextGeneration函数</a></li> <li><a href="#breakbarrier%E5%87%BD%E6%95%B0">breakBarrier函数</a></li></ul></li> <li><a href="#cyclicbarrier%E7%A4%BA%E4%BE%8B">CyclicBarrier示例</a></li> <li><a href="#%E5%92%8Ccountdonwlatch%E5%86%8D%E5%AF%B9%E6%AF%94">和CountDonwLatch再对比</a></li> <li><a href="#%E5%8F%82%E8%80%83%E6%96%87%E7%AB%A0">参考文章</a></li></ul></li></ul> <h2 id="带着bat大厂的面试问题去理解"><a href="#带着bat大厂的面试问题去理解" class="header-anchor">#</a> 带着BAT大厂的面试问题去理解</h2> <hr> <p>提示</p> <p>请带着这些问题继续后文，会很大程度上帮助你更好的理解相关知识点。@pdai</p> <ul><li>什么是CyclicBarrier?</li> <li>CyclicBarrier底层实现原理?</li> <li>CountDownLatch和CyclicBarrier对比?</li> <li>CyclicBarrier的核心函数有哪些?</li> <li>CyclicBarrier适用于什么场景?</li></ul> <h2 id="cyclicbarrier简介"><a href="#cyclicbarrier简介" class="header-anchor">#</a> CyclicBarrier简介</h2> <hr> <ul><li><p>对于CountDownLatch，其他线程为游戏玩家，比如英雄联盟，主线程为控制游戏开始的线程。在所有的玩家都准备好之前，主线程是处于等待状态的，也就是游戏不能开始。当所有的玩家准备好之后，下一步的动作实施者为主线程，即开始游戏。</p></li> <li><p>对于CyclicBarrier，假设有一家公司要全体员工进行团建活动，活动内容为翻越三个障碍物，每一个人翻越障碍物所用的时间是不一样的。但是公司要求所有人在翻越当前障碍物之后再开始翻越下一个障碍物，也就是所有人翻越第一个障碍物之后，才开始翻越第二个，以此类推。类比地，每一个员工都是一个“其他线程”。当所有人都翻越的所有的障碍物之后，程序才结束。而主线程可能早就结束了，这里我们不用管主线程。</p></li></ul> <h2 id="cyclicbarrier源码分析"><a href="#cyclicbarrier源码分析" class="header-anchor">#</a> CyclicBarrier源码分析</h2> <hr> <h3 id="类的继承关系"><a href="#类的继承关系" class="header-anchor">#</a> 类的继承关系</h3> <p>CyclicBarrier没有显示继承哪个父类或者实现哪个父接口, 所有AQS和重入锁不是通过继承实现的，而是通过组合实现的。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class CyclicBarrier {}
```　　

### 类的内部类

CyclicBarrier类存在一个内部类Generation，每一次使用的CycBarrier可以当成Generation的实例，其源代码如下

```java
private static class Generation {
    boolean broken = false;
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>说明: Generation类有一个属性broken，用来表示当前屏障是否被损坏。</p> <h3 id="类的属性"><a href="#类的属性" class="header-anchor">#</a> 类的属性</h3> <div class="language- line-numbers-mode"><pre class="language-text"><code>public class CyclicBarrier {
    
    /** The lock for guarding barrier entry */
    // 可重入锁
    private final ReentrantLock lock = new ReentrantLock();
    /** Condition to wait on until tripped */
    // 条件队列
    private final Condition trip = lock.newCondition();
    /** The number of parties */
    // 参与的线程数量
    private final int parties;
    /* The command to run when tripped */
    // 由最后一个进入 barrier 的线程执行的操作
    private final Runnable barrierCommand;
    /** The current generation */
    // 当前代
    private Generation generation = new Generation();
    // 正在等待进入屏障的线程数量
    private int count;
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>说明: 该属性有一个为ReentrantLock对象，有一个为Condition对象，而Condition对象又是基于AQS的，所以，归根到底，底层还是由AQS提供支持。</p> <h3 id="类的构造函数"><a href="#类的构造函数" class="header-anchor">#</a> 类的构造函数</h3> <ul><li>CyclicBarrier(int, Runnable)型构造函数</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public CyclicBarrier(int parties, Runnable barrierAction) {
    // 参与的线程数量小于等于0，抛出异常
    if (parties &lt;= 0) throw new IllegalArgumentException();
    // 设置parties
    this.parties = parties;
    // 设置count
    this.count = parties;
    // 设置barrierCommand
    this.barrierCommand = barrierAction;
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>说明: 该构造函数可以指定关联该CyclicBarrier的线程数量，并且可以指定在所有线程都进入屏障后的执行动作，该执行动作由最后一个进行屏障的线程执行。</p> <ul><li>CyclicBarrier(int)型构造函数</li></ul> <div class="language- line-numbers-mode"><pre class="language-text"><code>public CyclicBarrier(int parties) {
    // 调用含有两个参数的构造函数
    this(parties, null);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>说明: 该构造函数仅仅执行了关联该CyclicBarrier的线程数量，没有设置执行动作。</p> <h3 id="核心函数-dowait函数"><a href="#核心函数-dowait函数" class="header-anchor">#</a> 核心函数 - dowait函数</h3> <p>此函数为CyclicBarrier类的核心函数，CyclicBarrier类对外提供的await函数在底层都是调用该了doawait函数，其源代码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>private int dowait(boolean timed, long nanos)
    throws InterruptedException, BrokenBarrierException,
            TimeoutException {
    // 保存当前锁
    final ReentrantLock lock = this.lock;
    // 锁定
    lock.lock();
    try {
        // 保存当前代
        final Generation g = generation;
        
        if (g.broken) // 屏障被破坏，抛出异常
            throw new BrokenBarrierException();

        if (Thread.interrupted()) { // 线程被中断
            // 损坏当前屏障，并且唤醒所有的线程，只有拥有锁的时候才会调用
            breakBarrier();
            // 抛出异常
            throw new InterruptedException();
        }
        
        // 减少正在等待进入屏障的线程数量
        int index = --count;
        if (index == 0) {  // 正在等待进入屏障的线程数量为0，所有线程都已经进入
            // 运行的动作标识
            boolean ranAction = false;
            try {
                // 保存运行动作
                final Runnable command = barrierCommand;
                if (command != null) // 动作不为空
                    // 运行
                    command.run();
                // 设置ranAction状态
                ranAction = true;
                // 进入下一代
                nextGeneration();
                return 0;
            } finally {
                if (!ranAction) // 没有运行的动作
                    // 损坏当前屏障
                    breakBarrier();
            }
        }

        // loop until tripped, broken, interrupted, or timed out
        // 无限循环
        for (;;) {
            try {
                if (!timed) // 没有设置等待时间
                    // 等待
                    trip.await(); 
                else if (nanos &gt; 0L) // 设置了等待时间，并且等待时间大于0
                    // 等待指定时长
                    nanos = trip.awaitNanos(nanos);
            } catch (InterruptedException ie) { 
                if (g == generation &amp;&amp; ! g.broken) { // 等于当前代并且屏障没有被损坏
                    // 损坏当前屏障
                    breakBarrier();
                    // 抛出异常
                    throw ie;
                } else { // 不等于当前带后者是屏障被损坏
                    // We're about to finish waiting even if we had not
                    // been interrupted, so this interrupt is deemed to
                    // &quot;belong&quot; to subsequent execution.
                    // 中断当前线程
                    Thread.currentThread().interrupt();
                }
            }

            if (g.broken) // 屏障被损坏，抛出异常
                throw new BrokenBarrierException();

            if (g != generation) // 不等于当前代
                // 返回索引
                return index;

            if (timed &amp;&amp; nanos &lt;= 0L) { // 设置了等待时间，并且等待时间小于0
                // 损坏屏障
                breakBarrier();
                // 抛出异常
                throw new TimeoutException();
            }
        }
    } finally {
        // 释放锁
        lock.unlock();
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br></div></div><p>说明: dowait方法的逻辑会进行一系列的判断，大致流程如下:</p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="核心函数-nextgeneration函数"><a href="#核心函数-nextgeneration函数" class="header-anchor">#</a> 核心函数 - nextGeneration函数</h3> <p>此函数在所有线程进入屏障后会被调用，即生成下一个版本，所有线程又可以重新进入到屏障中，其源代码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>private void nextGeneration() {
    // signal completion of last generation
    // 唤醒所有线程
    trip.signalAll();
    // set up next generation
    // 恢复正在等待进入屏障的线程数量
    count = parties;
    // 新生一代
    generation = new Generation();
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>在此函数中会调用AQS的signalAll方法，即唤醒所有等待线程。如果所有的线程都在等待此条件，则唤醒所有线程。其源代码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>public final void signalAll() {
    if (!isHeldExclusively()) // 不被当前线程独占，抛出异常
        throw new IllegalMonitorStateException();
    // 保存condition队列头节点
    Node first = firstWaiter;
    if (first != null) // 头节点不为空
        // 唤醒所有等待线程
        doSignalAll(first);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>说明: 此函数判断头节点是否为空，即条件队列是否为空，然后会调用doSignalAll函数，doSignalAll函数源码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>private void doSignalAll(Node first) {
    // condition队列的头节点尾结点都设置为空
    lastWaiter = firstWaiter = null;
    // 循环
    do {
        // 获取first结点的nextWaiter域结点
        Node next = first.nextWaiter;
        // 设置first结点的nextWaiter域为空
        first.nextWaiter = null;
        // 将first结点从condition队列转移到sync队列
        transferForSignal(first);
        // 重新设置first
        first = next;
    } while (first != null);
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>说明: 此函数会依次将条件队列中的节点转移到同步队列中，会调用到transferForSignal函数，其源码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>final boolean transferForSignal(Node node) {
    /*
        * If cannot change waitStatus, the node has been cancelled.
        */
    if (!compareAndSetWaitStatus(node, Node.CONDITION, 0))
        return false;

    /*
        * Splice onto queue and try to set waitStatus of predecessor to
        * indicate that thread is (probably) waiting. If cancelled or
        * attempt to set waitStatus fails, wake up to resync (in which
        * case the waitStatus can be transiently and harmlessly wrong).
        */
    Node p = enq(node);
    int ws = p.waitStatus;
    if (ws &gt; 0 || !compareAndSetWaitStatus(p, ws, Node.SIGNAL))
        LockSupport.unpark(node.thread);
    return true;
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>说明: 此函数的作用就是将处于条件队列中的节点转移到同步队列中，并设置结点的状态信息，其中会调用到enq函数，其源代码如下。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>private Node enq(final Node node) {
    for (;;) { // 无限循环，确保结点能够成功入队列
        // 保存尾结点
        Node t = tail;
        if (t == null) { // 尾结点为空，即还没被初始化
            if (compareAndSetHead(new Node())) // 头节点为空，并设置头节点为新生成的结点
                tail = head; // 头节点与尾结点都指向同一个新生结点
        } else { // 尾结点不为空，即已经被初始化过
            // 将node结点的prev域连接到尾结点
            node.prev = t; 
            if (compareAndSetTail(t, node)) { // 比较结点t是否为尾结点，若是则将尾结点设置为node
                // 设置尾结点的next域为node
                t.next = node; 
                return t; // 返回尾结点
            }
        }
    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><p>说明: 此函数完成了结点插入同步队列的过程，也很好理解。</p> <p>综合上面的分析可知，newGeneration函数的主要方法的调用如下，之后会通过一个例子详细讲解:</p> <p><img src="data:image/png;base64,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" alt=""></p> <h3 id="breakbarrier函数"><a href="#breakbarrier函数" class="header-anchor">#</a> breakBarrier函数</h3> <p>此函数的作用是损坏当前屏障，会唤醒所有在屏障中的线程。源代码如下:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>private void breakBarrier() {
    // 设置状态
    generation.broken = true;
    // 恢复正在等待进入屏障的线程数量
    count = parties;
    // 唤醒所有线程
    trip.signalAll();
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p>说明: 可以看到，此函数也调用了AQS的signalAll函数，由signal函数提供支持。</p> <h2 id="cyclicbarrier示例"><a href="#cyclicbarrier示例" class="header-anchor">#</a> CyclicBarrier示例</h2> <hr> <p>下面通过一个例子来详解CyclicBarrier的使用和内部工作机制，源代码如下</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>import java.util.concurrent.BrokenBarrierException;
import java.util.concurrent.CyclicBarrier;

class MyThread extends Thread {
    private CyclicBarrier cb;
    public MyThread(String name, CyclicBarrier cb) {
        super(name);
        this.cb = cb;
    }
    
    public void run() {
        System.out.println(Thread.currentThread().getName() + &quot; going to await&quot;);
        try {
            cb.await();
            System.out.println(Thread.currentThread().getName() + &quot; continue&quot;);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
public class CyclicBarrierDemo {
    public static void main(String[] args) throws InterruptedException, BrokenBarrierException {
        CyclicBarrier cb = new CyclicBarrier(3, new Thread(&quot;barrierAction&quot;) {
            public void run() {
                System.out.println(Thread.currentThread().getName() + &quot; barrier action&quot;);
                
            }
        });
        MyThread t1 = new MyThread(&quot;t1&quot;, cb);
        MyThread t2 = new MyThread(&quot;t2&quot;, cb);
        t1.start();
        t2.start();
        System.out.println(Thread.currentThread().getName() + &quot; going to await&quot;);
        cb.await();
        System.out.println(Thread.currentThread().getName() + &quot; continue&quot;);

    }
} 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br></div></div><p>运行结果(某一次):</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>t1 going to await
main going to await
t2 going to await
t2 barrier action
t2 continue
t1 continue
main continue 
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>说明: 根据结果可知，可能会存在如下的调用时序。</p> <p><img src="data:image/png;base64,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" alt=""></p> <p>说明: 由上图可知，假设t1线程的cb.await是在main线程的cb.barrierAction动作是由最后一个进入屏障的线程执行的。根据时序图，进一步分析出其内部工作流程。</p> <ul><li>main(主)线程执行cb.await操作，主要调用的函数如下。</li></ul> <p><img src="/assets/img/thread_java-thread-x-cyclicbarrier-4.c984d483.png" alt=""></p> <p>说明: 由于ReentrantLock的默认采用非公平策略，所以在dowait函数中调用的是ReentrantLock.NonfairSync的lock函数，由于此时AQS的状态是0，表示还没有被任何线程占用，故main线程可以占用，之后在dowait中会调用trip.await函数，最终的结果是条件队列中存放了一个包含main线程的结点，并且被禁止运行了，同时，main线程所拥有的资源也被释放了，可以供其他线程获取。</p> <ul><li>t1线程执行cb.await操作，其中假设t1线程的lock.lock操作在main线程释放了资源之后，则其主要调用的函数如下。</li></ul> <p><img src="/assets/img/thread_java-thread-x-cyclicbarrier-5.be477624.png" alt=""></p> <p>说明: 可以看到，之后condition queue(条件队列)里面有两个节点，包含t1线程的结点插入在队列的尾部，并且t1线程也被禁止了，因为执行了park操作，此时两个线程都被禁止了。</p> <ul><li>t2线程执行cb.await操作，其中假设t2线程的lock.lock操作在t1线程释放了资源之后，则其主要调用的函数如下。</li></ul> <p><img src="/assets/img/thread_java-thread-x-cyclicbarrier-6.e4020154.png" alt=""></p> <p>说明: 由上图可知，在t2线程执行await操作后，会直接执行command.run方法，不是重新开启一个线程，而是最后进入屏障的线程执行。同时，会将Condition queue中的所有节点都转移到Sync queue中，并且最后main线程会被unpark，可以继续运行。main线程获取cpu资源，继续运行。</p> <ul><li>main线程获取cpu资源，继续运行，下图给出了主要的方法调用:</li></ul> <p><img src="/assets/img/thread_java-thread-x-cyclicbarrier-7.535fe367.png" alt=""></p> <p>说明: 其中，由于main线程是在AQS.CO的wait中被park的，所以恢复时，会继续在该方法中运行。运行过后，t1线程被unpark，它获得cpu资源可以继续运行。</p> <ul><li>t1线程获取cpu资源，继续运行，下图给出了主要的方法调用。</li></ul> <p><img src="/assets/img/thread_java-thread-x-cyclicbarrier-8.bfb6355d.png" alt=""></p> <p>说明: 其中，由于t1线程是在AQS.CO的wait方法中被park，所以恢复时，会继续在该方法中运行。运行过后，Sync queue中保持着一个空节点。头节点与尾节点均指向它。</p> <p>注意: 在线程await过程中中断线程会抛出异常，所有进入屏障的线程都将被释放。至于CyclicBarrier的其他用法，读者可以自行查阅API，不再累赘。</p> <h2 id="和countdonwlatch再对比"><a href="#和countdonwlatch再对比" class="header-anchor">#</a> 和CountDonwLatch再对比</h2> <hr> <ul><li>CountDownLatch减计数，CyclicBarrier加计数。</li> <li>CountDownLatch是一次性的，CyclicBarrier可以重用。</li> <li>CountDownLatch和CyclicBarrier都有让多个线程等待同步然后再开始下一步动作的意思，但是CountDownLatch的下一步的动作实施者是主线程，具有不可重复性；而CyclicBarrier的下一步动作实施者还是“其他线程”本身，具有往复多次实施动作的特点。</li></ul> <h2 id=""><a href="#" class="header-anchor">#</a></h2> <hr> <ul><li>文章主要参考自leesf的https://www.cnblogs.com/leesf456/p/5392816.html，在此基础上做了增改。</li></ul></div></div> <!----> <div class="page-edit"><div class="edit-link"><a href="https://fanxgit.github.io/fanxNotes/edit/master/docs/Java/03.Java多线程与并发/24.JUC工具类-CyclicBarrier详解.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">7/30/2023, 10:42:56 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/ee399a/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">JUC工具类-CountDownLatch详解</div></a> <a href="/pages/725172/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">JUC工具类-Semaphore详解</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/ee399a/" class="prev">JUC工具类-CountDownLatch详解</a></span> <span class="next"><a href="/pages/725172/">JUC工具类-Semaphore详解</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/797621/"><div>
            VuePress+GithubPages教程
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/016620/"><div>
            java打jar包整理
            <!----></div></a> <span class="date">11-19</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/b23a10/"><div>
            多线程问题总结
            <!----></div></a> <span class="date">11-14</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> <!----></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.38fd400a.js" defer></script><script src="/assets/js/3.e11db813.js" defer></script><script src="/assets/js/130.a77cfa28.js" defer></script>
  </body>
</html>
